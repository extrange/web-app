{"version":3,"sources":["app/load-service-worker/LoadServiceWorker.js","shared/util.js","shared/useAsyncError.js","app/error-boundary/ErrorBoundary.js","app/theme.js","shared/components/randomBackground.js","shared/components/backgroundScreen.js","app/constants.js","app/network-core/baseQuery.js","app/network-core/baseApi.js","app/auth/authApi.js","app/appSlice.js","shared/components/loading.js","app/auth/Login.js","shared/useInput.js","app/refresh-session/RefreshSession.js","modules/Hmail/hmailApi.js","app/notifications/notificationSlice.js","modules/Hmail/hmailActions.js","modules/Hmail/Hmail.js","modules/Account/accountApi.js","modules/Account/BrowserCard.js","shared/static/browserLogos/chrome.png","shared/static/browserLogos/firefox.png","shared/static/browserLogos/edge.png","shared/static/browserLogos/safari.png","modules/Account/Browsers.js","modules/Account/TwoFactor.js","modules/Account/Account.js","modules/Dvr/dvrApi.js","modules/Dvr/Dvr.js","modules/Testing/testingApi.js","modules/Testing/util.js","modules/Testing/Testing.js","modules/PasswordTools/passwordUtil.js","modules/PasswordTools/passwordToolsApi.js","modules/PasswordTools/PasswordTools.js","modules/HomeAutomation/homeAutomationApi.js","modules/HomeAutomation/HomeAutomation.js","shared/components/textFieldClearableInfo.js","modules/OptionHedgeCalculator/TextFieldClearableInfoCurrency.js","modules/OptionHedgeCalculator/FieldUseWatch.js","modules/OptionHedgeCalculator/optionHedgeCalculatorApi.js","modules/OptionHedgeCalculator/OptionHedgeCalculator.js","modules/OptionHedgeCalculator/textFieldRefreshLoading.js","shared/components/styledListItem.js","modules/Lists/listApi.js","modules/Lists/List.js","shared/components/dialogBlurResponsive.js","shared/components/MarkdownEditor/scrollPastEnd.js","shared/components/MarkdownEditor/MarkdownEditor.js","shared/useAutosave.js","modules/Lists/listsSlice.js","modules/Lists/EditItem.js","modules/Lists/Item.js","modules/Lists/ListItems.js","modules/Lists/Lists.js","app/modules/modules.js","app/urls.js","app/modules/ModuleSelect.js","app/notifications/NotificationMenu.js","app/app-bar/AppBarDrawer.js","app/app-bar/AppBarNetworkLoading.js","app/app-bar/AppBar.js","app/App.js","app/network-error/networkErrorMiddleware.js","app/network-loading/networkLoadingMiddleware.js","app/store.js","shared/components/AlertSnackbarWithDialog.js","app/network-error/NetworkError.js","index.js"],"names":["Component","formatDistanceToNowPretty","date","differenceInMinutes","Date","formatDistanceToNow","addSuffix","differenceInCalendarDays","formatDistanceToNowStrict","differenceInCalendarYears","format","isLocalhost","Boolean","window","location","hostname","match","noop","stripHtml","html","DOMParser","parseFromString","body","textContent","stripUndefined","obj","isPlainObject","copy","Object","entries","k","hasServiceWorker","navigator","wb","Workbox","NoServiceWorker","useState","sbOpen","setSbOpen","Snackbar","open","onClose","autoHideDuration","Alert","severity","LoadServiceWorker","intervalId","useRef","registration","text","actions","undefined","details","setDetails","setError","useCallback","e","Error","useAsyncError","reloadPage","reload","onInstalled","event","isUpdate","console","log","onControlling","onActivated","onUpdate","current","waiting","Button","variant","color","onClick","messageSW","type","clearInterval","onError","error","toString","useEffect","addEventListener","register","then","r","catch","setInterval","update","ClickAwayListenerProps","onClickAway","action","StyledDialog","muiStyled","Dialog","theme","zIndex","snackbar","ErrorBoundary","props","setDialogOpen","state","setState","dialogOpen","errorInfo","this","scroll","DialogTitle","DialogContent","DialogContentText","componentStack","DialogActions","children","createMuiTheme","palette","primary","main","secondary","OverlayScrollbarOptions","className","overflowBehavior","x","scrollbars","autoHide","RandomBackgroundImage","styled","div","$picIndex","getPicIndex","min","max","seed","Math","ceil","floor","rng","seedrandom","getRandomInt","NUM_IMAGES","RandomBackground","picIndex","setPicIndex","listener","removeEventListener","BACKGROUND_COLOR","BackgroundScreen","BackgroundScreenRounded","NETWORK_ERROR","defaultValidateStatus","response","status","responseHandler","headers","get","trim","startsWith","json","joinUrl","base","url","replace","baseQuery","baseUrl","defaultHeaders","prepareHeaders","fetchFn","fetch","baseFetchOptions","a","arg","signal","getState","method","Headers","params","validateStatus","config","JSON","stringify","divider","indexOf","query","URLSearchParams","request","Request","requestClone","clone","responseClone","meta","resultData","data","name","message","baseApi","createApi","reducerPath","credentials","endpoints","authApi","injectEndpoints","build","checkLogin","login","mutation","logout","useCheckLoginQuery","useLoginMutation","useRecaptchaKeyQuery","useLogoutMutation","appSliceName","handleLoginFulfilled","payload","user","expiry","isSuperUser","is_superuser","recaptchaKey","recaptcha_key","loginStatus","loggedIn","appSlice","createSlice","initialState","module","networkError","pendingNetworkActions","reducers","setNetworkError","includes","clearNetworkError","setCurrentModule","setAppBar","drawerOpen","appBar","addNetworkAction","push","removeNetworkAction","splice","extraReducers","builder","addMatcher","matchFulfilled","isAllOf","matchRejected","isRejectedWithValue","localStorage","clear","selectLoginStatus","selectNetworkError","selectCurrentModule","selectPendingNetworkActions","StyledBackdrop","Backdrop","drawer","FlexContainer","FlexBackgroundScreen","Loading","showSpinner","fullscreen","content","CircularProgress","size","Typography","display","StyledForm","form","InnerContainer","StyledTextField","TextField","Spacer","StyledCircularProgress","Login","dispatch","useDispatch","useSelector","isLoading","refetchOnMountOrArgChange","isFetching","isError","initialValues","reducer","value","useReducer","values","setValue","onChange","target","bind","useInput","recaptchaRef","React","loginMessage","setLoginMessage","otpRequired","setOtpRequired","onSubmit","preventDefault","executeAsync","token","username","password","otp","save_browser","saveBrowser","res","otp_required","reset","gutterBottom","align","label","fullWidth","required","autoFocus","autoComplete","inputMode","pattern","FormControlLabel","control","Checkbox","checked","ref","sitekey","RefreshSession","pollingInterval","refetchOnReconnect","hmailApi","checkIhisMail","checkMohhMail","useCheckIhisMailQuery","useCheckMohhMailQuery","notificationsSliceName","shape","notificationSlice","addNotifications","every","item","keys","validateShape","prepare","id","nanoid","timestamp","now","Array","isArray","map","removeNotification","filter","removeNotificationsFromSource","source","selectNotificationsSorted","createSelector","items","slice","sort","b","handleMailAction","parseJSON","title","isToday","from","join","preview","getTime","Hmail","ihisMail","mohhMail","enhanceEndpoints","addTagTypes","accountApi","getBrowsers","providesTags","forgetAndLogoutBrowser","invalidatesTags","getOtpStatus","modify2Fa","useGetBrowsersQuery","useForgetAndLogoutBrowserMutation","useGetOtpStatusQuery","useModify2FaMutation","StyledCard","Card","$thisDevice","StyledTypography","ImageDiv","SavedBrowserDiv","BrowserLogoDiv","$image","CardContainer","BrowserLogo","Chrome","Firefox","Edge","Safari","BrowserCard","browser","is_active","is_current_session","is_saved","first_login","last_activity","ip","country_code","user_agent","prettifiedUserAgent","uaString","ua","UAParser","browserName","device","model","os","osName","osVersion","version","isMobile","prettifyUAString","detailView","setDetailView","CardActionArea","CardContent","Chip","getName","style","overflowWrap","CardActions","Grid","GridContainer","Browsers","browsers","marginLeft","compareDesc","TwoFactor","setOtp","secret","setSecret","otpStatus","href","unwrap","SUBMODULES","BROWSERS","appDrawer","ListItemIcon","ListItemText","jsx","TWOFACTOR","useGetOrRefreshChannelQuery","getOrRefreshChannel","channel","CHANNELS","VideoDiv","StyledVideo","video","testingApi","throwHttpError","throwFetchError","queryFn","api","extraOptions","useThrowHttpErrorMutation","useThrowFetchErrorMutation","throwAsyncThunkReject","createAsyncThunk","throwAsyncThunkRejectWithValue","rejectWithValue","StyledDiv","DIGITS_REGEX","LOWER_REGEX","UPPER_REGEX","SYMBOLS_REGEX","DIGITS","LOWER","UPPER","SYMBOLS","secureRandom","crypto","arr","Uint32Array","random","val","getRandomValues","randint","floor_min","floor_max","choice","length","getSecureRandom","formatNumber","Intl","NumberFormat","maximumFractionDigits","maximumSignificantDigits","getEntropy","hasDigits","test","hasLowerCase","hasUpperCase","hasSymbols","totalSymbols","bitsPerChar","log2","totalEntropy","generatePassword","digits","lower","upper","symbols","charSet","generate","getSha1Hash","msgUint8","TextEncoder","encode","subtle","digest","hashBuffer","hashArray","Uint8Array","padStart","toUpperCase","generateUsername","vowels","cons","num_vowels","num_cons","i","substr","useHibpLookupMutation","hibpLookup","hash","Container","TextFieldContainer","StyledIconButton","IconButton","OptionsFormGroup","FormGroup","PasswordDetailGrid","GreenCheck","CheckIcon","GreyCross","ClearIcon","formatDecimal","useSendCommandMutation","sendCommand","command","StyledContainer","COMMANDS","gate_toggle","ac_off","ac_on_24","ac_on_25","ceiling_fan_on","ceiling_fan_off","dyson_fan_on","dyson_fan_off","TextFieldClearableInfo","info","InputProps","endAdornment","InputAdornment","position","cursor","Tooltip","arrow","enterTouchDelay","interactive","tabIndex","CleaveTextField","inputRef","htmlRef","FieldUseWatch","fieldsToWatch","fields","useWatch","useGetSpyPriceQuery","getSpyPrice","FIELDS","emptyStringToUndefined","origVal","schema","yup","portfolioValue","positive","transform","spyPrice","hedgeRatio","delta","StyledTextFieldClearableInfo","StyledTextFieldRefresh","onRefresh","loading","tooltipText","onOpen","StyledTextFieldClearableInfoCurrency","InputLabelProps","shrink","inputComponent","inputProps","options","numeral","prefix","rawValueTrimPrefix","rawValue","formatNoDecimals","formatDecimals","formatDollars","currency","currencyDisplay","StyledListItem","ListItem","$hideBackground","breakpoints","up","$reserveSpace","StyledListItemSecondaryAction","ListItemSecondaryAction","ItemSkeleton","Skeleton","animation","width","listApi","getLists","createList","updateList","onQueryStarted","queryFulfilled","result","util","updateQueryData","draft","find","assign","undo","deleteList","getItems","list","_result","_error","createItem","notes","tasklist","unshift","isSkeleton","idx","findIndex","updateItem","deleteItem","useGetListsQuery","useCreateListMutation","useUpdateListMutation","useDeleteListMutation","useGetItemsQuery","useCreateItemMutation","useUpdateItemMutation","useDeleteItemMutation","List","anchorEl","setAnchorEl","stopPropagation","func","button","MenuItem","newTitle","prompt","primaryTypographyProps","noWrap","edge","currentTarget","$maxWidth","down","StyledOverlayScrollbarsComponent","OverlayScrollbarsComponent","DialogBlurResponsive","footer","maxWidth","disableScrollLock","updateBottomMargin","cm","padding","lineCount","scrollPastEndPadding","lineSpace","parentNode","paddingBottom","off","setSize","on","change","CodeMirror","changeEnd","line","lastLine","defineOption","old","Init","MarkdownEditor","defaultValue","instance","setInstance","initialValue","setInitialValue","loaded","setLoaded","refresh","mode","highlightFormatting","lineNumbers","lineWrapping","indentWithTabs","viewportMargin","Infinity","autoCloseBrackets","matchBrackets","styleSelectedText","styleActiveLine","autoRefresh","scrollPastEnd","editorDidMount","editor","newValue","defaultState","pendingData","creationInProgress","flushing","listsSliceName","listsSlice","currentList","setCurrentList","selectCurrentList","FooterRight","Footer","EditItem","closeEdit","editingItem","useTheme","fullScreen","useMediaQuery","currentListId","isLoadingCreateItem","createItemStarted","startedTimeStamp","isLoadingUpdateItem","updateItemStarted","isLoadingDeleteItem","itemIsEmpty","wait","maxWait","updateOrDelete","_onChange","newId","debounce","flush","useAutosave","useMemo","initialTitle","initialNotes","useForm","defaultValues","getValues","lastSavedTimeString","updated","lastCreatedTimeString","created","multiline","newVal","Item","setEditingItem","secondaryTypographyProps","StyledFab","Fab","ListItems","virtuosoRef","skip","scrollToIndex","behavior","disablePadding","dense","totalCount","itemContent","index","components","forwardRef","listRef","StyledButton","margin","MODULES","LISTS","menuName","onlySuperUser","element","setDrawerContent","setTitleContent","lists","isLoadingLists","refetchLists","refetch","isFetchingGetItems","refetchItems","disabled","ACCOUNT","submodule","setSubmodule","v","PASSWORDS","lookupHibp","hashCount","count","dialogType","passwordSettings","usernameSettings","settings","setSettings","setUsername","setPassword","snackbarOpen","setSnackbarOpen","entropy","setEntropy","secondsToBruteforce","generatedPassword","seconds","checkHibp","passwordStr","copyToClipboard","clipboard","writeText","setTimeout","onPasswordChange","closeSettings","Slider","step","FormControl","anchorOrigin","vertical","horizontal","helperText","Number","isFinite","formatDistance","HOME_AUTOMATION","setSnackbar","setDisabled","InputLabel","Select","DVR","setSidebarName","setChannel","player","load","uuid","getChannelUrl","stream_uuid","shaka","polyfill","installAll","unload","destroy","switchChannel","data-shaka-player-container","data-shaka-player","videoEl","Player","isBrowserSupported","detail","ui","Overlay","getControls","autoPlay","OPTION_HEDGE_CALCULATOR","fulfilledTimeStamp","setTooltipText","resolver","yupResolver","c","shouldValidate","render","field","fieldState","TEST","ModuleSelect","modules","moduleKey","endIcon","StyledChip","StyledPopover","Popover","StyledSpan","NotificationMenu","notifications","Badge","badgeContent","Fragment","disableTypography","Divider","OverlayScrollbarsWithMaxWidth","$width","AppNameDiv","TransparentDrawer","Drawer","$transparent","AppBarDrawer","drawerWidth","setDrawerOpen","sidebarName","mobile","closeAppBar","AppBarNetworkLoading","TransparentAppBar","MuiAppBar","DrawerContainer","flexShrink","ContentContainer","ContentDiv","AppBar","trigger","useScrollTrigger","threshold","drawerContent","titleContent","appBarProps","useLayoutEffect","Slide","direction","in","Toolbar","flex","createElement","App","networkErrorMiddleware","next","isRejected","condition","warn","networkLoadingMiddleware","isPending","requestId","isAnyOf","isFulfilled","store","configureStore","appPath","notificationsPath","listsPath","middleware","getDefaultMiddleware","concat","setupListeners","AlertSnackbarWithDialog","snackbarText","dialogTitle","dialogContent","dialogEnabled","component","whiteSpace","fontSize","NetworkError","Promise","resolve","ReactDOM","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.0f2c7a52.chunk.js","sourcesContent":["import {messageSW, Workbox} from \"workbox-window\";\nimport {useEffect, useRef, useState} from 'react';\nimport {Button, Snackbar} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\nimport {useAsyncError} from \"../../shared/useAsyncError\";\nimport {isLocalhost, noop} from \"../../shared/util\";\n\n// https://developers.google.com/web/tools/workbox/modules/workbox-window#important_service_worker_lifecycle_moments\n\nconst hasServiceWorker = () => 'serviceWorker' in navigator;\n\n// Workbox() calls navigator.serviceWorker which is undefined in Firefox private browsing.\nconst wb = hasServiceWorker() ? new Workbox('./service-worker.js') : null;\n\nconst NoServiceWorker = () => {\n    const [sbOpen, setSbOpen] = useState(true);\n\n    return <Snackbar\n        open={sbOpen}\n        onClose={() => setSbOpen(false)}\n        autoHideDuration={3000}>\n        <Alert\n            severity={'info'}\n            onClose={() => setSbOpen(false)}>\n            {'load-service-worker is not supported in your browser'}\n        </Alert>\n    </Snackbar>\n};\n\nconst withBrowserCheck = Component => {\n    return hasServiceWorker()\n    ? Component\n    : NoServiceWorker;\n};\n\n\nconst ServiceWorkerMain = () => {\n\n    const intervalId = useRef();\n    const registration = useRef({});\n    const [sbOpen, setSbOpen] = useState(false);\n    const [details, setDetails] = useState({\n        text: '',\n        severity: 'info',\n        actions: undefined,\n        autoHideDuration: 3000,\n    });\n\n    const setError = useAsyncError();\n\n    const reloadPage = () => {\n        setSbOpen(false);\n        window.location.reload()\n    };\n\n    const onInstalled = (event) => {\n        //\n        if (!event.isUpdate) {\n            setSbOpen(true);\n            setDetails({\n                text: 'Site is now available offline.',\n                severity: 'info',\n                autoHideDuration: 3000,\n            });\n            console.log('Installed, isUpdate false');\n        } else\n            console.log('Installed, isUpdate true')\n    };\n\n    const onControlling = event => {\n        if (event.isUpdate)\n            console.log('Controlling, isUpdate false');\n        else\n            console.log('Controlling, isUpdate true')\n    };\n\n    const onActivated = event => {\n        if (event.isUpdate)\n            console.log('Activated, isUpdate false');\n        else\n            console.log('Activated, isUpdate true')\n    };\n\n    const onUpdate = () => {\n        /*Deactivates the previous service worker and starts running the new one, ready for requests\n        * Regardless of the user's decision, the next reload will result in a new page.\n        * The new sw instance must be messaged for this to work.\n        * This is obtained from 'registration' set during registration of the new sw.\n        * For some reason wb.messageSW messages the old SW instead.*/\n        if (registration.current?.waiting) {\n            //Prompt user\n            setSbOpen(true);\n            setDetails({\n                text: 'Site has been updated. Reload page?',\n                severity: 'info',\n                autoHideDuration: null,\n                actions: <>\n                    <Button\n                        variant={'text'}\n                        color={'primary'}\n                        onClick={() => setSbOpen(false)}\n                    >No</Button>\n                    <Button\n                        variant={'text'}\n                        color={'primary'}\n                        onClick={reloadPage}\n                    >Yes</Button>\n                </>\n            });\n\n            messageSW(registration.current.waiting, {type: 'SKIP_WAITING'});\n            clearInterval(intervalId.current);\n            console.log('Waiting for activation, newer version available');\n        }\n    };\n\n    const onError = error => {\n        setSbOpen(true);\n        setDetails({\n            text: `Service worker update failed: ${error.toString()}`,\n            autoHideDuration: null,\n            severity: 'error',\n        });\n        console.log('Service worker update failed: ', error)\n    };\n\n    const onLocalhost = () => {\n        setSbOpen(true);\n        setDetails({\n            text: 'On localhost, service worker registration skipped',\n            autoHideDuration: 3000,\n            severity: 'info'\n        });\n        console.log('On localhost, service worker registration skipped.')\n    };\n\n    useEffect(() => {\n\n        // Skip SW registration if on localhost\n        if (isLocalhost) {\n            onLocalhost();\n            return;\n        }\n\n\n        wb.addEventListener('controlling', onControlling);\n        wb.addEventListener('activated', onActivated);\n        wb.addEventListener('installed', onInstalled);\n        wb.addEventListener('waiting', onUpdate);\n        wb.addEventListener('externalwaiting', onUpdate); // Any other different version\n\n        // Throw errors during registration\n        wb.register().then(r => registration.current = r).catch(e => setError(e));\n\n        // Service worker updates are checked on initial load\n        intervalId.current = setInterval(() => {\n            console.log('Checking for service worker updates...');\n\n            // Show snackbar on update failure, rather than throwing error\n            wb.update().catch(onError)\n        }, 5 * 60 * 1000);\n\n        // eslint-disable-next-line\n    }, []);\n\n    return <Snackbar\n        open={sbOpen}\n        ClickAwayListenerProps={{onClickAway: noop}}\n        onClose={() => setSbOpen(false)}\n        autoHideDuration={details.autoHideDuration}>\n        <Alert\n            severity={details.severity}\n            action={details.actions}\n            onClose={() => setSbOpen(false)}>\n            {details.text}\n        </Alert>\n    </Snackbar>;\n};\n\nexport const LoadServiceWorker = withBrowserCheck(ServiceWorkerMain);","/**\n * Utility functions.\n * Larger functions should be in their own file.\n */\nimport removeAccents from \"remove-accents\"\nimport seedrandom from 'seedrandom'\nimport {\n    differenceInCalendarDays,\n    differenceInCalendarYears,\n    differenceInMinutes,\n    format,\n    formatDistanceToNow,\n    formatDistanceToNowStrict\n} from \"date-fns\";\nimport UAParser from \"ua-parser-js\";\nimport {isPlainObject} from \"@reduxjs/toolkit\";\n\n/**\n * Strip accents, empty spaces and lowercase a string (for comparison purposes)\n * undefined/null returns an empty string\n * @param {String} string\n */\nexport const sanitizeString = string =>\n    string ? removeAccents(string).trim().toLowerCase() : ''\n;\n\nexport const isEmpty = string => !Boolean(string?.trim());\n\n/**\n * Returns a seeded random number between min (inclusive) and max (exclusive)\n * @param min\n * @param max\n * @param seed\n */\nexport const getRandomInt = (min, max, seed) => {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    let rng = seedrandom(seed);\n    return Math.floor(rng() * (max - min) + min)\n};\n\n/**\n * Days since Unix Epoch\n * Works properly so far (i.e. day count changes at 0000hrs of current locale)\n * @returns {number}\n */\nexport const getDaysSinceEpoch = () =>\n    differenceInCalendarDays(new Date(), new Date(0));\n\n/**\n * Returns formatDateToNow if within the same minute,\n * otherwise returns formatDistanceToNowStrict if within same calendar day,\n * otherwise returns date like 18 Apr if same calendar year,\n * otherwise like Apr 2021\n * @param date\n */\nexport const formatDistanceToNowPretty = date => {\n    if (differenceInMinutes(new Date(), date) < 1)\n        return formatDistanceToNow(date, {addSuffix: true});\n    if (differenceInCalendarDays(new Date(), date) < 1)\n        return formatDistanceToNowStrict(date, {addSuffix: true});\n    if (differenceInCalendarYears(new Date(), date) < 1)\n        return format(date, 'd MMM');\n    return format(date, 'MMM y')\n};\n\nexport const isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport const noop = () => {\n};\n\n/**\n * Cryptographically secure random number generator.\n * Assumes window.crypto exists.\n */\nexport const getSecureRandom = () => {\n    if (!window.crypto) throw new Error('window.crypto not supported on browser');\n\n    let arr = new Uint32Array(1);\n    const max = 2 ** 32;\n\n    /*Will generate random numbers between 0 and 1 (exclusive) with 32 bit maximum precision\n    * Rejection sampling.*/\n    const random = () => {\n        let val = crypto.getRandomValues(arr)[0] / max;\n        if (val >= 1) return random();\n        return val\n    };\n\n    /*Random integer between min (inclusive) and max (exclusive)*/\n    const randint = (min, max) => {\n        let floor_min = Math.floor(min);\n        let floor_max = Math.floor(max);\n        return Math.floor(random() * (floor_max - floor_min)) + floor_min\n    };\n\n    /*Select random element of an array*/\n    const choice = arr => arr[randint(0, arr.length)];\n\n    return {\n        random,\n        randint,\n        choice,\n    }\n};\n\nexport const prettifyUAString = uaString => {\n    let ua = UAParser(uaString);\n    let {\n        browser: {\n            name: browserName,\n        },\n        // if type is set, it is mobile\n        device: {model, type},\n        os: {name: osName, version: osVersion}\n    } = ua;\n\n    return {\n        name: `${browserName} on ${osName} ${osVersion}${model ? ` (${model})` : ''}`,\n        isMobile: Boolean(type),\n        browserName\n    }\n};\n\nexport const stripHtml = html => {\n   let doc = new DOMParser().parseFromString(html, 'text/html');\n   return doc.body.textContent || \"\";\n}\n\n/*Copied from RTKQ's fetchBaseQuery.\n* Will not affect non-objects such as classes.*/\nexport const stripUndefined = obj => {\n    if (!isPlainObject(obj)) {\n        return obj\n    }\n    const copy = {...obj}\n    for (const [k, v] of Object.entries(copy)) {\n        if (typeof v === 'undefined') delete copy[k]\n    }\n    return copy\n}","import {useState} from 'react'\nimport {useCallback} from \"react\";\n\n/*Workaround to throw errors in callbacks to ErrorBoundaries*/\nexport const useAsyncError = () => {\n    const setError = useState(null)[1];\n\n    return useCallback(e => setError(() => {\n        if (e instanceof Error){ //Subclasses of Error also return true\n            throw e\n        } else {\n            throw new Error(e)\n        }\n\n    }), [setError])\n};","import {Component} from \"react\";\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Snackbar,\n    styled as muiStyled\n} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\n\nconst StyledDialog = muiStyled(Dialog)(({theme}) => ({\n    /*As zIndex is set inline in Dialog, style must be overridden with !important*/\n    zIndex: `${theme.zIndex.snackbar + 1} !important`,\n}));\n\n/*Catch-all for any application errors*/\nexport class ErrorBoundary extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            errorInfo: null,\n            dialogOpen: false,\n        };\n    }\n\n    static getDerivedStateFromError(error) {\n        return {error: error};\n    }\n\n    setDialogOpen = state => this.setState({dialogOpen: state});\n\n    componentDidCatch(error, errorInfo) {\n        /*Errors are not logged currently*/\n    }\n\n    render() {\n        return this.state.error\n            ? <>\n                <StyledDialog\n                    open={this.state.dialogOpen}\n                    onClose={() => this.setDialogOpen(false)}\n                    scroll={'body'}\n                >\n\n                    <DialogTitle>{this.state.error.toString()}</DialogTitle>\n\n                    <DialogContent>\n                        <DialogContentText>{this.state.errorInfo?.componentStack}</DialogContentText>\n                    </DialogContent>\n\n                    <DialogActions>\n                        <Button\n                            variant={'text'}\n                            color={'primary'}\n                            onClick={() => this.setDialogOpen(false)}\n                        >Close\n                        </Button>\n                    </DialogActions>\n\n                </StyledDialog>\n                <Snackbar open>\n                    <Alert\n                        severity={'error'}\n                        action={<>\n                            <Button\n                                variant={'text'}\n                                color={'primary'}\n                                onClick={() => this.setDialogOpen(true)}\n                            >Details</Button>\n                            <Button\n                                variant={'text'}\n                                color={'primary'}\n                                onClick={() => window.location.reload()\n                                }\n                            >Reload</Button>\n                        </>\n                        }>\n                        Application Error\n                    </Alert>\n                </Snackbar>\n            </>\n            : this.props.children\n    }\n\n}","import {unstable_createMuiStrictModeTheme as createMuiTheme} from \"@material-ui/core/styles\"; //todo replace with v5 when out\n\nexport const theme = createMuiTheme({\n    palette: {\n        type: \"dark\",\n        primary: {\n            main: '#90caf9',\n        },\n        secondary: {\n            main: '#f48fb1',\n        },\n    }\n});\n\nexport const OverlayScrollbarOptions = {\n    className: 'os-theme-light',\n    overflowBehavior: {\n        x: 'hidden'\n    },\n    scrollbars: {\n        autoHide: 'move',\n    }\n};","import styled from \"styled-components\";\nimport {getDaysSinceEpoch, getRandomInt} from \"../util\";\nimport {useCallback, useEffect, useState} from \"react\";\n\n/*Largest index of background images, inclusive*/\nconst NUM_IMAGES = 90;\n\nconst RandomBackgroundImage = styled.div`\n  background: url(${({$picIndex}) => `/bg/${$picIndex}.jpg`}) top/cover;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: -1;\n`;\n\n/*Get the latest pic index on window focus (setTimeout is unreliable*/\nconst getPicIndex = () => getRandomInt(1, NUM_IMAGES + 1, getDaysSinceEpoch());\n\nexport const RandomBackground = () => {\n\n    const [picIndex, setPicIndex] = useState(getPicIndex());\n    const listener = useCallback(() => setPicIndex(getPicIndex()), [])\n\n\n    useEffect(() => {\n        window.addEventListener('focus', listener)\n        return () => window.removeEventListener('focus', listener)\n    }, [listener]);\n\n    return <RandomBackgroundImage $picIndex={picIndex}/>\n};","import styled from \"styled-components\";\n\nexport const BACKGROUND_COLOR = `background: rgba(0, 0, 0, 0.6)`;\n\n//For use with already dark backgrounds\nexport const BACKGROUND_COLOR_LIGHT = `background: rgba(0, 0, 0, 0.3)`;\nexport const BACKGROUND_BOX_SHADOW = `box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.6)`;\n\nexport const BackgroundScreen = styled.div`\n  ${BACKGROUND_COLOR};\n`;\n\nexport const BackgroundScreenRounded = styled(BackgroundScreen)`\n  border-radius: 5px;\n  ${BACKGROUND_BOX_SHADOW};\n`;","/*TODO Replace this file with typescript*/\n\nexport const NETWORK_ERROR = {\n    HTTP_ERROR: 1,\n    FETCH_ERROR: 2,\n}\n\nexport const NETWORK_METHOD = {\n    GET: 'GET',\n    POST: 'POST',\n    DELETE: 'DELETE',\n    PUT: 'PUT',\n}\n\n","import {stripHtml, stripUndefined} from \"../../shared/util\";\nimport {NETWORK_ERROR} from \"../constants\";\n\nconst defaultValidateStatus = response =>\n    (response.status >= 200 && response.status <= 299)\n\n\n/*Parse body as JSON only if content-type is JSON*/\nconst responseHandler = response =>\n    response.headers.get('content-type')?.trim()?.startsWith('application/json') ?\n        response.json() :\n        response.text()\n\n/*Joins 2 URLs. Will not modify trailing slashes if present*/\nconst joinUrl = (base, url) => {\n    if (!base) {\n        return url\n    }\n    if (!url) {\n        return base\n    }\n    return base.replace(/\\/$/, '') + '/' + url.replace(/^\\//)\n}\n\n/*Custom query which wraps fetch errors in NetworkError format.\n* Will consider 4xx/5xx statuses to be errors, regardless of login status.*/\nexport const baseQuery = ({\n                              baseUrl,\n                              defaultHeaders = {},\n                              prepareHeaders = (x) => x,\n                              fetchFn = fetch,\n                              ...baseFetchOptions\n                          }) =>\n    async (arg = {}, {signal, getState}) => {\n        let {\n            url = '',\n            method = 'GET',\n            headers = new Headers({}),\n            body = undefined,\n            params = undefined,\n            validateStatus = defaultValidateStatus,\n        } = typeof arg == 'string' ? {url: arg} : arg\n        let config = {\n            ...baseFetchOptions,\n            method,\n            signal,\n            body,\n        }\n\n        config.headers = await prepareHeaders(\n            new Headers(stripUndefined({...defaultHeaders, ...headers})),\n            {getState}\n        )\n\n        config.body = JSON.stringify(body)\n\n        if (params) {\n            const divider = ~url.indexOf('?') ? '&' : '?'\n            const query = new URLSearchParams(stripUndefined(params))\n            url += divider + query\n        }\n\n        url = joinUrl(baseUrl, url)\n\n\n        const request = new Request(url, config)\n        const requestClone = request.clone()\n\n        try {\n            const response = await fetchFn(request)\n            const responseClone = response.clone()\n\n            const meta = {request: requestClone, response: responseClone}\n\n            const resultData = await responseHandler(response)\n\n            return validateStatus(response, resultData)\n                ? {\n                    data: resultData, //This is not wrapped in 'data' in the reducer!\n                    meta,\n                }\n                : {\n                    error: {\n                        method: request.method,\n                        url: request.url,\n                        text: typeof resultData === 'object' ? JSON.stringify(resultData, undefined, 2) : stripHtml(resultData),\n                        status: response.status,\n                        type: NETWORK_ERROR.HTTP_ERROR,\n\n                        /*Mainly for use by auth*/\n                        data: resultData\n                    },\n                    meta,\n                }\n        } catch (e) {\n            return {\n                error: {\n                    method: request.method,\n                    url: request.url,\n                    text: `${e.name}: ${e.message}`,\n                    type: NETWORK_ERROR.FETCH_ERROR\n                }\n            }\n        }\n    }","/**\n * Base createApi.\n */\n\nimport {createApi} from \"@reduxjs/toolkit/dist/query/react\";\nimport {baseQuery} from \"./baseQuery\";\n\nconst API_URL = 'https://api.nicholaslyz.com'\n\nexport const baseApi = createApi({\n    reducerPath: 'api',\n    baseQuery: baseQuery({\n        baseUrl: API_URL,\n        credentials: \"include\",\n        defaultHeaders: {'content-type': 'application/json'}\n    }),\n    endpoints: () => ({}),\n})","import {baseApi} from \"../network-core/baseApi\";\n\nexport const authApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        checkLogin: build.query({\n            query: () => 'account/login/',\n        }),\n        login: build.mutation({\n            query: body => ({\n                url: 'account/login/',\n                method: 'POST',\n                body\n            })\n        }),\n        logout: build.mutation({\n            query: () => ({\n                url: 'account/logout/',\n                method: 'POST'\n            })\n        })\n    })\n})\n\nexport const {\n    useCheckLoginQuery,\n    useRecaptchaKeyQuery,\n    useLoginMutation,\n    useLogoutMutation,\n} = authApi","import { createSlice, isAllOf, isRejectedWithValue } from \"@reduxjs/toolkit\";\nimport { NETWORK_ERROR, NETWORK_METHOD } from \"./constants\";\nimport { authApi } from \"./auth/authApi\";\n\nexport const appSliceName = 'app'\n\nconst initialState = {\n    module: null,\n    loginStatus: {\n        user: null,\n        expiry: null,\n        isSuperUser: false,\n        recaptchaKey: null,\n        loggedIn: false,\n    },\n    networkError: null,\n    pendingNetworkActions: []\n}\n\nexport const send = () => {\n}\n\n/**\n * Convenience methods for obtaining get, add, update and delete methods from a URL\n * These must be dispatched with\n *\n * <pre>\n * get: function(...params) => url(...params)\n * add: function(object, ...params) => url(...params)\n * update: function (object, id, ...params) => detailUrl(id, ...params)\n * del: function (id, ...params) => detailUrl(id, ...params)\n * </pre>\n *\n * @param url str or function(...params) => url to obtain object list\n * @param detailUrl function(id, ...params) => url to obtain object details\n * @returns {[function(): Promise<unknown>, function(*=): Promise<unknown>, function(*=): Promise<unknown>, function(*=): Promise<unknown>]}\n */\nexport const crudMethods = (url, detailUrl) => {\n    let get = (...params) => send(\n        typeof url === 'function' ?\n            url(...params) :\n            url,\n        { method: NETWORK_METHOD.GET });\n\n    let add = (object, ...params) => send(\n        typeof url === 'function' ?\n            url(...params) :\n            url,\n        {\n            method: NETWORK_METHOD.POST,\n            body: JSON.stringify(object),\n        });\n\n    let update = (object, id, ...params) => send(\n        detailUrl(id, ...params),\n        {\n            method: NETWORK_METHOD.PUT,\n            body: JSON.stringify(object),\n        });\n\n    let del = (id, ...params) => send(\n        detailUrl(id, ...params),\n        { method: NETWORK_METHOD.DELETE }); //Note - for a DELETE operation, nothing is returned by the server\n\n    return [get, add, update, del]\n}\n\nconst handleLoginFulfilled = (state, {\n    payload: {\n        user,\n        expiry,\n        is_superuser: isSuperUser,\n        recaptcha_key: recaptchaKey\n    }\n\n}) => void (state.loginStatus = {\n    user,\n    expiry,\n    isSuperUser,\n    recaptchaKey,\n    loggedIn: true,\n})\n\nconst setNetworkErrorReducer = (state, action) => {\n\n    let {\n        method = 'Method not specified',\n        url = 'URL not specified',\n        text = '',\n        status = null, /*Must be specified if HTTP_ERROR*/\n        type\n    } = action.payload\n\n    /*Type not specified:  rejected thunk with value which is NOT a NetworkError object*/\n    if (!type) {\n        state.networkError = {\n            method,\n            url,\n            text: JSON.stringify(action, undefined, 2),\n            status,\n            type\n        }\n        return\n    }\n\n    if (type === NETWORK_ERROR.HTTP_ERROR && typeof status !== 'number')\n        throw new Error(`NetworkError: 'status' must be a number if \n            'type' === HTTP_ERROR, but got ${status} instead`)\n\n    /*Ignore 401/403 errors if not logged in*/\n    if (!state.loginStatus.loggedIn &&\n        [401, 403].includes(status)) {\n        return\n    }\n    state.networkError = { method, url, text, status, type }\n}\n\nexport const appSlice = createSlice({\n    name: appSliceName,\n    initialState,\n    reducers: {\n        setNetworkError: setNetworkErrorReducer,\n        clearNetworkError: state => void (state.networkError = null),\n        setCurrentModule: (state, { payload}) => void (state.module = payload),\n        setAppBar: (state, { payload: { drawerOpen = false } }) => void (state.appBar.drawerOpen = drawerOpen),\n        addNetworkAction: (state, { payload }) => {\n            if (!state.pendingNetworkActions.includes(payload))\n                state.pendingNetworkActions.push(payload)\n        },\n        removeNetworkAction: (state, { payload }) => {\n            if (state.pendingNetworkActions.includes(payload))\n                state.pendingNetworkActions.splice(state.pendingNetworkActions.indexOf(payload), 1)\n        },\n    },\n    extraReducers: builder => builder\n        .addMatcher(authApi.endpoints.checkLogin.matchFulfilled, handleLoginFulfilled)\n        .addMatcher(isAllOf(authApi.endpoints.checkLogin.matchRejected, isRejectedWithValue),\n            (state, action) => {\n                let payload = action.payload\n                if (payload.type === NETWORK_ERROR.HTTP_ERROR && [401, 403].includes(payload.status))\n                    state.loginStatus.recaptchaKey = payload.data.recaptcha_key\n            })\n        .addMatcher(authApi.endpoints.login.matchFulfilled, handleLoginFulfilled)\n        .addMatcher(authApi.endpoints.logout.matchFulfilled, () => {\n            /*Not pure, but an exception here as I want to clear everything*/\n            localStorage.clear()\n            /*Page is refreshed on logout, to clear both Redux store and cached memory.*/\n            window.location.reload()\n        })\n\n})\n\nexport const {\n    setNetworkError,\n    clearNetworkError,\n    setCurrentModule,\n    setAppBar,\n    addNetworkAction,\n    removeNetworkAction\n} = appSlice.actions\n\nexport const selectLoginStatus = state => state[appSliceName].loginStatus\nexport const selectNetworkError = state => state[appSliceName].networkError\nexport const selectCurrentModule = state => state[appSliceName].module\nexport const selectPendingNetworkActions = state => state[appSliceName].pendingNetworkActions","import {styled as muiStyled} from \"@material-ui/core/styles\";\nimport {Backdrop, CircularProgress, Typography} from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport {BackgroundScreen} from \"./backgroundScreen\";\n\nconst StyledBackdrop = muiStyled(Backdrop)(({theme}) => ({\n    // To cover the app drawer\n    zIndex: theme.zIndex.drawer + 1,\n}));\n\nconst FlexContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 100px;\n`;\n\nconst FlexBackgroundScreen = styled(BackgroundScreen)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n`;\n\n/**\n * A fullscreen loading backdrop element\n * @param open\n * @param message\n * @param showSpinner\n * @param fullscreen\n * @returns {JSX.Element}\n * @constructor\n */\nexport const Loading = ({\n                            open = true,\n                            message = 'Loading...',\n                            showSpinner = true,\n                            fullscreen = true\n                        }) => {\n\n    let content = <FlexContainer>\n        {showSpinner ? <CircularProgress color=\"inherit\" size={30}/> : null}\n        <Typography variant={'body1'} display={\"block\"}>{message}</Typography>\n    </FlexContainer>;\n\n    if (!open) return null;\n\n    return fullscreen ?\n        <StyledBackdrop open={open}>\n            {content}\n        </StyledBackdrop>\n        : <FlexBackgroundScreen>\n            {content}\n        </FlexBackgroundScreen>;\n\n};","import React, {useState} from 'react';\nimport styled from \"styled-components\";\nimport {Button, Checkbox, CircularProgress, FormControlLabel, TextField, Typography} from \"@material-ui/core\";\nimport {BackgroundScreenRounded} from \"../../shared/components/backgroundScreen\";\nimport {useInput} from \"../../shared/useInput\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {selectLoginStatus, setNetworkError} from \"../appSlice\";\nimport {NETWORK_ERROR} from \"../constants\";\nimport {useCheckLoginQuery, useLoginMutation} from \"./authApi\";\nimport {Loading} from \"../../shared/components/loading\";\n\nconst StyledForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 0 auto;\n  max-width: 300px;\n  height: 100vh;\n`;\n\nconst InnerContainer = styled(BackgroundScreenRounded)`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 10px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  margin: 5px 0;\n`;\n\nconst Spacer = styled.div`\n  width: 30px\n`;\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  margin-left: 10px;\n`;\n\n/*Will update loggedIn state*/\nexport const Login = () => {\n\n    const dispatch = useDispatch()\n    const {recaptchaKey} = useSelector(selectLoginStatus)\n\n    const [login, {isLoading}] = useLoginMutation()\n    const {isFetching, isError, error} = useCheckLoginQuery(undefined, {refetchOnMountOrArgChange: true})\n\n    const {values, bind, setValue} = useInput();\n    const recaptchaRef = React.useRef();\n    const [loginMessage, setLoginMessage] = useState('Sign In');\n    const [otpRequired, setOtpRequired] = useState(false);\n\n\n    const onSubmit = event => {\n        event.preventDefault();\n        recaptchaRef.current\n            .executeAsync()\n            .then(token => login({\n                username: values.username,\n                password: values.password,\n                token: token,\n                otp: values.otp,\n                save_browser: values.saveBrowser\n            }))\n            .then(res => {\n                if (res.error &&\n                    res.error.type === NETWORK_ERROR.HTTP_ERROR &&\n                    [401, 403].includes(res.error.status)) {\n                    let data = res.error.data\n\n                    if (data.otp_required)\n                        setOtpRequired(true)\n\n                    setLoginMessage(data.message)\n\n                    /*Reset captcha for retries*/\n                    recaptchaRef.current?.reset();\n                }\n            })\n            .catch(e => {\n                /*Since thunks do not throw if not unwrapped,\n                * only gRecaptcha errors are caught here.\n                * networkErrorMiddleware handles the rest.\n                * This is at the end of the chain so that all\n                * prior 'then's do not execute if recaptcha validation fails.*/\n                dispatch(setNetworkError({\n                    text: `gRecaptcha request failed: ${e?.message}`,\n                    type: NETWORK_ERROR.FETCH_ERROR,\n                }))\n            })\n\n    };\n\n    /*Show loading screen also for non-401/403 errors*/\n    if (isFetching || (isError && ![401, 403].includes(error.status)))\n        return <Loading\n            open={true}\n            message={isError ? 'HTTP Error' : 'Checking authentication...'}\n            fullscreen={true}/>;\n\n    return <StyledForm onSubmit={onSubmit}>\n        <InnerContainer>\n            <Typography variant={'h6'} gutterBottom align={\"center\"}>\n                {loginMessage}\n            </Typography>\n            {!otpRequired && <>\n                <StyledTextField\n                    type='text'\n                    label={'Username'}\n                    fullWidth\n                    required\n                    autoFocus\n                    variant={'outlined'}\n                    autoComplete={'username'}\n                    {...bind('username')}\n                />\n\n                <StyledTextField\n                    type={'password'}\n                    label={'Password'}\n                    autoComplete={'current-password'}\n                    fullWidth\n                    required\n                    variant={'outlined'}\n                    {...bind('password')}\n                />\n            </>}\n\n            {otpRequired && <>\n                <StyledTextField\n                    type={'password'}\n                    label={'OTP'}\n                    autoComplete={'one-time-code'}\n                    fullWidth\n                    variant={'outlined'}\n                    inputMode={\"numeric\"}\n                    pattern={\"[0-9]*\"}\n                    {...bind('otp')}\n                />\n                <FormControlLabel\n                    control={<Checkbox\n                        checked={values.saveBrowser}\n                        onChange={e => setValue({\n                            name: 'saveBrowser',\n                            value: e.target.checked\n                        })}\n                    />}\n                    label={'Remember browser'}\n                />\n            </>}\n\n            <Button\n                variant={'contained'}\n                type={'submit'}\n                color={'primary'}\n                fullWidth\n            >\n                <Spacer/>Login{isLoading ? <StyledCircularProgress color={\"inherit\"} size={20}/> : <Spacer/>}\n            </Button>\n            <ReCAPTCHA\n                ref={recaptchaRef}\n                size={'invisible'}\n                sitekey={recaptchaKey}\n                theme={'dark'}\n            />\n\n        </InnerContainer>\n    </StyledForm>;\n};\n","import {useReducer} from \"react\";\n\n/**\n * Uses useReducer (setValue is dispatch({name, value})\n * value can be a function, which will receive the latest state[key] as an argument.\n * If initial state for a key is not set, returns '' by default.\n * @param initialValues initial value of inputs as an object of name: value pairs\n * @returns {{bind: (function(*=): {onChange: function(*): *, name: *, value}), onChange: (function(*): *), setValues: *, values: React.ReducerStateWithoutAction<function(*=, *): (*)>}}\n */\nexport const useInput = (initialValues = {}) => {\n    const reducer = (state, action) => {\n        if (typeof action.value === 'function') {\n            return {\n                ...state,\n                [action.name]: action.value(state[action.name])\n            }\n        } else\n            return {\n                ...state,\n                [action.name]: action.value\n            };\n    };\n\n    const [values, setValue] = useReducer(reducer, initialValues);\n\n    const onChange = e => setValue({\n        name: e.target.name,\n        value: e.target.value\n    });\n\n    const bind = name => ({\n        onChange,\n        name: name,\n        value: values[name] || ''\n    });\n\n    return {values, setValue, onChange, bind}\n\n};","import {useCheckLoginQuery} from \"../auth/authApi\";\n\nconst SESSION_REFRESH_INTERVAL_MS = 60 * 60 * 1000;\n\nexport const RefreshSession = () => {\n    useCheckLoginQuery(undefined, {\n        pollingInterval: SESSION_REFRESH_INTERVAL_MS,\n        refetchOnReconnect: true,\n    })\n    return null\n}","import {baseApi} from \"../../app/network-core/baseApi\";\n\nexport const hmailApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        checkIhisMail: build.query({\n            query: () => 'hmail/check-ihis-mail/'\n        }),\n        checkMohhMail: build.query({\n            query: () => 'hmail/check-mohh-mail/'\n        })\n    })\n})\n\nexport const {\n    useCheckIhisMailQuery,\n    useCheckMohhMailQuery,\n} = hmailApi","import {createSelector, createSlice, nanoid} from \"@reduxjs/toolkit\";\nimport {isPlainObject} from 'lodash'\n\nexport const notificationsSliceName = 'notifications'\n\nconst shape = [\n    'title',\n    'content',\n    'source',\n\n    /*Autogenerated if not already present*/\n    'id',\n    'timestamp',\n]\n\nconst prepareBatchNotification = (arg) => {\n    if (isPlainObject(arg)) {\n        return {\n            payload: [{\n                id: nanoid(),\n                timestamp: Date.now(),\n                ...arg\n            }]\n        }\n    }\n    if (!Array.isArray(arg))\n        throw new Error(`'${arg}' should be an array or object, but got ${typeof arg}`)\n\n    return {\n        payload: arg.map(e => ({\n            id: nanoid(),\n            timestamp: Date.now(),\n            ...e\n        }))\n    }\n}\n\nconst validateShape = (arg) => {\n    if (!arg.every(item => shape.every(e => Object.keys(item).includes(e))))\n        throw new Error(`Invalid notification shape: expected ${shape}, but got ${Object.keys(arg)}`)\n}\n\nexport const notificationSlice = createSlice({\n    name: notificationsSliceName,\n    initialState: [],\n    reducers: {\n        addNotifications: {\n            reducer: (state, {payload}) => {\n                validateShape(payload)\n                state.push(...payload)\n            },\n            prepare: prepareBatchNotification\n        },\n        removeNotification: (state, {payload: {id}}) => state.filter(e => e.id !== id),\n        removeNotificationsFromSource: (state, {payload}) => state.filter(e => e.source !== payload),\n    },\n\n})\n\nexport const {\n    addNotifications,\n    removeNotification,\n    removeNotificationsFromSource\n} = notificationSlice.actions\n\nexport const selectNotificationsSorted = createSelector(\n    state => state[notificationsSliceName],\n    items => items.slice().sort((a, b) => b.timestamp - a.timestamp)\n)","import {addNotifications, removeNotificationsFromSource} from \"../../app/notifications/notificationSlice\";\nimport {format, isToday, parseJSON} from \"date-fns\";\n\nexport const handleMailAction = (data, source) => dispatch => {\n    dispatch(removeNotificationsFromSource(source))\n    dispatch(addNotifications(data.map(e => {\n        let date = parseJSON(e.date)\n        return ({\n            title: e.title,\n            content: `${format(date, isToday(date) ? 'p' : 'd/M')} ` + [e.from.join(', '), e.preview].join(' - '),\n            source,\n            timestamp: date.getTime()\n        })\n    })))\n}","import { useCheckIhisMailQuery, useCheckMohhMailQuery } from \"./hmailApi\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { handleMailAction } from \"./hmailActions\";\n\nconst CHECK_MAIL_FREQUENCY_MS = 30 * 1000;\nconst [IHIS, MOHH] = ['IHIS', 'MOHH']\n\nexport const Hmail = () => {\n\n    const dispatch = useDispatch()\n\n    /*This hook appears to be keep the same reference when the new data is identical to\n    the old data, and therefore cached data is returned, so useEffect calls do not run*/\n    const { data: ihisMail } = useCheckIhisMailQuery(undefined, { pollingInterval: CHECK_MAIL_FREQUENCY_MS })\n    const { data: mohhMail } = useCheckMohhMailQuery(undefined, { pollingInterval: CHECK_MAIL_FREQUENCY_MS })\n\n    useEffect(() => ihisMail &&\n        dispatch(handleMailAction(ihisMail, IHIS)),\n        [dispatch, ihisMail])\n\n    useEffect(() => mohhMail &&\n        dispatch(handleMailAction(mohhMail, MOHH)),\n        [dispatch, mohhMail])\n\n    return null\n}; ","\nimport { baseApi } from './../../app/network-core/baseApi';\n\nbaseApi.enhanceEndpoints({\n    addTagTypes: ['otpStatus', 'browsers']\n})\n\nconst accountApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        getBrowsers: build.query({\n            query: () => 'account/browsers/',\n            providesTags: ['browsers']\n        }),\n        forgetAndLogoutBrowser: build.mutation({\n            query: id => ({\n                url: `account/browsers/${id}/`,\n                method: 'DELETE'\n            }),\n            invalidatesTags: ['browsers']\n        }),\n\n        getOtpStatus: build.query({\n            query: () => 'account/twofactor/',\n            providesTags: ['otpStatus']\n        }),\n\n        modify2Fa: build.mutation({\n            query: data => ({\n                url: 'account/twofactor/',\n                method: 'POST',\n                body: data\n            }),\n            invalidatesTags: ['otpStatus']\n        })\n    })\n})\n\nexport const {\n    useGetBrowsersQuery,\n    useForgetAndLogoutBrowserMutation,\n    useGetOtpStatusQuery,\n    useModify2FaMutation,\n} = accountApi","import { Button, Card, CardActionArea, CardActions, CardContent, Chip, Typography } from \"@material-ui/core\";\nimport DesktopWindowsIcon from \"@material-ui/icons/DesktopWindows\";\nimport PhoneIphoneIcon from \"@material-ui/icons/PhoneIphone\";\nimport PublicIcon from '@material-ui/icons/Public';\nimport { getName } from \"country-list\";\nimport { format, parseJSON } from \"date-fns\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../app/theme\";\nimport ChromeLogo from '../../shared/static/browserLogos/chrome.png';\nimport EdgeLogo from '../../shared/static/browserLogos/edge.png';\nimport FirefoxLogo from '../../shared/static/browserLogos/firefox.png';\nimport SafariLogo from '../../shared/static/browserLogos/safari.png';\nimport { formatDistanceToNowPretty, prettifyUAString } from \"../../shared/util\";\n\nconst StyledCard = styled(Card)`\n  outline: ${props => props.$thisDevice ? '2px solid ' + theme.palette.primary.main : 'none'};\n`;\n\nconst StyledTypography = styled(Typography)`\n  margin: 10px 0;\n`;\n\nconst ImageDiv = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst SavedBrowserDiv = styled.div`\n  width: 100%;\n  height: 32px;\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst BrowserLogoDiv = styled.div`\n  background: no-repeat url(${props => props.$image}) center/contain;\n  margin: 0 6px;\n  width: 32px;\n  height: 32px\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n\nconst BrowserLogo = {\n    Chrome: ChromeLogo,\n    Firefox: FirefoxLogo,\n    Edge: EdgeLogo,\n    Safari: SafariLogo,\n};\n\nexport const BrowserCard = ({\n                                browser: {\n                                    id,\n                                    is_active,\n                                    is_current_session,\n                                    is_saved,\n                                    first_login,\n                                    last_activity,\n                                    ip,\n                                    country_code,\n                                    user_agent,\n                                },\n                                forgetAndLogoutBrowser,\n                            }) => {\n\n    const prettifiedUserAgent = prettifyUAString(user_agent);\n    const browserName = prettifiedUserAgent.browserName;\n    const [detailView, setDetailView] = useState(false);\n\n    return <>\n        <StyledCard $thisDevice={is_current_session} key={id}>\n            <CardContainer>\n                <CardActionArea onClick={() => setDetailView(!detailView)}>\n                    <CardContent>\n                        {detailView ?\n                            <>\n                                <Typography variant={'body1'}>First Login</Typography>\n                                <Typography variant={'body2'}\n                                            color={'textSecondary'}>{format(parseJSON(first_login), 'PPpp')}</Typography>\n                                <Typography variant={'body1'}>Last Activity</Typography>\n                                <Typography variant={'body2'}\n                                            color={'textSecondary'}>{format(parseJSON(last_activity), 'PPpp')}</Typography>\n                                <Typography variant={'body1'}>User-Agent</Typography>\n                                <Typography variant={'body2'} color={'textSecondary'}>{user_agent}</Typography>\n\n                            </> :\n                            <>\n                                <ImageDiv>\n                                    {prettifiedUserAgent.isMobile ? <PhoneIphoneIcon/> : <DesktopWindowsIcon/>}\n                                    {browserName in BrowserLogo ? <BrowserLogoDiv $image={BrowserLogo[browserName]}/> :\n                                        <PublicIcon/>}\n                                    <SavedBrowserDiv>\n                                        {is_saved && <Chip label={'Saved'} color={'primary'}/>}\n                                    </SavedBrowserDiv>\n                                </ImageDiv>\n\n                                <StyledTypography variant={'body1'}>{prettifiedUserAgent.name}</StyledTypography>\n                                <Typography variant={'body2'}>{getName(country_code)}</Typography>\n                                <Typography variant={'body2'} style={{overflowWrap: 'break-word'}}>{ip}</Typography>\n                                <StyledTypography variant={'body2'}\n                                                  color={'textSecondary'}>{formatDistanceToNowPretty(parseJSON(last_activity))}</StyledTypography>\n                            </>\n                        }\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    {(is_active || is_saved) ?\n                        <Button color={'primary'}\n                                onClick={() => forgetAndLogoutBrowser(id)}>\n                            {is_active ? 'Logout' : 'Forget'}\n                        </Button> :\n                        null}\n                </CardActions>\n            </CardContainer>\n        </StyledCard>\n    </>\n};","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { Typography } from \"@material-ui/core\";\nimport { compareDesc, parseJSON } from \"date-fns\";\nimport styled from 'styled-components';\nimport { useForgetAndLogoutBrowserMutation, useGetBrowsersQuery } from \"./accountApi\";\nimport { BrowserCard } from \"./BrowserCard\";\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  grid-auto-rows: 1fr;\n  gap: 20px 20px;\n  margin: 20px;\n`;\nconst GridContainer = styled.div`\n  max-width: 1000px;\n`;\n\nexport const Browsers = () => {\n\n    const [forgetAndLogoutBrowser] = useForgetAndLogoutBrowserMutation()\n    const { data: browsers } = useGetBrowsersQuery()\n\n    return <GridContainer>\n        <Typography variant={'h5'} style={{ marginLeft: '10px' }}>Active Browsers</Typography>\n        <Grid>\n            {browsers && browsers\n                .filter(e => e.is_active)\n                .sort((a, b) => compareDesc(parseJSON(a.last_activity), parseJSON(b.last_activity)))\n                .map(browser => <BrowserCard\n                    key={browser.id}\n                    browser={browser}\n                    forgetAndLogoutBrowser={forgetAndLogoutBrowser}\n                />)}\n        </Grid>\n\n        <Typography variant={'h5'} style={{ marginLeft: '10px' }}>Inactive Browsers</Typography>\n\n        <Grid>\n            {browsers && browsers\n                .filter(e => !e.is_active)\n                .sort((a, b) => compareDesc(parseJSON(a.last_activity), parseJSON(b.last_activity)))\n                .map(browser => <BrowserCard\n                    key={browser.id}\n                    browser={browser}\n                    forgetAndLogoutBrowser={forgetAndLogoutBrowser}\n                />)}\n        </Grid>\n    </GridContainer>\n};","import { Button, TextField, Typography } from \"@material-ui/core\";\nimport { parseJSON } from \"date-fns\";\nimport QRCode from \"qrcode.react\";\nimport { useState } from \"react\";\nimport { formatDistanceToNowPretty } from \"../../shared/util\";\nimport { useModify2FaMutation, useGetOtpStatusQuery } from \"./accountApi\";\n\nexport const TwoFactor = () => {\n\n    const [otp, setOtp] = useState('');\n    const [secret, setSecret] = useState();\n\n    const { data: otpStatus } = useGetOtpStatusQuery()\n    const [modify2Fa] = useModify2FaMutation()\n\n    const register = () =>\n        modify2Fa({ action: 'register' })\n            .unwrap()\n            .then(r => setSecret(r['otpauth_url']));\n\n    const enable = () => modify2Fa({ action: 'enable', otp })\n\n    const disable = () => modify2Fa({ action: 'disable', otp })\n\n    if (!otpStatus) return null\n\n    return <>\n        {secret && <a href={secret}><QRCode value={secret} /></a>}\n        <Typography variant={'body1'}>OTP is {otpStatus['2fa_enabled'] ? 'enabled' : 'disabled'}.</Typography>\n        <Typography\n            variant={'body1'}>Created: {otpStatus['created'] && formatDistanceToNowPretty(parseJSON(otpStatus['created']))}</Typography>\n        <Button color={'primary'} variant={'contained'} onClick={register}>Register</Button>\n        <Button color={'primary'} variant={'contained'} onClick={enable}>Enable</Button>\n        <Button color={'secondary'} variant={'contained'} onClick={disable}>Disable</Button>\n        <TextField\n            value={otp}\n            onChange={e => setOtp(e.target.value)}\n        />\n    </>\n};","import { List, ListItem, ListItemIcon, ListItemText, Typography } from \"@material-ui/core\";\nimport PublicIcon from '@material-ui/icons/Public';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport { useEffect, useState } from \"react\";\nimport { BackgroundScreen } from \"../../shared/components/backgroundScreen\";\nimport { Browsers } from \"./Browsers\";\nimport { TwoFactor } from \"./TwoFactor\";\n\nconst SUBMODULES = {\n    BROWSERS: {\n        name: 'Browsers',\n        appDrawer: <>\n            <ListItemIcon>\n                <PublicIcon />\n            </ListItemIcon>\n            <ListItemText primary={'Browsers'} />\n        </>,\n        jsx: <Browsers />\n    },\n    TWOFACTOR: {\n        name: '2FA Settings',\n        appDrawer: <>\n            <ListItemIcon>\n                <VpnKeyIcon />\n            </ListItemIcon>\n            <ListItemText primary={'2FA Settings'} />\n        </>,\n        jsx: <TwoFactor />\n    }\n};\n\nexport const Account = ({ setTitleContent, setDrawerContent }) => {\n    const [submodule, setSubmodule] = useState(Object.keys(SUBMODULES)[0]);\n\n    useEffect(() => {\n        setDrawerContent(<List disablePadding>\n            {Object.entries(SUBMODULES).map(([k, v]) =>\n                <ListItem key={k}\n                    button\n                    onClick={() => setSubmodule(k)}\n                >{v.appDrawer}</ListItem>)}\n        </List>)\n    }, [setDrawerContent])\n\n    useEffect(() => {\n        setTitleContent(<Typography variant={'h6'}>{SUBMODULES[submodule].name}</Typography>)\n    }, [setTitleContent, submodule])\n\n    return <BackgroundScreen>\n        {SUBMODULES[submodule].jsx}\n    </BackgroundScreen>\n};","\nimport { FILES_URL } from '../../app/urls';\nimport { baseApi } from './../../app/network-core/baseApi';\n\nconst dvrApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        getOrRefreshChannel: build.query({\n            query: channel => ({\n                url: 'dvr/',\n                params: { channel }\n            })\n        }),\n    })\n})\n\nexport const {\n    useGetOrRefreshChannelQuery\n} = dvrApi\n\nexport const getChannelUrl = (uuid, channel) =>\n`${FILES_URL}/dvr_stream/${uuid}/${channel}.mpd`;","import { List, ListItem, ListItemText, Typography } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport 'shaka-player/dist/controls.css';\nimport shaka from 'shaka-player/dist/shaka-player.ui';\nimport styled from 'styled-components';\nimport { getChannelUrl, useGetOrRefreshChannelQuery } from \"./dvrApi\";\n\nconst CHANNELS = [\n    'CAM_1',\n    'CAM_2',\n    'CAM_5',\n];\n\nconst REFRESH_INTERVAL = 10_000;\n\nconst VideoDiv = styled.div`\n  width: min(100%, 1280px)\n`;\n\nconst StyledVideo = styled.video`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const Dvr = ({ setDrawerContent, setTitleContent, setSidebarName }) => {\n\n    const [channel, setChannel] = useState(CHANNELS[0]);\n    const player = useRef();\n\n    const { data } = useGetOrRefreshChannelQuery(channel, { pollingInterval: REFRESH_INTERVAL })\n\n    useEffect(() => {\n        if (data) {\n            player.current?.load(getChannelUrl(data.stream_uuid, channel))\n        }\n    }, [channel, data]);\n\n    // Initialize polyfills (required)\n    useEffect(() => {\n        shaka.polyfill.installAll();\n        return () => {\n            if (player.current) {\n                player.current.unload();\n                player.current.destroy()\n            }\n        }\n    }, []);\n\n    useEffect(() => {\n        setDrawerContent(<List>\n            {CHANNELS.map(channel =>\n                <ListItem\n                    key={channel}\n                    button\n                    onClick={() => switchChannel(channel)}>\n                    <ListItemText primary={channel} />\n                </ListItem>)}\n        </List>)\n    }, [setDrawerContent])\n\n    useEffect(() => {\n        setTitleContent(<Typography variant={'h6'}>{channel}</Typography>)\n    }, [setTitleContent, channel])\n\n    // Init and attach to video element\n    const attachPlayer = videoEl => {\n        /*Do not reinitialize video element if a null element is passed, or player already exists*/\n        if (!videoEl || player.current) return;\n        if (!shaka.Player.isBrowserSupported()) {\n            console.error('Shaka player not supported');\n            return\n        }\n\n        player.current = new shaka.Player(videoEl);\n        player.current.addEventListener('error', e => console.error('Shaka player error: ', e.detail));\n\n        /* Set up video controls\n        videoEl.parentNode is guaranteed to have been mounted, if videoEl itself was mounted*/\n        let ui = new shaka.ui.Overlay(player.current, videoEl.parentNode, videoEl);\n        let controls = ui.getControls();\n        controls.addEventListener('UIError', e => console.error('Shaka UI error: ', e.detail))\n    };\n\n    const switchChannel = channel =>\n        void player.current?.unload()\n            .then(setChannel(channel));\n\n\n    return <VideoDiv data-shaka-player-container>\n        <StyledVideo\n            data-shaka-player\n            ref={attachPlayer}\n            id=\"video\"\n            autoPlay />\n    </VideoDiv>\n};","import {baseApi} from \"../../app/network-core/baseApi\";\nimport {baseQuery} from \"../../app/network-core/baseQuery\";\n\n\nexport const testingApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        throwHttpError: build.mutation({\n            query: status => ({\n                url: 'test/',\n                params: {status}\n            })\n        }),\n        throwFetchError: build.mutation({\n            queryFn: (arg, api, extraOptions) =>\n                baseQuery({\n                    baseUrl: 'https://dummy.nicholaslyz.com',\n                    credentials: \"include\"\n                })(arg, api, extraOptions)\n        })\n    })\n})\n\nexport const {\n    useThrowHttpErrorMutation,\n    useThrowFetchErrorMutation\n} = testingApi","import {createAsyncThunk} from \"@reduxjs/toolkit\";\n\nexport const throwAsyncThunkReject = createAsyncThunk('testing/asyncThunkReject', async () => {\n    throw new Error('Testing: AsyncThunkReject')\n})\n\nexport const throwAsyncThunkRejectWithValue = createAsyncThunk('testing/asyncThunkRejectWithValue', async(arg, {rejectWithValue}) => {\nreturn rejectWithValue('Testing: AsyncThunkRejectWithValue')\n})","import {Button} from \"@material-ui/core\";\nimport {useThrowFetchErrorMutation, useThrowHttpErrorMutation} from \"./testingApi\";\nimport {useDispatch} from \"react-redux\";\nimport {throwAsyncThunkReject, throwAsyncThunkRejectWithValue} from \"./util\";\nimport styled from 'styled-components'\nimport {clearNetworkError} from \"../../app/appSlice\";\n\nconst StyledDiv = styled.div`\n  display: grid;\n  grid-gap: 20px;\n  max-width: 300px;\n  margin: 10px;\n`\n\nexport const Testing = () => {\n\n    const dispatch = useDispatch()\n    const [throwHttpError] = useThrowHttpErrorMutation()\n    const [throwFetchError] = useThrowFetchErrorMutation()\n\n    return <StyledDiv>\n        <Button variant={'contained'} onClick={() => throwHttpError(401)}>Throw 401 error</Button>\n        <Button variant={'contained'} onClick={() => throwHttpError(500)}>Throw 500 error</Button>\n        <Button variant={'contained'} onClick={() => throwFetchError()}>Throw fetch error</Button>\n        <Button variant={'contained'} onClick={() => dispatch(throwAsyncThunkReject())}>\n            Throw asyncThunkReject\n        </Button>\n        <Button variant={'contained'} onClick={() => dispatch(throwAsyncThunkRejectWithValue())}>\n            Throw asyncThunkRejectWithValue\n        </Button>\n        <Button variant={'contained'} onClick={() => dispatch(clearNetworkError())}>Clear</Button>\n    </StyledDiv>\n}","import {getSecureRandom} from \"../../shared/util\";\nimport {formatDistance} from \"date-fns\";\n\nconst DIGITS_REGEX = /\\d/;\nconst LOWER_REGEX = /[a-z]/;\nconst UPPER_REGEX = /[A-Z]/;\nconst SYMBOLS_REGEX = /[!@#$%^&*]/;\n\n\nconst DIGITS = '0123456789';\nconst LOWER = 'abcdefghijklmnopqrstuvwxyz';\nconst UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\nconst SYMBOLS = '!@#$%^&*';\n\nconst secureRandom = getSecureRandom();\nconst formatNumber = new Intl.NumberFormat(undefined, {\n    maximumFractionDigits: 0,\n    maximumSignificantDigits: 3,\n});\n\n/*Gets the entropy in bits for a password, assuming it is completely random*/\nexport const getEntropy = password => {\n\n    let hasDigits = DIGITS_REGEX.test(password);\n    let hasLowerCase = LOWER_REGEX.test(password);\n    let hasUpperCase = UPPER_REGEX.test(password);\n    let hasSymbols = SYMBOLS_REGEX.test(password);\n\n    let totalSymbols =\n        (hasDigits ? 10 : 0) +\n        (hasLowerCase ? 26 : 0) +\n        (hasUpperCase ? 26 : 0) +\n        (hasSymbols ? SYMBOLS.length : 0);\n\n    let bitsPerChar = Math.log2(totalSymbols);\n    let totalEntropy = bitsPerChar * password.length;\n\n    return {\n        length: password.length,\n        hasDigits,\n        hasLowerCase,\n        hasUpperCase,\n        hasSymbols,\n        bitsPerChar,\n        totalEntropy,\n    }\n\n};\n\nexport const generatePassword = ({length = 10, digits = true, lower = true, upper = true, symbols = true} = {}) => {\n\n    if (length < 4) throw new Error('Password length is too short');\n\n    let charSet =\n        (digits ? DIGITS : '') +\n        (lower ? LOWER : '') +\n        (upper ? UPPER : '') +\n        (symbols ? SYMBOLS : '');\n\n    const generate = () => {\n        let password = '';\n        while (password.length < length)\n            password += secureRandom.choice(charSet);\n        return password\n    };\n\n    let password = generate();\n\n    /*Ensure generated password meets criteria*/\n    while ((digits && !DIGITS_REGEX.test(password)) ||\n    (lower && !LOWER_REGEX.test(password)) ||\n    (upper && !UPPER_REGEX.test(password)) ||\n    (symbols && !SYMBOLS_REGEX.test(password))) {\n        password = generate()\n    }\n    return password\n};\n\nwindow.test = generatePassword;\n\nexport const getSha1Hash = async message => {\n    const msgUint8 = new TextEncoder().encode(message);                            // encode as (utf-8) Uint8Array\n    const hashBuffer = await crypto.subtle.digest('SHA-1', msgUint8);    // hash the message\n    const hashArray = Array.from(new Uint8Array(hashBuffer));                      // convert buffer to byte array\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('').toUpperCase();       // convert bytes to hex string\n};\n\nexport const generateUsername = ({length = 8} = {}) => {\n\n    const vowels = ['a', 'e', 'i', 'o', 'u'];\n    const cons = ['b', 'c', 'd', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'r', 's', 't', 'u', 'v', 'w', 'tr', 'cr', 'br', 'fr', 'th', 'dr', 'ch', 'ph', 'wr', 'st', 'sp', 'sw', 'pr', 'sl', 'cl'];\n\n    const num_vowels = vowels.length;\n    const num_cons = cons.length;\n    let password = '';\n\n    for (let i = 0; i < length; i++) {\n        password += cons[Math.floor(secureRandom.random() * num_cons)] + vowels[Math.floor(secureRandom.random() * num_vowels)];\n    }\n\n    return password.substr(0, length);\n};\n\nexport const formatLargeDuration = seconds => {\n    if (seconds < 3.154e+7) {\n        return formatDistance(new Date(0), new Date(seconds * 1000))\n    }\n    if (seconds > 4.4e+17) {\n        return 'longer than the age of the Universe'\n    }\n    return formatNumber.format(seconds / 3.154e+7) + ' years';\n};","import {baseApi} from \"../../app/network-core/baseApi\";\n\n\n\nconst passwordToolsApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        hibpLookup: build.mutation({\n            query: hash => ({\n                url: 'passwords/lookup/',\n                params: {hash}\n            })\n        })\n    })\n})\n\nexport const {useHibpLookupMutation} = passwordToolsApi","import {useCallback, useEffect, useState} from \"react\";\nimport {\n    Button,\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl,\n    FormControlLabel,\n    FormGroup,\n    IconButton,\n    Slider,\n    Snackbar,\n    TextField,\n    Tooltip,\n    Typography\n} from \"@material-ui/core\";\nimport {formatLargeDuration, generatePassword, generateUsername, getEntropy, getSha1Hash} from \"./passwordUtil\";\nimport styled from 'styled-components'\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport \"@fontsource/jetbrains-mono\"\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport {Alert} from \"@material-ui/lab\";\nimport {debounce} from 'lodash'\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport {useHibpLookupMutation} from \"./passwordToolsApi\";\n\nconst Container = styled.div`\n  display: flex;\n  max-width: 600px;\n  flex-direction: column;\n  padding: 10px;\n  ${BACKGROUND_COLOR};\n`;\n\nconst StyledTextField = styled(TextField)`\n  .MuiInputBase-input {\n    font-family: \"JetBrains Mono\", monospace\n  }\n\n  margin: 10px 0;\n`;\n\nconst TextFieldContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n`;\n\nconst StyledIconButton = styled(IconButton)`\n  margin-top: 14px;\n`;\n\nconst OptionsFormGroup = styled(FormGroup)`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PasswordDetailGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  justify-items: start;\n  gap: 10px 10px;\n  align-items: center;\n  margin: 5px 0 15px;\n`;\n\nconst GreenCheck = styled(CheckIcon)`\n  color: chartreuse;\n  margin-right: 10px;\n`;\n\nconst GreyCross = styled(ClearIcon)`\n  color: grey;\n  margin-right: 10px;\n`;\n\n\nconst formatNumber = new Intl.NumberFormat(undefined, {maximumFractionDigits: 0});\nconst formatDecimal = new Intl.NumberFormat(undefined, {maximumFractionDigits: 2});\n\nconst DEFAULT_USERNAME_LENGTH = 10;\nconst DEFAULT_PASSWORD_LENGTH = 24;\n\nexport const PasswordTools = () => {\n    const [lookupHibp, {isLoading, data}] = useHibpLookupMutation()\n    const {count: hashCount} = data ?? {}\n\n    const [settings, setSettings] = useState({\n        dialogOpen: false,\n        dialogType: null,\n        passwordSettings: {\n            length: DEFAULT_PASSWORD_LENGTH,\n            digits: true,\n            lower: true,\n            upper: true,\n            symbols: true\n        },\n        usernameSettings: {\n            length: DEFAULT_USERNAME_LENGTH\n        }\n    });\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\n    const [entropy, setEntropy] = useState({});\n\n    let secondsToBruteforce = (2 ** entropy.totalEntropy / (200 * 10 ** 18));\n\n    useEffect(() => {\n        if (!password) return;\n\n        let generatedPassword = generatePassword(settings.passwordSettings);\n        setPassword(generatedPassword);\n        setEntropy(getEntropy(generatedPassword))\n        // eslint-disable-next-line\n    }, [settings.passwordSettings]);\n\n    useEffect(() => {\n        setUsername(generateUsername(settings.usernameSettings))\n    }, [settings.usernameSettings]);\n\n    // eslint-disable-next-line\n    const checkHibp = useCallback(debounce(\n        passwordStr =>\n            getSha1Hash(passwordStr)\n                .then(lookupHibp), 500), []);\n\n    const copyToClipboard = text => navigator.clipboard.writeText(text)\n        .then(() => {\n            if (snackbarOpen) {\n                setSnackbarOpen(false);\n                setTimeout(() => setSnackbarOpen(true), 100)\n            } else\n                setSnackbarOpen(true);\n        });\n\n    const onPasswordChange = text => {\n        setPassword(text);\n        checkHibp(text);\n        setEntropy(getEntropy(text))\n    };\n\n    const closeSettings = () => setSettings(current => ({...current, dialogOpen: false}));\n\n    return <>\n        <Dialog open={settings.dialogOpen} onClose={closeSettings}>\n            <DialogTitle\n                style={{zIndex: 1}}>{settings.dialogType === 'username' ? 'Username' : 'Password'} Options</DialogTitle>\n            <DialogContent>\n                {settings.dialogType === 'username' && <>\n                    Length: {settings.usernameSettings.length}\n                    <Slider value={settings.usernameSettings.length}\n                            step={1}\n                            min={6}\n                            max={24}\n                            onChange={(e, value) =>\n                                setSettings(current => ({\n                                    ...current,\n                                    usernameSettings: {\n                                        length: value\n                                    }\n                                }))}/>\n                </>}\n                {settings.dialogType === 'password' && <>\n                    Length: {settings.passwordSettings.length}\n                    <Slider value={settings.passwordSettings.length}\n                            step={1}\n                            min={6}\n                            max={64}\n                            onChange={(e, value) =>\n                                setSettings(current => ({\n                                    ...current,\n                                    passwordSettings: {\n                                        ...current.passwordSettings,\n                                        length: value\n                                    }\n                                }))}/>\n                    <FormControl>\n                        <OptionsFormGroup>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.lower}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         lower: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'a-z'}/>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.upper}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         upper: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'A-Z'}/>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.digits}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         digits: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'0-9'}/>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.symbols}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         symbols: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'!@#$%^&*'}/>\n                        </OptionsFormGroup>\n                    </FormControl>\n                </>}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={closeSettings}>Close</Button>\n            </DialogActions>\n        </Dialog>\n        <Snackbar\n            anchorOrigin={{vertical: 'top', horizontal: 'center'}}\n            open={snackbarOpen}\n            autoHideDuration={3000}\n            onClose={() => setSnackbarOpen(false)}>\n            <Alert severity=\"success\" variant={'filled'}>Copied</Alert>\n        </Snackbar>\n        <Container>\n            <TextFieldContainer>\n                <StyledTextField\n                    variant={'outlined'}\n                    label={'Random Username'}\n                    value={username}\n                    fullWidth\n                    onChange={e => setUsername(e.target.value)}\n                    InputProps={{\n                        endAdornment:\n                            <>\n                                <IconButton onClick={() => copyToClipboard(username)}>\n                                    <FileCopyIcon/>\n                                </IconButton>\n                                <IconButton\n                                    onClick={() => setUsername(generateUsername(settings.usernameSettings))}>\n                                    <ReplayIcon/>\n                                </IconButton>\n                            </>\n                    }}\n                />\n                <StyledIconButton onClick={() => setSettings(current => ({\n                    ...current,\n                    dialogOpen: true,\n                    dialogType: 'username'\n                }))}><SettingsIcon/></StyledIconButton>\n            </TextFieldContainer>\n            <TextFieldContainer>\n                <StyledTextField\n                    variant={'outlined'}\n                    label={'Type a password'}\n                    value={password}\n                    fullWidth\n                    error={!isLoading && Boolean(hashCount)}\n                    helperText={isLoading ? 'Checking...' :\n                        password === '' ? 'Type a password to check, or generate one' :\n                            hashCount > 0 ? `Password cracked ${formatNumber.format(hashCount)} times` :\n                                'Password has not been cracked'}\n                    onChange={e => onPasswordChange(e.target.value)}\n                    InputProps={{\n                        endAdornment:\n                            <>\n                                <IconButton onClick={() => copyToClipboard(password)}>\n                                    <FileCopyIcon/>\n                                </IconButton>\n                                <IconButton\n                                    onClick={() => onPasswordChange(generatePassword(settings.passwordSettings))}>\n                                    <ReplayIcon/>\n                                </IconButton>\n                            </>\n                    }}\n                />\n                <StyledIconButton onClick={() => setSettings(current => ({\n                    ...current,\n                    dialogOpen: true,\n                    dialogType: 'password'\n                }))}><SettingsIcon/></StyledIconButton>\n            </TextFieldContainer>\n            <PasswordDetailGrid>\n                <Typography variant={'body1'} color={entropy.hasLowerCase ? 'textPrimary' : 'textSecondary'}>Lowercase\n                    letters </Typography>\n                {entropy.hasLowerCase ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'} color={entropy.hasUpperCase ? 'textPrimary' : 'textSecondary'}>Uppercase\n                    letters</Typography>\n                {entropy.hasUpperCase ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'}\n                            color={entropy.hasDigits ? 'textPrimary' : 'textSecondary'}>Digits</Typography>\n                {entropy.hasDigits ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'} color={entropy.hasSymbols ? 'textPrimary' : 'textSecondary'}>Symbols\n                    (@#...)</Typography>\n                {entropy.hasSymbols ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'}>Entropy\n                    <Tooltip\n                        arrow\n                        enterTouchDelay={100}\n                        interactive\n                        title={'A measure of how secure the password is. 128 bits is recommended for most people.'}>\n                        <IconButton tabIndex={-1}>\n                            <InfoOutlinedIcon/>\n                        </IconButton>\n                    </Tooltip>\n                </Typography>\n                <Typography\n                    variant={'body1'}>{entropy.totalEntropy && (formatDecimal.format(entropy.totalEntropy) + ' bits')}</Typography>\n\n                <Typography variant={'body1'}>Time to crack\n                    <Tooltip\n                        arrow\n                        enterTouchDelay={100}\n                        interactive\n                        title={'Based on the current Bitcoin hashrate (200 EH/s)'}>\n                        <IconButton tabIndex={-1}>\n                            <InfoOutlinedIcon/>\n                        </IconButton>\n                    </Tooltip>\n                </Typography>\n                <Typography\n                    variant={'body1'}>{Number.isFinite(secondsToBruteforce) && formatLargeDuration(secondsToBruteforce)}</Typography>\n            </PasswordDetailGrid>\n\n\n        </Container>\n\n    </>\n};","import {baseApi} from \"../../app/network-core/baseApi\";\n\n\nconst homeAutomationApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        sendCommand: build.mutation({\n            query: command => ({\n                url: 'home-automation/send',\n                method: 'POST',\n                body: {command}\n            })\n        })\n    })\n})\n\nexport const {useSendCommandMutation} = homeAutomationApi","import {Button, FormControl, InputLabel, MenuItem, Select, Snackbar} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\nimport React, {useState} from \"react\";\nimport styled from 'styled-components'\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\nimport {useSendCommandMutation} from \"./homeAutomationApi\";\n\nconst StyledContainer = styled.form`\n  display: flex;\n  max-width: 600px;\n  height: 200px;\n  justify-content: space-between;\n  flex-direction: column;\n  padding: 20px;\n  ${BACKGROUND_COLOR};\n`;\n\nexport const COMMANDS = {\n    gate_toggle: 'Gate: Toggle',\n    ac_off: 'AC: Off',\n    ac_on_24: 'AC: On @ 24°C',\n    ac_on_25: 'AC: On @ 25°C',\n    ceiling_fan_on: 'Ceiling Fan: On',\n    ceiling_fan_off: 'Ceiling Fan: Off',\n    dyson_fan_on: 'Dyson Fan: On',\n    dyson_fan_off: 'Dyson Fan: Off',\n};\n\nexport const HomeAutomation = () => {\n    const [sendCommand] = useSendCommandMutation()\n\n    const [snackbar, setSnackbar] = useState();\n    const [disabled, setDisabled] = useState(false);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setDisabled(true);\n        setTimeout(() => setDisabled(false), 2000);\n        sendCommand(e.target.command.value).unwrap().then(() => setSnackbar(true));\n    };\n\n    return <>\n        <Snackbar\n            anchorOrigin={{vertical: 'top', horizontal: 'center'}}\n            open={snackbar}\n            onClose={() => setSnackbar(false)}\n            autoHideDuration={3000}>\n            <Alert\n                variant={'filled'}\n                severity={'success'}>\n                Command sent\n            </Alert>\n        </Snackbar>\n        <StyledContainer\n            onSubmit={handleSubmit}>\n\n            <FormControl>\n                <InputLabel>Command</InputLabel>\n                <Select\n                    defaultValue={Object.entries(COMMANDS)[0][0]}\n                    name={'command'}\n                    required>\n                    {Object.entries(COMMANDS).map(([k, v]) => <MenuItem value={k} key={k}>{v}</MenuItem>)}\n                </Select>\n            </FormControl>\n            <Button\n                disabled={disabled}\n                variant={'contained'}\n                color={'primary'}\n                type={'submit'}>\n                Send command\n            </Button>\n        </StyledContainer>\n    </>\n};","import InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport {IconButton, InputAdornment, Tooltip} from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\n/*Textfield with clear and info buttons*/\nexport const TextFieldClearableInfo = ({info, onChange, ...props}) => {\n\n    return <TextField\n        {...props}\n        onChange={onChange}\n        InputProps={{\n            ...props.InputProps,\n            endAdornment:\n                <InputAdornment position={'end'}>\n                    {props.value &&\n                    <ClearIcon style={{cursor: 'pointer'}} onClick={() => onChange('')}/>}\n                    {info && <InputAdornment position={'end'}>\n                        <Tooltip\n                            arrow\n                            enterTouchDelay={100}\n                            interactive\n                            title={info}>\n                            <IconButton tabIndex={-1}>\n                                <InfoOutlinedIcon/>\n                            </IconButton>\n                        </Tooltip>\n                    </InputAdornment>}\n                    {props.InputProps?.endAdornment}\n                </InputAdornment>\n        }}\n    />\n};","import {TextFieldClearableInfo} from \"../../shared/components/textFieldClearableInfo\";\nimport Cleave from \"cleave.js/react\";\nimport React from \"react\";\n\nconst CleaveTextField = ({inputRef, ...props}) =>\n    <Cleave\n        htmlRef={inputRef}\n        {...props}\n    />;\n\n/*Textfield with clear and info buttons, and currency formatting\n* Permanently shrunk*/\nexport const TextFieldClearableInfoCurrency = ({info, onChange, InputProps, ...props}) => {\n\n    return <TextFieldClearableInfo\n        {...props}\n        info={info}\n        InputLabelProps={{ shrink: true }}\n        InputProps={{\n            ...InputProps,\n            inputComponent: CleaveTextField,\n            inputProps: {\n                options: {\n                    numeral: true,\n                    prefix: '$',\n                    rawValueTrimPrefix: true,\n                }\n            },\n            onChange: e => onChange(e.target.rawValue)\n        }}\n        onChange={onChange}\n    />\n};","import {useWatch} from \"react-hook-form\";\nimport React from \"react\";\n\n/*Isolate rendering of an array of fields (convenience)*/\nexport const FieldUseWatch = ({control, fieldsToWatch, Component}) => {\n    const fields = useWatch({\n        control,\n        name: fieldsToWatch,\n    });\n    return <Component fields={fields}/>\n};","import {baseApi} from \"../../app/network-core/baseApi\";\nimport {baseQuery} from \"../../app/network-core/baseQuery\";\n\n/*API Key from dnsproxy@gmail.com*/\nconst ENDPOINT = 'https://finnhub.io/api/v1/quote?symbol=SPY&token=c10sd6n48v6pp7chu95g';\n\nconst optionHedgeCalculatorApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        getSpyPrice: build.query({\n            queryFn: (arg, api) => baseQuery({\n                baseUrl: ENDPOINT,\n            })(arg, api),\n        })\n    })\n})\n\nexport const {useGetSpyPriceQuery} = optionHedgeCalculatorApi","import {Typography} from \"@material-ui/core\";\nimport React, {useEffect, useState} from \"react\";\nimport {yupResolver} from '@hookform/resolvers/yup'\nimport styled from 'styled-components'\nimport {Controller, useForm} from \"react-hook-form\";\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\nimport * as yup from 'yup'\nimport {trim} from \"lodash\";\nimport {TextFieldClearableInfo} from \"../../shared/components/textFieldClearableInfo\";\nimport {TextFieldRefreshLoading} from \"./textFieldRefreshLoading\";\nimport {formatDistanceToNowStrict} from 'date-fns'\nimport {TextFieldClearableInfoCurrency} from \"./TextFieldClearableInfoCurrency\";\nimport {FieldUseWatch} from \"./FieldUseWatch\";\nimport {useGetSpyPriceQuery} from \"./optionHedgeCalculatorApi\";\n\nconst FIELDS = {\n    portfolioValue: 'portfolioValue',\n    spyPrice: 'spyPrice',\n    hedgeRatio: 'hedgeRatio',\n    delta: 'delta',\n};\n\nconst emptyStringToUndefined = (val, origVal) => trim(origVal) === '' ? undefined : val;\n\nconst schema = yup.object({\n    portfolioValue: yup.number().positive().required().transform(emptyStringToUndefined),\n    spyPrice: yup.number().positive().required().transform(emptyStringToUndefined),\n    hedgeRatio: yup.number().positive().max(1).required().transform(emptyStringToUndefined),\n    delta: yup.number().positive().max(1).required().transform(emptyStringToUndefined)\n});\n\nconst Container = styled.div`\n  ${BACKGROUND_COLOR};\n  max-width: 600px;\n`;\n\nconst StyledTypography = styled(Typography)`\n  &.MuiTypography-root {\n    white-space: pre-line;\n  }\n`;\n\nconst StyledTextFieldClearableInfo = styled(TextFieldClearableInfo)`\n  margin: 10px;\n  width: min(300px, calc(100vw - 20px));\n`;\n\nconst StyledTextFieldRefresh = styled(TextFieldRefreshLoading)`\n  margin: 10px;\n  width: min(300px, calc(100vw - 20px));\n`;\n\nconst StyledTextFieldClearableInfoCurrency = styled(TextFieldClearableInfoCurrency)`\n  margin: 10px;\n  width: min(300px, calc(100vw - 20px));\n`;\n\nconst explanatoryText = `Hedge instrument: SPY puts\nNOTE: This calculates a 1:1 put spread, not the 1:1.1 as described in the 'Options Edge' book\n\nNote: As I am only hedging CSPX and IWDA, beta for my portfolio is 1\nTake beta of IWDA to be 0.89 for now (see 'Finance and Investing' doc)\nBeta of DPYA = IWDP = 0.99\n5yr beta of ISAC = 1\n\nRehedge in first month ONLY if SPY has moved > 3% from the previous long put strike\n`;\n\nconst formatNoDecimals = new Intl.NumberFormat(undefined, {maximumFractionDigits: 0});\nconst formatDecimals = new Intl.NumberFormat(undefined, {maximumFractionDigits: 1});\nconst formatDollars = new Intl.NumberFormat(undefined, {\n    style: 'currency',\n    currency: 'USD',\n    currencyDisplay: 'symbol'\n});\n\nexport const OptionHedgeCalculator = () => {\n    const {refetch, isFetching, data, fulfilledTimeStamp} = useGetSpyPriceQuery()\n\n    const [tooltipText, setTooltipText] = useState('');\n\n    const {\n        control,\n        setValue,\n    } = useForm({\n        mode: 'onTouched',\n        resolver: yupResolver(schema),\n        defaultValues: {\n            [FIELDS.portfolioValue]: '',\n            [FIELDS.spyPrice]: '',\n            [FIELDS.hedgeRatio]: 0.47,\n            [FIELDS.delta]: '',\n        }\n    });\n\n    useEffect(() => void (data && setValue(FIELDS.spyPrice, data.c, {shouldValidate: true})), [data, setValue, fulfilledTimeStamp])\n\n\n    return <Container>\n        <StyledTypography variant={'body1'}>{explanatoryText}</StyledTypography>\n\n        <Controller\n            name={FIELDS.portfolioValue}\n            control={control}\n            render={({\n                         field: {ref, ...field},\n                         fieldState: {error}\n                     }) =>\n                <StyledTextFieldClearableInfoCurrency\n                    {...field}\n                    error={Boolean(error)}\n                    helperText={error?.message}\n                    info={'Take beta of IWDA to be 0.89 and exclude bonds e.g. AGGU'}\n                    label={'Beta-weighted Portfolio Value (USD)'}\n                    variant={'outlined'}\n                />}/>\n\n        <Controller\n            name={FIELDS.spyPrice}\n            control={control}\n            render={({\n                         field: {ref, ...field},\n                         fieldState: {error}\n                     }) =>\n                <StyledTextFieldRefresh\n                    {...field}\n                    error={Boolean(error)}\n                    helperText={error?.message}\n                    label={'SPY Price'}\n                    loading={isFetching}\n                    onOpen={() => setTooltipText(fulfilledTimeStamp ? 'Last updated ' + formatDistanceToNowStrict(new Date(fulfilledTimeStamp), {addSuffix: true}) : '')}\n                    onRefresh={refetch}\n                    tooltipText={tooltipText}\n                    variant={'outlined'}/>}/>\n\n\n        <FieldUseWatch\n            control={control}\n            fieldsToWatch={[FIELDS.spyPrice]}\n            Component={({fields: [spyPrice]}) => <Typography variant={'body1'}>\n                Strike price for short 8.6% delta OTM, 90-day\n                put: {formatNoDecimals.format(0.914 * spyPrice)}\n            </Typography>}/>\n\n        <Controller\n            name={FIELDS.hedgeRatio}\n            control={control}\n            render={({\n                         field: {ref, ...field},\n                         fieldState: {error}\n                     }) =>\n                <StyledTextFieldClearableInfo\n                    {...field}\n                    error={Boolean(error)}\n                    info={'% of portfolio value to hedge using put options (via delta equivalent amount)'}\n                    helperText={error?.message}\n                    label={'Hedge Ratio'}\n                    variant={'outlined'}/>}/>\n\n\n        <FieldUseWatch\n            control={control}\n            fieldsToWatch={[FIELDS.hedgeRatio, FIELDS.portfolioValue]}\n            Component={({fields: [hedgeRatio, portfolioValue]}) =>\n                <Typography variant={'body1'}>\n                    Notional amount to hedge: {formatDollars.format(portfolioValue * hedgeRatio)}\n                </Typography>}/>\n\n        <Controller\n            name={FIELDS.delta}\n            control={control}\n            render={({\n                         field: {ref, ...field},\n                         fieldState: {error}\n                     }) =>\n                <StyledTextFieldClearableInfo\n                    {...field}\n                    error={Boolean(error)}\n                    info={'Delta of each spread with OTM 8.6% put sold, per option e.g. 0.250'}\n                    label={'Delta'}\n                    helperText={error?.message}\n                    variant={'outlined'}/>}/>\n\n        <FieldUseWatch\n            control={control}\n            fieldsToWatch={[FIELDS.portfolioValue, FIELDS.hedgeRatio, FIELDS.delta, FIELDS.spyPrice]}\n            Component={({fields: [portfolioValue, hedgeRatio, delta, spyPrice]}) =>\n                <Typography variant={'body1'}>\n                    Number of spreads required (i.e. standard option contracts):\n                    {formatDecimals.format(portfolioValue * hedgeRatio / (delta * spyPrice * 100))}\n                </Typography>}\n        />\n\n    </Container>\n};\n\n/*Testing case:\n*\n* Beta-weighted portfolio value in USD: 1000000\n* Current price of SPY: 300\n* OTM Put Strike to sell: 274.2\n* Hedge ratio: 0.47\n* Notional amount: 470000.0\n* Delta of 8.6% OTM put spread: 0.21\n* Number of spreads required (i.e. option contracts): 74.60317460317461\n* */","import TextField from \"@material-ui/core/TextField\";\nimport {CircularProgress, IconButton, InputAdornment, Tooltip} from \"@material-ui/core\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport CachedIcon from '@material-ui/icons/Cached';\nimport {noop} from \"../../shared/util\";\nimport React from \"react\";\n\nexport const TextFieldRefreshLoading = ({onChange, onRefresh, loading, tooltipText = '', onOpen = noop, ...props}) => {\n\n    return <TextField\n        {...props}\n        onChange={onChange}\n        InputProps={{\n            ...props.InputProps,\n            endAdornment:\n                <InputAdornment position={'end'}>\n                    {props.value &&\n                    <ClearIcon style={{cursor: 'pointer'}} onClick={() => onChange('')}/>}\n                    <InputAdornment position={'end'}>\n                        <Tooltip\n                            onOpen={onOpen}\n                            arrow\n                            enterTouchDelay={100}\n                            interactive\n                            title={tooltipText}>\n                            <IconButton onClick={onRefresh}>\n                                {loading ? <CircularProgress size={20}/> : <CachedIcon/>}\n                            </IconButton>\n                        </Tooltip>\n                    </InputAdornment>\n                    {props.InputProps?.endAdornment}\n                </InputAdornment>\n        }}\n    />\n};","import { ListItem, ListItemSecondaryAction, ListItemText } from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../app/theme\";\nimport { BACKGROUND_COLOR } from \"./backgroundScreen\";\nimport { Skeleton } from \"@material-ui/lab\";\n\nexport const StyledListItem = styled(ListItem)`\n  ::before {\n    margin-left: -16px;\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: -1;\n    ${({ $hideBackground }) => $hideBackground ? '' : BACKGROUND_COLOR};\n  }\n\n  ${theme.breakpoints.up('md')} {\n    ${({ $reserveSpace }) => $reserveSpace ? 'padding-right: 48px' : 'padding-right: 16px'};\n  }\n  \n  .MuiListItem-container:hover & {\n    padding-right: 48px;\n    \n    // Highlight entire item even when secondary action is hovered\n    background-color: rgba(255, 255, 255, 0.08);\n  }\n`;\nexport const StyledListItemSecondaryAction = styled(ListItemSecondaryAction)`\n  ${theme.breakpoints.up('md')}  {\n    display: none;\n  }\n\n  .MuiListItem-container:hover & {\n    display: block;\n  }\n`;\n\nexport const ItemSkeleton = () => <ListItemText\n    primary={<Skeleton animation={'wave'} width={'min(80%, 300px)'} />}\n    secondary={<Skeleton animation={'wave'} width={'min(60%, 240px)'} />} />\n\nexport const ListSkeleton = () => <ListItemText\nprimary={<Skeleton animation={'wave'} width={'min(80%, 300px)'} />}/>","import { nanoid } from '@reduxjs/toolkit';\nimport { baseApi } from \"../../app/network-core/baseApi\";\n\nbaseApi.enhanceEndpoints({\n    addTagTypes: ['lists', 'items']\n})\n\n/* Optimistic updates for update and delete operations */\nconst listApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        getLists: build.query({\n            query: () => `tasks/tasklists/`,\n            providesTags: ['lists']\n        }),\n\n        createList: build.mutation({\n            query: ({ title }) => ({\n                url: `tasks/tasklists/`,\n                method: 'POST',\n                body: { title }\n            }),\n\n            /* Invalidate cache for now since I'm not sure if lists are sorted\n            alphabetically by the server */\n            invalidatesTags: ['lists']\n        }),\n\n        updateList: build.mutation({\n            query: ({ id, title }) => ({\n                url: `tasks/tasklists/${id}/`,\n                method: 'PUT',\n                body: { id, title }\n            }),\n\n            /* Optimistically update */\n            onQueryStarted: ({ id, ...data }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(listApi.util.updateQueryData('getLists', undefined, draft => {\n                    let obj = draft.find(e => e.id === id)\n                    Object.assign(obj, data)\n                }))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        deleteList: build.mutation({\n            query: ({ id }) => ({\n                url: `tasks/tasklists/${id}/`,\n                method: 'DELETE',\n            }),\n\n            /* Optimistically delete */\n            onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(listApi.util.updateQueryData('getLists', undefined, draft =>\n                    draft.filter(e => e.id !== id)))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        getItems: build.query({\n            query: list => `tasks/tasklists/${list}/tasks/`,\n            providesTags: (_result, _error, list) => [{ type: 'lists', id: list }],\n        }),\n\n        createItem: build.mutation({\n            query: ({ list, title, notes }) => ({\n                url: `tasks/tasklists/${list}/tasks/`,\n                method: 'POST',\n                body: { title, notes, tasklist: list }\n            }),\n\n            onQueryStarted: ({ list }, { dispatch, queryFulfilled }) => {\n                /* Optimistically show skeleton */\n                let id = nanoid()\n                let result = dispatch(listApi.util.updateQueryData('getItems', list, draft => {\n                    draft.unshift({ isSkeleton: true, id })\n                }))\n\n                /* Update getItems with the newly created item on success, and remove skeleton*/\n                queryFulfilled\n                    .then(({ data }) => {\n                        dispatch(listApi.util.updateQueryData('getItems', list, draft => {\n                            draft.unshift(data);\n                            let idx = draft.findIndex(e => e.id === id)\n                            if (idx !== -1)\n                                draft.splice(idx, 1)\n                        }));\n                    })\n                    .catch(result.undo)\n            }\n        }),\n\n        updateItem: build.mutation({\n            query: ({ list, id, title, notes }) => ({\n                url: `tasks/tasklists/${list}/tasks/${id}/`,\n                method: 'PUT',\n                body: { title, notes, tasklist: list }\n            }),\n\n            /* Optimistically update the item (it will exist in cache IF createItem was successful,\n                due to onQueryStarted in createItem) */\n            onQueryStarted: ({ list, id, ...data }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(listApi.util.updateQueryData('getItems', list, draft => {\n                    let obj = draft.find(e => e.id === id)\n                    Object.assign(obj, data)\n                }))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        deleteItem: build.mutation({\n            query: ({ list, id }) => ({\n                url: `tasks/tasklists/${list}/tasks/${id}/`,\n                method: 'DELETE',\n            }),\n\n            /* Optimistically delete item */\n            onQueryStarted: ({ list, id }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(listApi.util.updateQueryData('getItems', list, draft => draft.filter(e => e.id !== id)))\n                queryFulfilled.catch(result.undo)\n            }\n        })\n    })\n})\n\n\n\nexport const {\n    useGetListsQuery,\n    useCreateListMutation,\n    useUpdateListMutation,\n    useDeleteListMutation,\n\n    useGetItemsQuery,\n    useCreateItemMutation,\n    useUpdateItemMutation,\n    useDeleteItemMutation,\n} = listApi","import { IconButton, ListItemText, Menu, MenuItem } from \"@material-ui/core\";\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { useState } from 'react';\nimport { StyledListItem, StyledListItemSecondaryAction } from \"../../shared/components/styledListItem\";\nimport { useDeleteListMutation, useUpdateListMutation } from \"./listApi\";\n\nexport const List = ({ onClick, list: { title, id } }) => {\n\n    const [deleteList] = useDeleteListMutation()\n    const [updateList] = useUpdateListMutation()\n\n    const [anchorEl, setAnchorEl] = useState()\n\n    const stopPropagation = func => e => {\n        e.stopPropagation()\n        func(e)\n    }\n\n    const editTitle = () => {\n        setAnchorEl(undefined)\n        let newTitle = prompt('Enter new title:', title)\n        if (newTitle) {\n            updateList({title: newTitle, id})\n        }\n    }\n\n    return <StyledListItem\n        button\n        onClick={onClick}\n        $hideBackground\n        $reserveSpace={false}>\n        <Menu\n            anchorEl={anchorEl}\n            open={!!anchorEl}\n            onClose={stopPropagation(e => setAnchorEl(undefined))}>\n            <MenuItem onClick={stopPropagation(editTitle)}>Edit</MenuItem>\n            <MenuItem onClick={stopPropagation(() => deleteList({id}))}>Delete</MenuItem>\n        </Menu>\n        <ListItemText\n            primary={title}\n            primaryTypographyProps={{ noWrap: true }}\n        />\n        <StyledListItemSecondaryAction>\n            <IconButton\n                edge={'end'}\n                onClick={stopPropagation(e => setAnchorEl(e.currentTarget))}>\n                <MoreVertIcon />\n            </IconButton>\n        </StyledListItemSecondaryAction>\n\n    </StyledListItem>\n};\n","import styled from \"styled-components\";\nimport { OverlayScrollbarsComponent } from \"overlayscrollbars-react\";\nimport { Dialog } from \"@material-ui/core\";\nimport { OverlayScrollbarOptions, theme } from \"../../app/theme\";\n\nconst StyledDialog = styled(Dialog)`\n  .MuiDialog-paper {\n    width: min(100vw - 32px, ${({ $maxWidth }) => $maxWidth}px);\n  }\n\n  // Blur effect only if supported\n  @supports (backdrop-filter: blur(5px)) {\n    .MuiDialog-container {\n      backdrop-filter: blur(5px);\n    \n    }\n\n    .MuiDialog-paper {\n      background: none;\n    }\n  }\n\n  .MuiDialog-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n\n  // Reduce margins when on mobile\n  ${theme.breakpoints.down('sm')} {\n\n    // Extend width\n    .MuiDialog-paperWidthFalse {\n      max-width: calc(100% - 32px);\n    }\n\n    // Extend height\n    .MuiDialog-paperScrollPaper {\n      max-height: 100%;\n    }\n\n    // Add some margin to the top, and remove bottom margin settings\n    .MuiDialog-paper {\n      margin: 16px 0 0;\n    }\n\n  }\n`;\n\nconst StyledOverlayScrollbarsComponent = styled(OverlayScrollbarsComponent)`\n  .os-viewport {\n    overscroll-behavior: contain;\n  }\n`;\n\n/* Dialog with overlayscrollbars (does not scroll footer component)*/\nexport const DialogBlurResponsive = ({ children, footer, maxWidth = 800, ...props }) =>\n  <StyledDialog\n    maxWidth={false}\n    $maxWidth={maxWidth}\n    disableScrollLock\n    {...props}>\n    <StyledOverlayScrollbarsComponent\n      options={OverlayScrollbarOptions}\n      className={'os-host-flexbox'}>\n      {children}\n    </StyledOverlayScrollbarsComponent>\n    {footer}\n  </StyledDialog>;","import CodeMirror from \"codemirror/lib/codemirror\";\n\nconst updateBottomMargin = cm => {\n\n    // Fixed 300px of virtual height if lineCount > 1\n    let padding = '';\n\n    if (cm.lineCount() > 1) {\n        // const totalH = cm.display.scroller.clientHeight - 30,\n        //     lastLineH = cm.getLineHandle(cm.lastLine()).height;\n        // padding = (totalH - lastLineH) + \"px\";\n        padding = '300px';\n    }\n\n    if (cm.state.scrollPastEndPadding !== padding) {\n        cm.state.scrollPastEndPadding = padding;\n        cm.display.lineSpace.parentNode.style.paddingBottom = padding;\n        cm.off(\"refresh\", updateBottomMargin);\n        cm.setSize();\n        cm.on(\"refresh\", updateBottomMargin);\n    }\n};\n\nconst onChange = (cm, change) => {\n    if (CodeMirror.changeEnd(change).line === cm.lastLine())\n        updateBottomMargin(cm);\n};\n\n\nCodeMirror.defineOption(\"scrollPastEnd\", false, (cm, val, old) => {\n\n    // I think this turns off the mode\n    if (old && old !== CodeMirror.Init) {\n        cm.off(\"change\", onChange);\n        cm.off(\"refresh\", updateBottomMargin);\n        cm.display.lineSpace.parentNode.style.paddingBottom = \"\";\n        cm.state.scrollPastEndPadding = null;\n    }\n\n    if (val) {\n        cm.on(\"change\", onChange);\n        cm.on(\"refresh\", updateBottomMargin);\n        updateBottomMargin(cm);\n    }\n});","import {UnControlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css'\nimport './codemirror.css'\nimport 'codemirror/mode/gfm/gfm'\nimport 'codemirror/addon/edit/closebrackets'\nimport 'codemirror/addon/edit/matchbrackets'\nimport 'codemirror/addon/selection/mark-selection'\nimport 'codemirror/addon/selection/active-line'\nimport 'codemirror/addon/display/autorefresh'\nimport './scrollPastEnd'\nimport {useEffect, useState} from \"react\";\n\n/*\n * Uncontrolled component. Modifying defaultValue after first mount will not trigger re-renders.\n */\nexport const MarkdownEditor = ({defaultValue, onChange}) => {\n\n    const [instance, setInstance] = useState(null);\n    const [initialValue, setInitialValue] = useState();\n    const [loaded, setLoaded] = useState(false);\n\n    /*Necessary to fix wrong Codemirror-sizer instance when mounted within\n    an OverlayScrollbars component with lineWrapping: true*/\n    useEffect(() => instance?.refresh(), [instance]);\n\n    // Set default value on first mount, and ignore all further updates\n\n    useEffect(() => {\n        setInitialValue(defaultValue);\n        setLoaded(true)\n        // eslint-disable-next-line\n    }, []);\n\n    return loaded\n        ? <CodeMirror\n            value={initialValue}\n            options={{\n                theme: 'codemirror',\n                mode: {\n                    name: 'gfm',\n                    highlightFormatting: true,\n                },\n                lineNumbers: true,\n                lineWrapping: true,\n                indentWithTabs: true,\n                viewportMargin: Infinity,\n                autoCloseBrackets: true,\n                matchBrackets: true,\n                styleSelectedText: true,\n                styleActiveLine: true,\n                autoRefresh: true,\n                scrollPastEnd: true\n\n            }}\n            editorDidMount={editor => setInstance(editor)}\n            onChange={(editor, data, newValue) => {\n\n                onChange(newValue);\n            }}\n        />\n        : null\n};\n","import { debounce } from 'lodash';\nimport { useCallback, useRef } from \"react\";\n\nconst defaultState = { id: null, data: null, pendingData: false, creationInProgress: false, flushing: true }\n\n/**\n * Autosave hook.\n * Saves items via updateItem on debounced intervals.\n * Calls createItem if id is not provided.\n * Optionally deletes item on flush.\n * \n * Note: provided functions must be memoized, otherwise\n * the debounced onChange function will not be referentially stable,\n * and cause unnecessary re-renders\n * \n * Provides:\n * onChange: data => void\n * flush: () => void (flush all pending debounced onChange callbacks)\n * \n * Required props:\n * updateItem: (id, data) => Promise || void\n * \n * Required if id is null:\n * createItem: (data) => id: Promise<String>\n * \n * Optional, delete item if empty, and only on flush():\n * deleteItem: (id) => Promise || void\n * \n * Required if deleteItem is provided:\n * itemIsEmpty: data => Boolean\n */\nexport const useAutosave = ({\n    id = null,\n    createItem,\n    updateItem,\n    deleteItem,\n    itemIsEmpty = () => false,\n    wait = 1000,\n    maxWait,\n}) => {\n\n    /* Validate arguments */\n    if (typeof updateItem !== 'function') {\n        throw new Error(`updateItem must be a function, but got ${typeof updateItem}`)\n    } else if (!id && typeof createItem !== 'function') {\n        throw new Error(`createItem must be provided if id is null/undefined, but got ${typeof createItem}`)\n    } else if (!!deleteItem && typeof deleteItem !== 'function') {\n        throw new Error(`deleteItem must be a function, but got ${typeof deleteItem}`)\n    } else if (!!deleteItem && typeof itemIsEmpty !== 'function') {\n        throw new Error(`itemIsEmpty must be provided with deleteItem, but got ${typeof itemIsEmpty}`)\n    }\n\n    /* Store a copy of the item's id (updated on props change via useEffect) */\n    const state = useRef({ ...defaultState, id })\n\n    /* Update item (or delete, if flushing) */\n    const updateOrDelete = useCallback((id, data) => {\n        if (state.current.flushing && itemIsEmpty(data)) {\n            deleteItem(id)\n            state.current.data = null // Clear data so that a second deleteItem won't be called\n        } else {\n            updateItem(id, data)\n        }\n    }, [deleteItem, itemIsEmpty, updateItem])\n\n    const _onChange = useCallback(async data => {\n        state.current.data = data\n\n        if (state.current.id) {\n\n            /* id was supplied or item was created, update*/\n            updateOrDelete(state.current.id, data)\n\n        } else if (state.current.creationInProgress) {\n\n            /* Flag data for update later when id is available */\n            state.current.pendingData = true\n\n        } else {\n            /* New item, and it is empty, and we are flushing:\n            don't create the item */\n            if (state.current.flushing && itemIsEmpty(data)) return\n\n            /* id is null, and creation has not yet occurred - create item */\n            state.current.creationInProgress = true\n            let newId = await createItem(data)\n            state.current.creationInProgress = false\n            state.current.id = newId\n\n            /* Execute and clear pendingData if any*/\n            if (state.current.pendingData) {\n                updateOrDelete(newId, state.current.data)\n                state.current.pendingData = false\n            }\n        }\n    }, [createItem, itemIsEmpty, updateOrDelete])\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const onChange = useCallback(\n        debounce(_onChange, wait, Object.assign({}, maxWait ? { maxWait } : undefined)),\n        [_onChange, wait, maxWait]\n    )\n\n    const flush = useCallback(() => {\n\n        state.current.flushing = true\n        onChange.flush()\n\n        /* Bail if item doesn't exist, e.g. flush() was called on a\n         new item where id = null and _onChange wasn't called */\n        if (!id && !state.current.id) return\n\n        /* onChange.flush() will not execute deleteItem if no changes are in the queue.\n        This manually checks and fires a delete if necessary. */\n        if (state.current.data && itemIsEmpty(state.current.data)) {\n            deleteItem(state.current.id)\n        }\n    }, [deleteItem, id, itemIsEmpty, onChange])\n\n    return {\n        onChange,\n        flush\n    }\n}","import {createSlice} from \"@reduxjs/toolkit\";\n\nexport const listsSliceName = 'lists'\n\nconst initialState = {\n    currentList: null\n}\n\nexport const listsSlice = createSlice({\n    name: listsSliceName,\n    initialState,\n    reducers: {\n        setCurrentList: (state, {payload}) => void (state.currentList = payload)\n    }\n})\n\nexport const {\n    setCurrentList\n} = listsSlice.actions\n\nexport const selectCurrentList = state => state[listsSliceName].currentList","import { Button, CircularProgress, TextField, Tooltip, Typography, useMediaQuery } from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport { parseJSON } from \"date-fns\";\nimport { useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { DialogBlurResponsive } from \"../../shared/components/dialogBlurResponsive\";\nimport { MarkdownEditor } from \"../../shared/components/MarkdownEditor/MarkdownEditor\";\nimport { useAutosave } from \"../../shared/useAutosave\";\nimport { formatDistanceToNowPretty } from \"../../shared/util\";\nimport { useCreateItemMutation, useDeleteItemMutation, useUpdateItemMutation } from \"./listApi\";\nimport { selectCurrentList } from \"./listsSlice\";\n\nconst FooterRight = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 10px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  margin: 5px 0;\n`;\n\n/*If editingTask.id is null, a new task is being created*/\nexport const EditItem = ({ closeEdit, editingItem }) => {\n\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n    const currentListId = useSelector(selectCurrentList)?.id\n\n    const [createItem, { isLoading: isLoadingCreateItem, startedTimeStamp: createItemStarted }] = useCreateItemMutation()\n    const [updateItem, { isLoading: isLoadingUpdateItem, startedTimeStamp: updateItemStarted }] = useUpdateItemMutation()\n    const [deleteItem, { isLoading: isLoadingDeleteItem }] = useDeleteItemMutation()\n\n    /* Purely for within the dialog - the appBar already shows a global loading indicator */\n    const loading = isLoadingCreateItem || isLoadingUpdateItem || isLoadingDeleteItem\n\n    const useAutosaveOptions = useMemo(() => ({\n        id: editingItem?.id,\n        updateItem: (id, data) => updateItem({ list: currentListId, id, ...data }),\n        createItem: data => createItem({ list: currentListId, ...data }).unwrap().then(res => res.id),\n        deleteItem: id => deleteItem({ list: currentListId, id }),\n        itemIsEmpty: data => !data.title && !data.notes,\n    }),[createItem, currentListId, deleteItem, editingItem?.id, updateItem])\n\n\n    const { onChange, flush } = useAutosave(useAutosaveOptions)\n\n    const initialTitle = editingItem.title || '';\n    const initialNotes = editingItem.notes || '';\n\n    const { register, getValues, setValue } = useForm({\n        defaultValues: {\n            'title': initialTitle,\n            'notes': initialNotes,\n        }\n    });\n\n    register('title');\n    register('notes');\n\n    const onClose = () => {\n        flush()\n        closeEdit()\n    }\n\n    /* If there is any update, it must be after a create.\n    startedTimeStamp are used because fulfilledTimeStamp is reset when a \n    new mutation is requested, causing the UI to default to editingItem.updated\n    momentarily.*/\n    const lastSavedTimeString =\n        updateItemStarted ?\n            formatDistanceToNowPretty(updateItemStarted) :\n            createItemStarted ?\n                formatDistanceToNowPretty(createItemStarted) :\n                editingItem.updated ?\n                    formatDistanceToNowPretty(parseJSON(editingItem.updated)) :\n                    ''\n\n    /* Prefer operations with the latest possible time */\n    const lastCreatedTimeString =\n        createItemStarted ?\n            formatDistanceToNowPretty(createItemStarted) :\n            editingItem.created ?\n                formatDistanceToNowPretty(parseJSON(editingItem.created)) :\n                ''\n\n    return <DialogBlurResponsive\n        open\n        onClose={onClose}\n        footer={<Footer>\n            <Tooltip\n                arrow\n                enterTouchDelay={100}\n                interactive\n                title={lastCreatedTimeString ?\n                    `Created ${lastCreatedTimeString}` :\n                    'Not yet created'}>\n                <Typography variant={'body2'} color={'textSecondary'}>\n                    {lastSavedTimeString ?\n                        `Last saved ${lastSavedTimeString}` :\n                        'New item'}\n                </Typography>\n            </Tooltip>\n            <FooterRight>\n                {loading && <CircularProgress color=\"inherit\" size={20} />}\n                <Button\n                    variant={'text'}\n                    color={'primary'}\n                    onClick={onClose}>\n                    Close\n                </Button>\n            </FooterRight>\n        </Footer>}>\n\n        <StyledTextField\n            label='Title'\n            multiline\n            fullWidth\n            name={'title'}\n            autoFocus={!initialTitle && !initialNotes}\n            defaultValue={initialTitle}\n            variant={'outlined'}\n            onChange={e => {\n                setValue('title', e.target.value);\n                onChange(getValues())\n            }}\n        />\n        {fullScreen\n            ? <StyledTextField\n                label='Notes'\n                multiline\n                fullWidth\n                defaultValue={getValues('notes')}\n                variant={'outlined'}\n                onChange={e => {\n                    setValue('notes', e.target.value);\n                    onChange(getValues())\n                }}\n            />\n            : <MarkdownEditor\n                defaultValue={getValues('notes')}\n                onChange={newVal => {\n                    setValue('notes', newVal);\n                    onChange(getValues())\n                }} />\n        }\n    </DialogBlurResponsive>\n};\n","import { IconButton, ListItemText } from \"@material-ui/core\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React from 'react';\nimport { useSelector } from \"react-redux\";\nimport { ItemSkeleton, StyledListItem, StyledListItemSecondaryAction } from \"../../shared/components/styledListItem\";\nimport { useDeleteItemMutation } from \"./listApi\";\nimport { selectCurrentList } from \"./listsSlice\";\n\n/**\n * Will show a skeleton if item.isSkeleton is true\n */\nexport const Item = ({ setEditingItem, item }) => {\n    const { id, title, notes, isSkeleton } = item\n    const [deleteItem] = useDeleteItemMutation()\n    const currentListId = useSelector(selectCurrentList)?.id\n\n    if (isSkeleton) {\n        return <StyledListItem>\n            <ItemSkeleton />\n        </StyledListItem>\n    }\n\n    return <StyledListItem\n        button\n        onClick={() => setEditingItem(item)}\n        $reserveSpace={true}>\n        <ListItemText\n            primary={title}\n            secondary={notes}\n            secondaryTypographyProps={{ noWrap: true }} />\n        <StyledListItemSecondaryAction>\n            <IconButton\n                edge={'end'}\n                onClick={e => {\n                    e.stopPropagation();\n                    deleteItem({ list: currentListId, id })\n                }}>\n                <DeleteIcon />\n            </IconButton>\n        </StyledListItemSecondaryAction>\n\n    </StyledListItem>;\n}","import { Fab, List } from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport { useSelector } from \"react-redux\";\nimport { Virtuoso } from 'react-virtuoso/dist';\nimport styled from 'styled-components';\nimport { ItemSkeleton, StyledListItem } from \"../../shared/components/styledListItem\";\nimport { EditItem } from \"./EditItem\";\nimport { Item } from \"./Item\";\nimport { useGetItemsQuery } from \"./listApi\";\nimport { selectCurrentList } from \"./listsSlice\";\n\nconst StyledFab = styled(Fab)`\n  position: fixed;\n  z-index: 1;\n  bottom: 20px;\n  right: 20px;\n`;\n\nconst StyledDiv = styled.div`\n  max-width: 800px;\n  height: 100%;\n`;\n\nexport const ListItems = () => {\n\n    const currentList = useSelector(selectCurrentList)\n    const [editingItem, setEditingItem] = useState(null);\n    const virtuosoRef = useRef();\n\n    const { data: items, isFetching } = useGetItemsQuery(currentList?.id, { skip: !currentList })\n\n    useEffect(() => {\n        if (!currentList) return;\n\n        // Prevent virtuoso from remembering the scroll position of the previously viewed list\n        if (virtuosoRef.current) {\n            virtuosoRef.current.scrollToIndex({ align: 'top', behavior: 'smooth' })\n        }\n        // eslint-disable-next-line\n    }, [currentList]);\n\n    if (isFetching) return <List\n        disablePadding\n        dense>\n        {[...Array(3)].map(() => <StyledListItem>\n            <ItemSkeleton />\n        </StyledListItem>)}\n    </List>\n\n    const list = items.map(e => <Item\n        setEditingItem={setEditingItem}\n        key={e.id}\n        item={e} />);\n\n    return <>\n        <StyledFab\n            color={'primary'}\n            onClick={() => setEditingItem({\n                id: null,\n                title: '',\n                notes: '',\n            })}>\n            <AddIcon />\n        </StyledFab>\n\n        {editingItem && <EditItem\n            editingItem={editingItem}\n            closeEdit={() => void setEditingItem(null)} />}\n\n        <StyledDiv>\n            <Virtuoso\n                ref={virtuosoRef}\n                totalCount={items.length}\n                itemContent={index => list[index]}\n                components={{\n                    List: forwardRef(({ children, ...props }, listRef) =>\n                        <List\n                            {...props}\n                            disablePadding\n                            dense\n                            ref={listRef}>\n                            {children}\n                        </List>)\n                }} />\n        </StyledDiv>\n    </>\n};","import { Button, CircularProgress, IconButton, List as MuiList, Typography } from \"@material-ui/core\";\nimport SyncIcon from '@material-ui/icons/Sync';\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { Loading } from \"../../shared/components/loading\";\nimport { List } from \"./List\";\nimport { useCreateListMutation, useGetItemsQuery, useGetListsQuery } from \"./listApi\";\nimport { ListItems } from \"./ListItems\";\nimport { selectCurrentList, setCurrentList } from \"./listsSlice\";\n\nconst StyledButton = styled(Button)({\n    margin: '10px',\n});\n\nexport const Lists = ({ setDrawerContent, setTitleContent }) => {\n\n    const dispatch = useDispatch()\n\n    // There is a chance the listId stored is invalid - useEffect below checks for this\n    const currentList = useSelector(selectCurrentList)\n\n    const { data: lists, isFetching: isLoadingLists, refetch: refetchLists } = useGetListsQuery()\n    const { isFetching: isFetchingGetItems, refetch: refetchItems } = useGetItemsQuery(currentList?.id, { skip: !currentList })\n    const [createList] = useCreateListMutation()\n\n    /*Show Lists in app-bar drawer*/\n\n    useEffect(() => void setDrawerContent(<MuiList disablePadding dense>\n        {isLoadingLists ?\n            <div style={{ display: 'flex', 'justifyContent': 'center' }}>\n                <CircularProgress size={20} />\n            </div> :\n            [\n                <StyledButton\n                    variant={'contained'}\n                    color={'secondary'}\n                    onClick={() => {\n                        let title = prompt('Enter title:');\n                        if (title) {\n                            createList({ title })\n                        }\n                    }}>\n                    Create new Tasklist\n                </StyledButton>,\n\n                lists?.map(list => <List\n                    key={list.id}\n                    list={list}\n                    onClick={() => dispatch(setCurrentList(list))} />)\n            ]}\n    </MuiList>),\n        [createList, dispatch, isLoadingLists, lists, setDrawerContent])\n\n    useEffect(() => void setTitleContent(<>\n        <Typography variant={\"h6\"} noWrap>\n            {currentList?.title}\n        </Typography>\n        <IconButton\n            onClick={() => {\n                refetchLists()\n                refetchItems()\n            }}\n            disabled={isFetchingGetItems}>\n            <SyncIcon />\n        </IconButton>\n    </>), [currentList, isFetchingGetItems, refetchItems, refetchLists, setTitleContent])\n\n    if (!currentList) return <Loading\n        fullscreen={false}\n        showSpinner={false}\n        message={'Select a list'} />\n\n\n    return <ListItems />\n}\n    ;\n","// /*Add new modules here*/\n// import {Literature} from \"../../modules/Literature/Literature\";\nimport { Account } from \"../../modules/Account/Account\";\nimport { Dvr } from \"../../modules/Dvr/Dvr\"; \nimport {Testing} from \"../../modules/Testing/Testing\";\nimport {PasswordTools} from \"../../modules/PasswordTools/PasswordTools\";\nimport {HomeAutomation} from \"../../modules/HomeAutomation/HomeAutomation\";\nimport {OptionHedgeCalculator} from \"../../modules/OptionHedgeCalculator/OptionHedgeCalculator\";\nimport {Lists} from \"../../modules/Lists/Lists\";\n\nexport const MODULES = {\n    LISTS: {\n        menuName: 'Lists',\n        onlySuperUser: false,\n        element: Lists\n    },\n    // LITERATURE: {\n    //     menuName: 'Literature',\n    //     onlySuperUser: false,\n    //     element: Literature\n    // },\n    ACCOUNT: {\n        menuName: 'Account',\n        onlySuperUser: false,\n        element: Account\n    },\n    PASSWORDS: {\n        menuName: 'Password Tools',\n        onlySuperUser: false,\n        element: PasswordTools,\n    },\n    HOME_AUTOMATION: {\n        menuName: 'Home Automation',\n        onlySuperUser: true,\n        element: HomeAutomation\n    },\n    DVR: {\n        menuName: 'Dvr',\n        onlySuperUser: true,\n        element: Dvr\n    },\n    OPTION_HEDGE_CALCULATOR: {\n        menuName: 'Option Hedge Calculator',\n        onlySuperUser: false,\n        element: OptionHedgeCalculator\n    },\n    TEST: {\n        menuName: 'Testing',\n        onlySuperUser: true,\n        element: Testing\n    }\n}","/**\n * Base and authentication endpoints\n * */\n\n/*Base*/\nexport const API_URL = 'https://api.nicholaslyz.com';\nexport const FILES_URL = 'https://files.nicholaslyz.com';","import styled from \"styled-components\";\nimport {BackgroundScreenRounded} from \"../../shared/components/backgroundScreen\";\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {selectLoginStatus, setCurrentModule} from \"../appSlice\";\nimport {MODULES} from \"./modules\";\nimport {Button} from \"@material-ui/core\";\nimport React from 'react'\n\nconst GDOCS_ATTRACTIONS_URL = 'https://docs.google.com/document/d/1MS6oLLnTWWhdS_FEr1vudNfsnGBMT2V1GtrmHzDd6s0/edit#';\n\nconst FlexContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  height: 100%;\n  margin: 0 auto;\n  max-width: 300px;\n`;\n\nconst InnerContainer = styled(BackgroundScreenRounded)`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst StyledButton = styled(Button)({\n    margin: '10px',\n});\n\n/*Also handles persisting of CURRENT_MODULE in localstorage and updates redux store accordingly*/\nexport const ModuleSelect = () => {\n\n    const dispatch = useDispatch()\n    const {isSuperUser} = useSelector(selectLoginStatus)\n\n    const modules = Object.entries(MODULES)\n        .filter(([_, {onlySuperUser}]) => isSuperUser || !onlySuperUser)\n        .map(([moduleKey, {menuName}]) =>\n            <StyledButton\n                variant={'outlined'}\n                color={'primary'}\n                key={moduleKey}\n                onClick={() => dispatch(setCurrentModule( moduleKey))}>\n                {menuName}\n            </StyledButton>\n        )\n\n    /*Todo get this URL from the server in future*/\n    modules.push(isSuperUser && <StyledButton\n        variant={'outlined'}\n        color={'primary'}\n        key={'attractions'}\n        onClick={() => window.open(GDOCS_ATTRACTIONS_URL, '_blank', 'noopener,noreferrer')}\n        endIcon={<CallMadeIcon/>}>\n        Attractions and Food\n    </StyledButton>)\n\n    return <FlexContainer>\n        <InnerContainer>\n            {modules}\n        </InnerContainer>\n    </FlexContainer>\n};","import {Badge, Chip, Divider, IconButton, ListItem, ListItemText, Popover, Typography} from '@material-ui/core'\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport React, {useState} from \"react\";\nimport styled from \"styled-components\";\nimport {useSelector} from \"react-redux\";\nimport {selectNotificationsSorted} from \"./notificationSlice\";\nimport {formatDistanceToNowPretty} from \"../../shared/util\";\n\nconst StyledChip = styled(Chip)`\n  margin-right: 5px;\n  cursor: pointer;\n`;\n\nconst StyledPopover = styled(Popover)`\n  .MuiPopover-paper {\n    max-width: min(calc(100% - 32px), 600px);\n  }\n`;\n\nconst StyledSpan = styled.div`\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n`;\n\nexport const NotificationMenu = () => {\n\n    const notifications = useSelector(selectNotificationsSorted)\n\n    const [anchorEl, setAnchorEl] = useState();\n\n    const handleNotificationClick = e => setAnchorEl(e.currentTarget);\n    const onClose = () => setAnchorEl(null);\n\n    return <>\n        <IconButton\n            onClick={handleNotificationClick}\n        >\n            <Badge badgeContent={notifications.length} color={'error'}>\n                <NotificationsIcon/>\n            </Badge>\n        </IconButton>\n        <StyledPopover\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            onClose={onClose}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}>\n            {notifications.length > 0 ?\n                notifications.map(e => <React.Fragment key={e.id}>\n                    <ListItem button>\n                        <ListItemText\n                            disableTypography\n                            primary={<>\n                                <StyledChip\n                                    color={'primary'}\n                                    label={e.source}/>\n                                {e.title}\n                            </>}\n                            secondary={<>\n                                <StyledSpan>{e.content}</StyledSpan>\n                                <Typography variant={'body2'}\n                                            align={'right'}>\n                                    {formatDistanceToNowPretty(new Date(e.timestamp))}\n                                </Typography>\n                            </>}/>\n                    </ListItem>\n                    <Divider/>\n                </React.Fragment>) :\n                <ListItem>\n                    <ListItemText\n                        primary={'No new notifications'}/>\n                </ListItem>}\n        </StyledPopover>\n    </>\n\n};","import {OverlayScrollbarOptions} from \"../theme\";\nimport {CircularProgress, Drawer, List, ListItem, ListItemIcon, ListItemText, useMediaQuery} from \"@material-ui/core\";\nimport {selectCurrentModule, setCurrentModule} from \"../appSlice\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport MeetingRoomIcon from \"@material-ui/icons/MeetingRoom\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport {OverlayScrollbarsComponent} from \"overlayscrollbars-react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useLogoutMutation} from \"../auth/authApi\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\n\n\nconst OverlayScrollbarsWithMaxWidth = styled(OverlayScrollbarsComponent)`\n  width: ${({$width})=>$width}px;\n  max-width: 80vw;\n`\n\nconst AppNameDiv = styled.div`\n  font-family: 'Starcraft', serif;\n  font-size: 20px;\n  margin: 0 auto;\n  text-align: center;\n  cursor: default;\n`;\n\n\nconst TransparentDrawer = styled(Drawer)`\n  .MuiDrawer-paper {\n    ${({$transparent}) => $transparent && BACKGROUND_COLOR};\n  }\n`;\n\nexport const AppBarDrawer = ({drawerOpen, drawerWidth, setDrawerOpen, sidebarName, children}) => {\n\n    const dispatch = useDispatch()\n    const module = useSelector(selectCurrentModule)\n\n    const [logout, {isLoading}] = useLogoutMutation()\n\n    const theme = useTheme();\n    const mobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const closeAppBar = () => setDrawerOpen(false)\n\n    const clearModule = () => dispatch(setCurrentModule(null))\n\n    return <TransparentDrawer\n        $transparent={!mobile}\n        onClose={closeAppBar}\n        open={!mobile || drawerOpen}\n        variant={mobile ? 'temporary' : 'permanent'}>\n        <OverlayScrollbarsWithMaxWidth\n            $width={drawerWidth}\n            options={OverlayScrollbarOptions}\n            className={'os-host-flexbox'}>\n            <List onClick={closeAppBar}>\n                <ListItem>\n                    <AppNameDiv>{sidebarName}</AppNameDiv>\n                </ListItem>\n                {module && <ListItem button onClick={clearModule}>\n                    <ListItemIcon>\n                        <ArrowBackIcon/>\n                    </ListItemIcon>\n                    <ListItemText primary={'Back to Apps'}/>\n                </ListItem>}\n                {children}\n                <ListItem\n                    button\n                    onClick={e => {\n                        e.stopPropagation()\n                        logout()\n                    }}>\n                    <ListItemIcon>\n                        <MeetingRoomIcon/>\n                    </ListItemIcon>\n                    <ListItemText primary={'Logout'}/>\n                    {isLoading && <CircularProgress size={20}/>}\n                </ListItem>\n            </List>\n        </OverlayScrollbarsWithMaxWidth>\n    </TransparentDrawer>;\n\n}","import { useSelector } from \"react-redux\"\nimport { selectPendingNetworkActions } from \"../appSlice\"\nimport { CircularProgress } from '@material-ui/core';\n\nexport const AppBarNetworkLoading = () => {\n    const hasPendingNetworkActions = useSelector(selectPendingNetworkActions).length > 0\n\n    return hasPendingNetworkActions ? <CircularProgress size={20}/> : null\n}","import { AppBar as MuiAppBar, IconButton, Slide, Toolbar, Typography, useScrollTrigger } from \"@material-ui/core\";\nimport { styled as muiStyled } from \"@material-ui/core/styles\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React, { useLayoutEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport styled from 'styled-components';\nimport { selectCurrentModule } from \"../appSlice\";\nimport { MODULES } from \"../modules/modules\";\nimport { ModuleSelect } from \"../modules/ModuleSelect\";\nimport { NotificationMenu } from \"../notifications/NotificationMenu\";\nimport { AppBarDrawer } from \"./AppBarDrawer\";\nimport { AppBarNetworkLoading } from \"./AppBarNetworkLoading\";\n\nexport const drawerWidth = 300;\n\nconst FlexContainer = styled.div`\n  display: flex;\n  height: 100vh;\n`;\n\nconst TransparentAppBar = muiStyled(MuiAppBar)(({ theme }) => ({\n    [theme.breakpoints.up('md')]: {\n        width: `calc(100% - ${drawerWidth}px)`,\n        marginLeft: drawerWidth,\n    },\n\n    '@supports (backdrop-filter: blur(10px))': {\n        'backdrop-filter': 'blur(10px)',\n    },\n\n    background: 'rgba(0,0,0,0.6)',\n\n}));\n\nconst DrawerContainer = muiStyled('div')(({ theme }) => ({\n    [theme.breakpoints.up('md')]: {\n        width: drawerWidth,\n        flexShrink: 0,\n    },\n\n}));\n\nconst ContentContainer = styled.div`\n  flex: 1;\n  overflow-y: scroll;\n`;\n\nconst ContentDiv = styled.div`\n  height: calc(100% - 48px); //48px is the height of Toolbar (variant=dense)\n`;\n\n\nconst StyledIconButton = muiStyled(IconButton)(({ theme }) => ({\n    [theme.breakpoints.up('md')]: {\n        display: 'none',\n    }\n}));\n\n\n/*A globally shared app bar.\nTo prevent AppBar from automatically closing on ListItem click, use \ne.stopPropagation().*/\nexport const AppBar = () => {\n\n    const module = useSelector(selectCurrentModule)\n\n    const trigger = useScrollTrigger({ threshold: 50 });\n\n    /*Hooks are passed to modules*/\n    const [drawerOpen, setDrawerOpen] = useState(false)\n    const [drawerContent, setDrawerContent] = useState(null)\n    const [sidebarName, setSidebarName] = useState('')\n    const [titleContent, setTitleContent] = useState(null)\n\n    const appBarProps = { setDrawerContent, setTitleContent, setSidebarName, setDrawerOpen }\n\n    /*useLayoutEffect is critical here, to ensure that this runs BEFORE any\n    * useEffect(s) in the children that might call setTitleContent etc.*/\n    useLayoutEffect(() => {\n        if (!module) {\n            setSidebarName('Modules')\n            setTitleContent(<Typography variant={\"h6\"}>Modules</Typography>)\n            setDrawerContent(null)\n        } else {\n            setTitleContent(<Typography variant={\"h6\"}>{MODULES[module].menuName}</Typography>)\n            setSidebarName(MODULES[module].menuName)\n        }\n\n    }, [module, setDrawerContent, setSidebarName, setTitleContent])\n\n    return <FlexContainer>\n        <Slide direction={'down'} in={!trigger}>\n            <TransparentAppBar\n                position={'fixed'}\n                color={'transparent'}>\n                <Toolbar variant={\"dense\"}>\n                    <StyledIconButton\n                        color={\"inherit\"}\n                        edge={'start'}\n                        onClick={() => setDrawerOpen(true)}>\n                        <MenuIcon />\n                    </StyledIconButton>\n                    {titleContent}\n                    <div style={{ flex: 1 }} />\n                    <AppBarNetworkLoading/>\n                    <NotificationMenu />\n                </Toolbar>\n            </TransparentAppBar>\n        </Slide>\n\n        <DrawerContainer>\n            <AppBarDrawer\n                drawerOpen={drawerOpen}\n                drawerWidth={drawerWidth}\n                setDrawerOpen={setDrawerOpen}\n                sidebarName={sidebarName}>\n                {drawerContent}\n            </AppBarDrawer>\n        </DrawerContainer>\n\n\n        <ContentContainer>\n            <Toolbar variant={\"dense\"} />\n            <ContentDiv>\n                {module ?\n                    React.createElement(MODULES[module].element, appBarProps) :\n                    <ModuleSelect {...appBarProps} />}\n            </ContentDiv>\n        </ContentContainer>\n\n    </FlexContainer>\n};","import React from \"react\";\nimport {Login} from \"./auth/Login\";\nimport {useSelector} from \"react-redux\";\nimport {selectLoginStatus} from \"./appSlice\";\nimport {RefreshSession} from \"./refresh-session/RefreshSession\";\nimport {Hmail} from \"../modules/Hmail/Hmail\";\nimport {AppBar} from \"./app-bar/AppBar\";\n\n/*Checks for login then displays appropriate component*/\nexport const App = () => {\n\n    const {loggedIn, isSuperUser} = useSelector(selectLoginStatus)\n\n    return loggedIn ?\n        <>\n            {isSuperUser && <Hmail/>}\n            <RefreshSession/>\n            <AppBar/>\n        </> :\n        <Login/>;\n};\n","import {isRejected, isRejectedWithValue} from \"@reduxjs/toolkit\";\nimport {setNetworkError} from \"../appSlice\";\n\n/*Show network errors for rejected thunk actions*/\nexport const networkErrorMiddleware = ({dispatch}) => next => action => {\n\n    if (isRejectedWithValue(action)) {\n        /*Payload has been formatted by baseQuery.\n        * Reducer will filter out 401/403s while not logged in*/\n        dispatch(setNetworkError(action.payload));\n\n    } else if (isRejected(action) && !action.meta.condition) {\n        /*Ignore thunks cancelled due to condition being true*/\n        console.warn(`Rejected thunk:`, action)\n    }\n\n    return next(action)\n}","import { isAnyOf, isFulfilled, isPending, isRejected, isRejectedWithValue } from \"@reduxjs/toolkit\"\nimport { addNetworkAction, removeNetworkAction } from \"../appSlice\"\n\n\nexport const networkLoadingMiddleware = ({dispatch}) => next => action => {\n\n    if (isPending(action)) {\n        dispatch(addNetworkAction(action.meta.requestId))\n\n    } else if (isAnyOf(isFulfilled, isRejected, isRejectedWithValue)(action)) {\n        dispatch(removeNetworkAction(action.meta.requestId))\n    }\n\n    return next(action)\n}","import {configureStore} from \"@reduxjs/toolkit\";\nimport {appSlice, appSliceName as appPath} from \"./appSlice\";\nimport {baseApi} from \"./network-core/baseApi\";\nimport {networkErrorMiddleware} from \"./network-error/networkErrorMiddleware\";\nimport {setupListeners} from \"@reduxjs/toolkit/query\";\nimport {notificationSlice, notificationsSliceName as notificationsPath} from \"./notifications/notificationSlice\";\nimport {listsSlice, listsSliceName as listsPath} from \"../modules/Lists/listsSlice\";\nimport { networkLoadingMiddleware } from \"./network-loading/networkLoadingMiddleware\";\n\nexport const store =  configureStore({\n    reducer: {\n        [appPath]: appSlice.reducer,\n        [notificationsPath]: notificationSlice.reducer,\n        [listsPath]: listsSlice.reducer,\n        [baseApi.reducerPath]: baseApi.reducer\n    },\n    middleware: getDefaultMiddleware =>\n        getDefaultMiddleware()\n            .concat(baseApi.middleware)\n            .concat(networkErrorMiddleware)\n            .concat(networkLoadingMiddleware)\n})\n\nsetupListeners(store.dispatch)","import {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    IconButton,\n    Snackbar\n} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\nimport React, {useState} from \"react\";\nimport {styled as muiStyled} from \"@material-ui/core/styles\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\nconst StyledDialog = muiStyled(Dialog)(({theme}) => ({\n    /*As zIndex is set inline in Dialog, style must be overridden with !important*/\n    zIndex: `${theme.zIndex.snackbar + 1} !important`,\n}));\n\n/* Display snackbar with dialog.\n* Omit onClose to prevent user from dismissing alert\n* Omit dialogTitle & dialogText to disable dialog*/\nexport const AlertSnackbarWithDialog = ({\n                                            severity = 'error',\n                                            onClose,\n                                            snackbarText,\n                                            dialogTitle,\n                                            dialogContent,\n                                            actions\n                                        }) => {\n\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const dialogEnabled = Boolean(dialogTitle && dialogContent);\n\n    return <>\n        {dialogEnabled && <StyledDialog\n            open={dialogOpen}\n            onClose={() => setDialogOpen(false)}\n            scroll={'body'}>\n\n            <DialogTitle>{dialogTitle}</DialogTitle>\n\n            <DialogContent>\n                <DialogContentText component={'div'} style={{whiteSpace: 'pre-wrap'}}>\n                    {dialogContent}\n                </DialogContentText>\n            </DialogContent>\n\n\n            <DialogActions>\n                <Button\n                    variant={'text'}\n                    color={'primary'}\n                    onClick={() => setDialogOpen(false)}\n                >Close\n                </Button>\n            </DialogActions>\n\n        </StyledDialog>}\n        <Snackbar open>\n            <Alert\n                severity={severity}\n                action={<>\n                    {dialogEnabled && <Button\n                        variant={'text'}\n                        color={'primary'}\n                        onClick={() => setDialogOpen(true)}>\n                        Details\n                    </Button>}\n                    {actions}\n                    {onClose && <IconButton\n                        size=\"small\"\n                        color=\"inherit\"\n                        onClick={onClose}>\n                        <CloseIcon fontSize=\"small\"/>\n                    </IconButton>}\n                </>}>\n                {snackbarText}\n            </Alert>\n        </Snackbar>\n    </>\n        ;\n};","import {Button} from \"@material-ui/core\";\nimport React from \"react\";\nimport {AlertSnackbarWithDialog} from \"../../shared/components/AlertSnackbarWithDialog\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {clearNetworkError, selectNetworkError} from \"../appSlice\";\nimport {NETWORK_ERROR} from \"../constants\";\n\n/*Displays appropriate snackbars informing users of network state/errors,\n* with remediation options.\n*\n* Accepts both Responses and Errors.*/\nexport const NetworkError = () => {\n\n    const dispatch = useDispatch()\n    const networkError = useSelector(selectNetworkError)\n    if (!networkError) return null\n\n    const {method, url, text, status, type} = networkError\n\n    const message = <>\n        <p>{method}: {url}</p>\n        <p>{text}</p>\n    </>\n\n    switch (type) {\n        case NETWORK_ERROR.FETCH_ERROR:\n            /*Fetch error. Allow user to close snackbar*/\n            return <AlertSnackbarWithDialog\n                dialogTitle={'Fetch Error'}\n                actions={<Button color={'primary'} onClick={() => window.location.reload()}>\n                    Reload\n                </Button>}\n                dialogContent={message}\n                severity={'error'}\n                snackbarText={'A network error has occurred.'}\n                onClose={() => dispatch(clearNetworkError())}/>\n\n        case NETWORK_ERROR.HTTP_ERROR:\n            if ([401, 403].includes(status)) {\n                /*Authentication errors. Don't allow user to close snackbar*/\n                return <AlertSnackbarWithDialog\n                    dialogTitle={'Authentication Error'}\n                    actions={<Button color={'primary'}\n                                     onClick={() => window.location.reload()}>\n                        Login </Button>}\n                    dialogContent={message}\n                    severity={'warning'}\n                    snackbarText={'You are logged out.'}/>;\n\n            } else {\n                /*Other HTTP errors (4xx/5xx). Allow user to close snackbar*/\n                return <AlertSnackbarWithDialog\n                    dialogTitle={`Error ${status}`}\n                    actions={<Button color={'primary'} onClick={() => window.location.reload()}>\n                        Reload\n                    </Button>}\n                    dialogContent={message}\n                    severity={'error'}\n                    snackbarText={'An HTTP error has occurred.'}\n                    onClose={() => dispatch(clearNetworkError())}/>;\n            }\n        default:\n            /*Catch non NetworkError rejectedWithValue thunks*/\n            return <AlertSnackbarWithDialog\n                dialogTitle={`Non NetworkError rejectWithValue thunk`}\n                dialogContent={message}\n                severity={'error'}\n                snackbarText={'A network error has occurred.'}\n                onClose={() => dispatch(clearNetworkError())}/>;\n    }\n};","import ReactDOM from 'react-dom';\nimport React, { StrictMode } from \"react\";\nimport '@fontsource/roboto/300.css'\nimport '@fontsource/roboto/400.css'\nimport '@fontsource/roboto/500.css'\nimport '@fontsource/roboto/700.css'\nimport '@fontsource/source-sans-pro' //For codemirror in MarkdownEditor.js\nimport './shared/static/fonts/starcraft/starcraft.css' //Stylized font for menu\nimport { MuiThemeProvider } from \"@material-ui/core\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { LoadServiceWorker } from \"./app/load-service-worker/LoadServiceWorker\";\nimport { ErrorBoundary } from \"./app/error-boundary/ErrorBoundary\";\nimport 'overlayscrollbars/css/OverlayScrollbars.css'\nimport { theme } from \"./app/theme\";\nimport { RandomBackground } from \"./shared/components/randomBackground\";\nimport { App } from \"./app/App\";\nimport { Provider } from 'react-redux'\nimport { store } from './app/store'\nimport { NetworkError } from \"./app/network-error/NetworkError\";\n\n/*Decide whether to run mock service worker for debugging*/\nconst USE_MOCK_SERVICE_WORKER = false;\nconst prepare = () => {\n    if (process.env.NODE_ENV === 'development' && USE_MOCK_SERVICE_WORKER) {\n        const { worker } = require('./test/mocks/browser');\n        return worker.start()\n    }\n    return Promise.resolve()\n}\n\nprepare().then(() => {\n    ReactDOM.render(\n        <StrictMode>\n            <MuiThemeProvider theme={theme}>\n                <CssBaseline />\n                <RandomBackground />\n                <ErrorBoundary>\n                    <Provider store={store}>\n                        <LoadServiceWorker />\n                        <NetworkError />\n                        <App />\n                    </Provider>\n                </ErrorBoundary>\n            </MuiThemeProvider>\n        </StrictMode>\n        , document.getElementById('root'))\n});\n\n\n\n"],"sourceRoot":""}