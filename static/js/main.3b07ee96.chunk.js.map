{"version":3,"sources":["app/load-service-worker/LoadServiceWorker.js","shared/components/GenericList/BaseItemEdit.js","shared/util.js","shared/useAsyncError.js","app/error-boundary/ErrorBoundary.js","app/theme.js","app/constants.js","app/network-core/baseQuery.js","app/network-core/baseApi.js","app/auth/authApi.js","app/appSlice.js","shared/components/GenericList/BaseListItemSkeleton.js","modules/Literature/literatureApi.js","modules/Literature/schema.js","modules/Literature/literatureSlice.js","shared/components/AddButton.js","shared/useAutosave.js","shared/components/DialogBlurResponsive.js","shared/components/GenericList/ItemSkeleton.js","shared/components/backgroundScreen.js","shared/components/GenericList/StyledListItem.js","shared/components/GenericList/StyledListItemSecondaryAction.js","shared/components/GenericList/BaseList.js","shared/components/GenericList/BaseListItem.js","shared/components/GenericList/GenericList.js","shared/components/Loading.js","shared/components/AutocompleteWithCreate.js","shared/components/textFieldClearable.js","shared/components/textFieldMultilineEllipsis.js","modules/Literature/utils.js","modules/Literature/AddBook.js","modules/Literature/BookResult.js","modules/Literature/SearchBooks.js","modules/Literature/Books.js","modules/Literature/GenreEdit.js","modules/Literature/GenreTreeView.js","modules/Literature/submodules.js","modules/Literature/Genres.js","modules/Account/accountApi.js","modules/Account/BrowserCard.js","shared/static/browserLogos/chrome.png","shared/static/browserLogos/firefox.png","shared/static/browserLogos/edge.png","shared/static/browserLogos/safari.png","modules/Account/Browsers.js","modules/Account/TwoFactor.js","modules/Account/Account.js","modules/Dvr/dvrApi.js","modules/Dvr/Dvr.js","modules/Testing/testingApi.js","modules/Testing/util.js","modules/Testing/Testing.js","modules/PasswordTools/passwordUtil.js","modules/PasswordTools/passwordToolsApi.js","modules/PasswordTools/PasswordTools.js","modules/HomeAutomation/homeAutomationApi.js","modules/HomeAutomation/HomeAutomation.js","shared/components/textFieldClearableInfo.js","modules/OptionHedgeCalculator/explanatoryText.js","modules/OptionHedgeCalculator/FieldUseWatch.js","modules/OptionHedgeCalculator/TextFieldClearableInfoCurrency.js","modules/OptionHedgeCalculator/OptionHedgeCalculator.js","modules/Lists/listApi.js","modules/Lists/List.js","modules/Lists/ListItem.js","shared/components/MarkdownEditor/scrollPastEnd.js","shared/components/MarkdownEditor/MarkdownEditor.js","modules/Lists/ListItemEdit.js","modules/Lists/listsSlice.js","modules/Lists/ListItems.js","modules/Lists/Lists.js","app/modules/modules.js","modules/Literature/Literature.js","app/urls.js","app/modules/ModuleSelect.js","app/notifications/notificationsApi.js","app/notifications/notificationSlice.js","app/notifications/NotificationMenu.jsx","app/app-bar/AppBarDrawer.js","app/app-bar/AppBarNetworkLoading.js","app/app-bar/AppBar.js","app/starfield/spriteShaderMaterial.js","app/starfield/zoomShader.js","app/starfield/Starfield.js","app/auth/Login.js","app/refresh-session/RefreshSession.js","app/App.js","app/network-error/networkErrorMiddleware.js","app/network-loading/networkLoadingMiddleware.js","app/store.js","shared/components/AlertSnackbarWithDialog.js","app/network-error/NetworkError.js","shared/components/randomBackground.js","app/network-core/BackendSnackbar.jsx","index.js"],"names":["Component","defaultFieldValues","sanitizeString","string","removeAccents","trim","toLowerCase","getRandomInt","min","max","seed","undefined","Math","ceil","floor","rng","seedrandom","random","formatDistanceToNowPretty","date","differenceInMinutes","Date","formatDistanceToNow","addSuffix","differenceInCalendarDays","formatDistanceToNowStrict","differenceInCalendarYears","format","isLocalhost","Boolean","window","location","hostname","match","noop","stripHtml","html","DOMParser","parseFromString","body","textContent","stripUndefined","obj","isPlainObject","copy","Object","entries","k","joinUrl","base","url","String","replace","truncateString","len","length","slice","hasServiceWorker","navigator","wb","Workbox","NoServiceWorker","useState","sbOpen","setSbOpen","Snackbar","open","onClose","autoHideDuration","Alert","severity","LoadServiceWorker","intervalId","useRef","registration","text","actions","details","setDetails","setError","useCallback","e","Error","useAsyncError","reloadPage","reload","onInstalled","event","isUpdate","console","log","onControlling","onActivated","onUpdate","current","waiting","Button","variant","color","onClick","messageSW","type","clearInterval","onError","error","toString","useEffect","addEventListener","register","then","r","catch","setInterval","update","ClickAwayListenerProps","onClickAway","action","StyledDialog","muiStyled","Dialog","theme","zIndex","snackbar","ErrorBoundary","props","setDialogOpen","state","setState","dialogOpen","errorInfo","this","scroll","DialogTitle","DialogContent","DialogContentText","componentStack","DialogActions","children","createMuiTheme","palette","primary","main","secondary","OverlayScrollbarOptions","className","overflowBehavior","x","scrollbars","autoHide","NETWORK_ERROR","defaultValidateStatus","response","status","responseHandler","headers","get","startsWith","json","baseQuery","baseUrl","defaultHeaders","prepareHeaders","fetchFn","fetch","baseFetchOptions","a","arg","signal","getState","method","Headers","params","validateStatus","config","JSON","stringify","divider","indexOf","query","URLSearchParams","request","Request","requestClone","clone","responseClone","meta","resultData","data","name","message","baseQueryWithRetry","baseQueryOptions","retry","fail","maxRetries","API_URL","hash","baseApi","createApi","reducerPath","credentials","endpoints","authApi","injectEndpoints","build","checkLogin","login","mutation","logout","useCheckLoginQuery","useLoginMutation","useRecaptchaKeyQuery","useLogoutMutation","appSliceName","handleLoginFulfilled","payload","user","expiry","isSuperUser","is_superuser","recaptchaKey","recaptcha_key","loginStatus","loggedIn","appSlice","createSlice","initialState","module","networkError","pendingNetworkActions","reducers","setNetworkError","reducer","timestamp","includes","prepare","getTime","clearNetworkError","setCurrentModule","setAppBar","drawerOpen","appBar","addNetworkAction","push","removeNetworkAction","splice","extraReducers","builder","addMatcher","matchFulfilled","isAllOf","matchRejected","isRejectedWithValue","localStorage","clear","selectLoginStatus","selectNetworkError","selectCurrentModule","selectPendingNetworkActions","BaseListItemSkeleton","isSkeleton","id","nanoid","literatureApi","searchBook","q","transformResponse","resp","results","googleBookInfo","isbn","goodreadsBookInfo","work_id","workId","book_id","bookId","getBooks","createBook","onQueryStarted","queryArg","dispatch","queryFulfilled","util","updateQueryData","draft","unshift","updateBook","result","find","assign","undo","deleteBook","filter","getAuthors","createAuthor","updateAuthor","deleteAuthor","bookResult","forEach","book","idx","authors","getGenres","createGenre","updateGenre","deleteGenre","genres","getTypes","createType","updateType","deleteType","useSearchBookMutation","useGoodreadsBookInfoMutation","useGoogleBookInfoMutation","useGetBooksQuery","useCreateBookMutation","useUpdateBookMutation","useDeleteBookMutation","useGetAuthorsQuery","useCreateAuthorMutation","useUpdateAuthorMutation","useDeleteAuthorMutation","useGetGenresQuery","useCreateGenreMutation","useUpdateGenreMutation","useDeleteGenreMutation","useGetTypesQuery","useCreateTypeMutation","useUpdateTypeMutation","useDeleteTypeMutation","BOOK_SCHEMA","yupSchema","yup","required","notes","ensure","defaultValue","transformToServer","val","map","transformFromServer","_name","typeError","types","title","description","read_next","date_read","nullable","formatISO","representation","parseISO","image_url","published","integer","transform","origVal","isNumber","google_id","goodreads_book_id","series","series_position","rating","round","my_review","BOOK_FIELDS","fromEntries","keys","YUP_SCHEMA","noUnknown","DEFAULT_BOOK_VALUES","v","literaturePath","submodule","displayedColumns","literatureSlice","setLiteratureSubmodule","setDisplayedColumn","column","display","selectLiteratureSubmodule","selectDisplayedColumns","StyledFab","styled","Fab","AddButton","useAutosave","createItem","updateItem","deleteItem","itemIsEmpty","wait","maxWait","pendingData","creationInProgress","flushing","updateOrDelete","_onChange","newId","onChange","debounce","flush","breakpoints","down","StyledOverlayScrollbarsComponent","OverlayScrollbarsComponent","DialogBlurResponsive","footer","fullscreen","maxWidth","disableScrollLock","disablePortal","$fullscreen","options","FooterRight","div","Footer","StyledTextField","TextField","ItemSkeleton","ListItemText","Skeleton","animation","width","BACKGROUND_COLOR","BackgroundScreen","BackgroundScreenRounded","StyledListItem","ListItem","$hideBackground","up","$reserveSpace","StyledListItemSecondaryAction","ListItemSecondaryAction","StyledDiv","DefaultItem","primaryTextKey","secondaryTextKey","context","deleteItemMutation","itemIdField","item","setEditingItem","primaryText","secondaryText","closeDialog","button","secondaryTypographyProps","noWrap","IconButton","edge","stopPropagation","BaseListItem","BaseList","Item","items","loading","sortBy","disablePadding","dense","Array","_","itemsArray","sort","totalCount","itemContent","components","List","forwardRef","ref","DefaultItemEdit","editingItem","closeEdit","isItemEmpty","createItemMutation","updateItemMutation","useMemo","useAutosaveOptions","unwrap","res","useForm","defaultValues","getValues","setValue","key","label","capitalize","multiline","fullWidth","autoFocus","target","value","DefaultList","GenericList","getItemsQuery","defaultItemValues","ItemEdit","isFetching","StyledBackdrop","Backdrop","drawer","FlexContainer","FlexBackgroundScreen","Loading","showSpinner","content","CircularProgress","size","Typography","style","whiteSpace","textAlign","StyledCircularProgress","AutocompleteWithCreate","createOption","getOptionLabel","getOptionSelected","b","getValue","helperText","maxOptionsToShow","multiple","_options","renderProps","skipRenderOption","setLoading","sanitizedOptionLabels","flow","onOptionChange","newValue","i","el","_justAdded","Autocomplete","clearOnBlur","disabled","filterOptions","input","inputValue","filtered","matchSorter","_isNew","freeSolo","option","renderInput","InputProps","endAdornment","renderOption","renderTags","tagValue","getTagProps","index","onDelete","rest","Chip","deleteIcon","TextFieldClearable","InputAdornment","position","cursor","$ellipsis","TextFieldMultilineEllipsis","onBlur","onFocus","focused","setFocused","focusPos","setFocusPos","inputRef","focus","setSelectionRange","selectionStart","NumberCircle","span","recursiveSort","arr","compareFn","childrenKey","mapped","mapGenres","ancestors","currentEl","parent","p","getAncestors","fullName","join","getTreeDataFromGenres","books","genreMap","Map","root","bookCountForGenre","set","expanded","bookCount","node","disableGutters","addCount","numToAdd","FieldContainer","ButtonFlexDiv","AddBook","dataTypes","bookData","setAddedSnackbar","resolver","yupResolver","isEmpty","mode","handleSubmit","control","isDirty","formState","watch","errorSnackbar","setErrorSnackbar","saveDialog","setSaveDialog","infoDialog","setInfoDialog","sortedGenres","localeCompare","onSubmit","originalData","userData","isEqual","pick","transformedData","handleDiscard","tabIndex","StandardField","getComponentProps","render","controllerProps","field","fieldState","gridArea","component","autoComplete","autoHighlight","filterSelectedOptions","groupBy","marginLeft","FormControlLabel","checked","Checkbox","labelPlacement","FormHelperText","MuiPickersUtilsProvider","utils","DateFns","KeyboardDatePicker","autoOk","disableFuture","placeholder","inputVariant","StyledCard","Card","StyledCardContent","CardContent","Description","$empty","$maxHeight","StyledActionArea","CardActionArea","Image","img","ImageContainer","Title","Authors","BookResult","onSearchResultClick","searchLoading","from","detailView","setDetailView","maxHeight","setMaxHeight","offsetHeight","align","src","alt","reduce","acc","cur","CardActions","BookResults","StyledForm","form","SearchBooks","closeSearch","setBookData","search","searchResults","isLoading","getGoogleBookInfo","googleBookInfoLoading","getGoodreadsBookInfo","goodreadsBookInfoLoading","getBookInfoAndCreateAuthors","goodreads_work_id","ISBN_10","ISBN_13","searchMutation","apiBookInfo","mergedBook","mergeWith","objVal","srcVal","existingAuthors","authorsToCreate","mergedBookAuthor","author","existingAuthor","bookTemplate","preventDefault","elements","startAdornment","StyledTableContainer","TableContainer","FormContainer","StyledFooter","GenreEdit","deleteDialog","setDeleteDialog","genresWithNull","ownIdx","findIndex","parseData","disableClearable","opt","StyledSortableTree","SortableTree","Container","GenreTreeView","treeState","setTreeState","canDrop","prevParent","nextParent","getNodeKey","onMoveNode","nextParentNode","rowHeight","treeData","isVirtualized","submodules","BOOKS","Icon","HomeIcon","jsx","useDispatch","useSelector","booksLoading","authorsLoading","genresLoading","typesLoading","searchBookOpen","setSearchBookOpen","addedSnackbar","filteredItemsLength","setFilteredItemsLength","numBooksToShow","setNumBooksToShow","dateOptions","subWeeks","subMonths","subYears","count","customFooter","bottomOffset","scrollableAncestor","onEnter","row","customSearchRender","debounceSearchRender","draggableColumns","enabled","onFilterChange","onRowClick","rowData","dataIndex","onRowsDelete","rowsDeleted","newTableData","onTableChange","tableState","displayData","onViewColumnsChange","changedColumn","pagination","responsive","setTableProps","padding","searchPlaceholder","tableBodyMaxHeight","columns","searchable","customBodyRenderLite","customFilterListOptions","filterType","logic","filters","some","filterList","renderValue","date_added","isBefore","sortDescFirst","Set","updated","sortThirdClickReset","ThemeProvider","overrides","MUIDataTable","paper","backgroundColor","MUIDataTableHeadCell","fixedHeader","MUIDataTableSelectCell","headerCell","MuiGrid","MUIDataTableToolbar","filterPaper","AUTHORS","PeopleIcon","GENRES","InsertDriveFileIcon","setTitleEndAdornment","genreInfoDialogOpen","setGenreInfoDialogOpen","fullScreen","TYPES","TitleIcon","enhanceEndpoints","addTagTypes","accountApi","getBrowsers","providesTags","forgetAndLogoutBrowser","invalidatesTags","getOtpStatus","modify2Fa","useGetBrowsersQuery","useForgetAndLogoutBrowserMutation","useGetOtpStatusQuery","useModify2FaMutation","$thisDevice","StyledTypography","ImageDiv","SavedBrowserDiv","BrowserLogoDiv","$image","CardContainer","BrowserLogo","Chrome","Firefox","Edge","Safari","BrowserCard","browser","is_active","is_current_session","is_saved","first_login","last_activity","ip","country_code","user_agent","prettifiedUserAgent","uaString","ua","UAParser","browserName","device","model","os","osName","osVersion","version","isMobile","prettifyUAString","parseJSON","getName","overflowWrap","Grid","GridContainer","Browsers","browsers","compareDesc","TwoFactor","otp","setOtp","secret","setSecret","otpStatus","href","SUBMODULES","BROWSERS","appDrawer","ListItemIcon","TWOFACTOR","useGetOrRefreshChannelQuery","getOrRefreshChannel","channel","CHANNELS","VideoDiv","StyledVideo","video","testingApi","throwHttpError","throwFetchError","queryFn","api","extraOptions","mutationTest","useThrowHttpErrorMutation","useThrowFetchErrorMutation","useMutationTestMutation","throwAsyncThunkReject","createAsyncThunk","throwAsyncThunkRejectWithValue","rejectWithValue","DIGITS_REGEX","LOWER_REGEX","UPPER_REGEX","SYMBOLS_REGEX","DIGITS","LOWER","UPPER","SYMBOLS","secureRandom","crypto","Uint32Array","getRandomValues","randint","floor_min","floor_max","choice","getSecureRandom","formatNumber","Intl","NumberFormat","maximumFractionDigits","maximumSignificantDigits","getEntropy","password","hasDigits","test","hasLowerCase","hasUpperCase","hasSymbols","totalSymbols","bitsPerChar","log2","totalEntropy","generatePassword","digits","lower","upper","symbols","charSet","generate","getSha1Hash","msgUint8","TextEncoder","encode","subtle","digest","hashBuffer","hashArray","Uint8Array","padStart","toUpperCase","generateUsername","vowels","cons","num_vowels","num_cons","substr","useHibpLookupMutation","hibpLookup","TextFieldContainer","StyledIconButton","OptionsFormGroup","FormGroup","PasswordDetailGrid","GreenCheck","CheckIcon","GreyCross","ClearIcon","formatDecimal","useSendCommandMutation","sendCommand","command","StyledContainer","COMMANDS","gate_toggle","ac_off","ac_on_24","ac_on_25","ceiling_fan_on","ceiling_fan_off","dyson_fan_on","dyson_fan_off","TextFieldClearableInfo","info","Tooltip","arrow","enterTouchDelay","interactive","explanatoryText","marked","FieldUseWatch","fieldsToWatch","fields","useWatch","CleaveTextField","htmlRef","FIELDS","emptyStringToUndefined","schema","portfolioValue","positive","spyPrice","hedgeRatio","delta","StyledTextFieldClearable","StyledTextFieldClearableInfo","StyledTextFieldClearableInfoCurrency","InputLabelProps","shrink","inputComponent","inputProps","numeral","prefix","rawValueTrimPrefix","rawValue","formatNoDecimals","formatDecimals","formatDollars","currency","currencyDisplay","listApi","getLists","createList","updateList","deleteList","getItems","list","due_date","pinned","successData","useGetListsQuery","useCreateListMutation","useUpdateListMutation","useDeleteListMutation","useGetItemsQuery","useCreateItemMutation","useUpdateItemMutation","useDeleteItemMutation","anchorEl","setAnchorEl","func","MenuItem","newTitle","prompt","primaryTypographyProps","currentTarget","createTheme","red","orange","updateBottomMargin","cm","lineCount","scrollPastEndPadding","lineSpace","parentNode","paddingBottom","off","setSize","on","change","CodeMirror","changeEnd","line","lastLine","defineOption","old","Init","MarkdownEditor","instance","setInstance","initialValue","setInitialValue","loaded","setLoaded","refresh","highlightFormatting","lineNumbers","lineWrapping","indentWithTabs","viewportMargin","Infinity","autoCloseBrackets","matchBrackets","styleSelectedText","styleActiveLine","autoRefresh","scrollPastEnd","editorDidMount","editor","ListItemEdit","useTheme","useMediaQuery","initialTitle","initialNotes","lastSavedTimeString","lastCreatedTimeString","created","newVal","isValid","listsPath","listsSlice","currentList","setCurrentList","selectCurrentList","daysToDue","daysToDueText","abs","icon","border","ListItems","StyledButton","margin","MODULES","LISTS","menuName","onlySuperUser","element","setDrawerContent","setTitleContent","lists","isLoadingLists","refetchLists","refetch","skip","isFetchingGetItems","refetchItems","LITERATURE","refetchBooks","isFetchingBooks","refetchAuthors","isFetchingAuthors","refetchGenres","isFetchingGenres","refetchTypes","isFetchingTypes","literatureSubmodule","titleEndAdornment","DndProvider","backend","HTML5Backend","React","createElement","ACCOUNT","setSubmodule","PASSWORDS","lookupHibp","hashCount","dialogType","passwordSettings","usernameSettings","settings","setSettings","username","setUsername","setPassword","snackbarOpen","setSnackbarOpen","entropy","setEntropy","secondsToBruteforce","generatedPassword","seconds","checkHibp","passwordStr","copyToClipboard","clipboard","writeText","setTimeout","onPasswordChange","closeSettings","Slider","step","FormControl","anchorOrigin","vertical","horizontal","Number","isFinite","formatDistance","HOME_AUTOMATION","setSnackbar","setDisabled","InputLabel","Select","DVR","setSidebarName","setChannel","player","refetchOnMountOrArgChange","pollingInterval","load","uuid","getChannelUrl","stream_uuid","shaka","polyfill","installAll","unload","destroy","switchChannel","videoEl","Player","isBrowserSupported","detail","ui","Overlay","getControls","autoPlay","OPTION_HEDGE_CALCULATOR","dangerouslySetInnerHTML","__html","TEST","mutationData","OuterContainer","ModulesContainer","ModuleSelect","modules","moduleKey","endIcon","notificationsApi","getNotifications","dismissed","dismissNotification","useGetNotificationsQuery","useDismissNotificationMutation","notificationsSliceName","shape","notificationSlice","addAppNotification","every","validateShape","fromApp","removeAppNotification","selectAppNotifications","StyledChip","StyledPopover","Popover","StyledSpan","NotificationMenu","refetchOnReconnect","serverNotifications","appNotifications","notifications","Badge","badgeContent","transformOrigin","Fragment","disableTypography","source","isToday","Divider","OverlayScrollbarsWithMaxWidth","$width","AppNameDiv","TransparentDrawer","Drawer","$transparent","AppBarDrawer","drawerWidth","setDrawerOpen","sidebarName","mobile","closeAppBar","AppBarNetworkLoading","TransparentAppBar","MuiAppBar","DrawerContainer","flexShrink","ContentContainer","ContentDiv","AppBar","drawerContent","titleContent","appBarProps","useLayoutEffect","Toolbar","flex","SpriteShaderMaterial","shaderMaterial","uTime","uTexture","extend","ZoomShader","uniforms","tDiffuse","center","Vector2","strength","vertexShader","fragmentShader","UnrealBloomPass","RenderPass","ShaderPass","EffectComposer","showZoom","POINTS_COUNT","innerWidth","COLORS","fieldX","innerHeight","FullscreenDiv","Main","texture","useTexture","points","Vector3","cameraVec","composer","useThree","scene","gl","height","camera","zoomShader","timeFactor","positionArray","Float32Array","sizesArray","colorsArray","pointPosition","fieldY","Color","toArray","positions","sizes","colors","useFrame","mouse","lerp","y","attach","args","attachObject","array","itemSize","blending","depthTest","attachArray","Starfield","fov","$blur","InnerContainer","Spacer","Login","isError","save_browser","recaptchaRef","loginMessage","setLoginMessage","otpRequired","setOtpRequired","executeAsync","token","otp_required","reset","gutterBottom","inputMode","pattern","sitekey","RefreshSession","App","fallback","Loader","networkErrorMiddleware","next","isRejected","condition","warn","networkLoadingMiddleware","isPending","requestId","isAnyOf","isFulfilled","store","configureStore","appPath","notificationsPath","middleware","getDefaultMiddleware","concat","setupListeners","AlertSnackbarWithDialog","snackbarText","dialogTitle","dialogContent","dialogEnabled","fontSize","NetworkError","formattedTimestamp","RandomBackgroundImage","$picIndex","getPicIndex","NUM_IMAGES","RandomBackground","picIndex","setPicIndex","listener","removeEventListener","BackendSnackbar","alternateBackend","Promise","resolve","ReactDOM","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.3b07ee96.chunk.js","sourcesContent":["import {messageSW, Workbox} from \"workbox-window\";\nimport {useEffect, useRef, useState} from 'react';\nimport {Button, Snackbar} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\nimport {useAsyncError} from \"../../shared/useAsyncError\";\nimport {isLocalhost, noop} from \"../../shared/util\";\n\n// https://developers.google.com/web/tools/workbox/modules/workbox-window#important_service_worker_lifecycle_moments\n\nconst hasServiceWorker = () => 'serviceWorker' in navigator;\n\n// Workbox() calls navigator.serviceWorker which is undefined in Firefox private browsing.\nconst wb = hasServiceWorker() ? new Workbox('./service-worker.js') : null;\n\nconst NoServiceWorker = () => {\n    const [sbOpen, setSbOpen] = useState(true);\n\n    return <Snackbar\n        open={sbOpen}\n        onClose={() => setSbOpen(false)}\n        autoHideDuration={3000}>\n        <Alert\n            severity={'info'}\n            onClose={() => setSbOpen(false)}>\n            {'load-service-worker is not supported in your browser'}\n        </Alert>\n    </Snackbar>\n};\n\nconst withBrowserCheck = Component => {\n    return hasServiceWorker()\n    ? Component\n    : NoServiceWorker;\n};\n\n\nconst ServiceWorkerMain = () => {\n\n    const intervalId = useRef();\n    const registration = useRef({});\n    const [sbOpen, setSbOpen] = useState(false);\n    const [details, setDetails] = useState({\n        text: '',\n        severity: 'info',\n        actions: undefined,\n        autoHideDuration: 3000,\n    });\n\n    const setError = useAsyncError();\n\n    const reloadPage = () => {\n        setSbOpen(false);\n        window.location.reload()\n    };\n\n    const onInstalled = (event) => {\n        //\n        if (!event.isUpdate) {\n            setSbOpen(true);\n            setDetails({\n                text: 'Site is now available offline.',\n                severity: 'info',\n                autoHideDuration: 3000,\n            });\n            console.log('Installed, isUpdate false');\n        } else\n            console.log('Installed, isUpdate true')\n    };\n\n    const onControlling = event => {\n        if (event.isUpdate)\n            console.log('Controlling, isUpdate false');\n        else\n            console.log('Controlling, isUpdate true')\n    };\n\n    const onActivated = event => {\n        if (event.isUpdate)\n            console.log('Activated, isUpdate false');\n        else\n            console.log('Activated, isUpdate true')\n    };\n\n    const onUpdate = () => {\n        /*Deactivates the previous service worker and starts running the new one, ready for requests\n        * Regardless of the user's decision, the next reload will result in a new page.\n        * The new sw instance must be messaged for this to work.\n        * This is obtained from 'registration' set during registration of the new sw.\n        * For some reason wb.messageSW messages the old SW instead.*/\n        if (registration.current?.waiting) {\n            //Prompt user\n            setSbOpen(true);\n            setDetails({\n                text: 'Site has been updated. Reload page?',\n                severity: 'info',\n                autoHideDuration: null,\n                actions: <>\n                    <Button\n                        variant={'text'}\n                        color={'primary'}\n                        onClick={() => setSbOpen(false)}\n                    >No</Button>\n                    <Button\n                        variant={'text'}\n                        color={'primary'}\n                        onClick={reloadPage}\n                    >Yes</Button>\n                </>\n            });\n\n            messageSW(registration.current.waiting, {type: 'SKIP_WAITING'});\n            clearInterval(intervalId.current);\n            console.log('Waiting for activation, newer version available');\n        }\n    };\n\n    const onError = error => {\n        setSbOpen(true);\n        setDetails({\n            text: `Service worker update failed: ${error.toString()}`,\n            autoHideDuration: null,\n            severity: 'error',\n        });\n        console.log('Service worker update failed: ', error)\n    };\n\n    const onLocalhost = () => {\n        setSbOpen(true);\n        setDetails({\n            text: 'On localhost, service worker registration skipped',\n            autoHideDuration: 3000,\n            severity: 'info'\n        });\n        console.log('On localhost, service worker registration skipped.')\n    };\n\n    useEffect(() => {\n\n        // Skip SW registration if on localhost\n        if (isLocalhost) {\n            onLocalhost();\n            return;\n        }\n\n\n        wb.addEventListener('controlling', onControlling);\n        wb.addEventListener('activated', onActivated);\n        wb.addEventListener('installed', onInstalled);\n        wb.addEventListener('waiting', onUpdate);\n        wb.addEventListener('externalwaiting', onUpdate); // Any other different version\n\n        // Throw errors during registration\n        wb.register().then(r => registration.current = r).catch(e => setError(e));\n\n        // Service worker updates are checked on initial load\n        intervalId.current = setInterval(() => {\n            console.log('Checking for service worker updates...');\n\n            // Show snackbar on update failure, rather than throwing error\n            wb.update().catch(onError)\n        }, 5 * 60 * 1000);\n\n        // eslint-disable-next-line\n    }, []);\n\n    return <Snackbar\n        open={sbOpen}\n        ClickAwayListenerProps={{onClickAway: noop}}\n        onClose={() => setSbOpen(false)}\n        autoHideDuration={details.autoHideDuration}>\n        <Alert\n            severity={details.severity}\n            action={details.actions}\n            onClose={() => setSbOpen(false)}>\n            {details.text}\n        </Alert>\n    </Snackbar>;\n};\n\nexport const LoadServiceWorker = withBrowserCheck(ServiceWorkerMain);","import { Button, TextField } from \"@material-ui/core\";\nimport { capitalize } from 'lodash';\nimport { useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport { useAutosave } from './../../useAutosave';\nimport { DialogBlurResponsive } from '../DialogBlurResponsive';\n\nconst FooterRight = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 10px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  margin: 5px 0;\n`;\n\n/*A generic item editor with useAutosave\nWill not trigger `updateItem` if value in first field of defaultFieldValues is blank*/\nexport const BaseItemEdit =\n    defaultFieldValues =>\n        function BaseItemEditComponent({\n            editingItem,\n            closeEdit,\n            context,\n            isItemEmpty,\n            itemIdField,\n            createItemMutation,\n            updateItemMutation,\n            deleteItemMutation,\n        }) {\n\n            const [createItem] = createItemMutation()\n            const [updateItem] = updateItemMutation()\n            const [deleteItem] = deleteItemMutation()\n            \n            const keys = useMemo(() => Object.keys(defaultFieldValues), [])\n\n            const useAutosaveOptions = useMemo(() => ({\n                id: editingItem[itemIdField], // if undefined, will create new item\n                updateItem: (id, data) => {\n                    if (!data[keys[0]]) return\n                    updateItem({ [itemIdField]: id, ...context, ...data })\n                },\n                createItem: data => createItem({ ...context, ...data }).unwrap().then(res => res[itemIdField]),\n                deleteItem: id => deleteItem({ ...context, [itemIdField]: id }),\n                itemIsEmpty: isItemEmpty,\n            }), [context, createItem, deleteItem, editingItem, isItemEmpty, itemIdField, keys, updateItem])\n\n\n            const { onChange, flush } = useAutosave(useAutosaveOptions)\n\n            const { register, getValues, setValue } = useForm({ defaultValues: editingItem[itemIdField] ? editingItem : defaultFieldValues });\n\n            keys.forEach(register)\n\n            const onClose = () => {\n                flush()\n                closeEdit()\n            }\n\n            return <DialogBlurResponsive\n                open\n                onClose={onClose}\n                footer={<Footer>\n                    <FooterRight>\n                        <Button\n                            variant={'text'}\n                            color={'primary'}\n                            onClick={onClose}>\n                            Close\n                        </Button>\n                    </FooterRight>\n                </Footer>}>\n                {keys.map((key, idx) => <StyledTextField\n                    label={capitalize(key)}\n                    multiline\n                    fullWidth\n                    name={key}\n                    key={key}\n                    defaultValue={editingItem[key]}\n                    autoFocus={idx === 0 && isItemEmpty(editingItem)}\n                    variant={'outlined'}\n                    onChange={e => {\n                        setValue(key, e.target.value);\n                        onChange(getValues())\n                    }}\n                />)}\n\n            </DialogBlurResponsive>\n        };\n","/**\n * Utility functions.\n * Larger functions should be in their own file.\n */\nimport removeAccents from \"remove-accents\"\nimport seedrandom from 'seedrandom'\nimport {\n    differenceInCalendarDays,\n    differenceInCalendarYears,\n    differenceInMinutes,\n    format,\n    formatDistanceToNow,\n    formatDistanceToNowStrict\n} from \"date-fns\";\nimport UAParser from \"ua-parser-js\";\nimport {isPlainObject} from \"@reduxjs/toolkit\";\n\n/**\n * Strip accents, empty spaces and lowercase a string (for comparison purposes)\n * undefined/null returns an empty string\n * @param {String} string\n */\nexport const sanitizeString = string =>\n    string ? removeAccents(string).trim().toLowerCase() : ''\n;\n\nexport const isEmpty = string => !Boolean(string?.trim());\n\n/**\n * Returns a seeded random number between min (inclusive) and max (exclusive)\n * @param min\n * @param max\n * @param seed optional, will use seeded RNG if present\n */\nexport const getRandomInt = (min, max, seed=undefined) => {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    let rng = seed ? seedrandom(seed) : Math.random;\n    return Math.floor(rng() * (max - min) + min)\n};\n\n/**\n * Days since Unix Epoch\n * Works properly so far (i.e. day count changes at 0000hrs of current locale)\n * @returns {number}\n */\nexport const getDaysSinceEpoch = () =>\n    differenceInCalendarDays(new Date(), new Date(0));\n\n/**\n * Returns formatDateToNow if within the same minute,\n * otherwise returns formatDistanceToNowStrict if within same calendar day,\n * otherwise returns date like 18 Apr if same calendar year,\n * otherwise like Apr 2021\n * @param date\n */\nexport const formatDistanceToNowPretty = date => {\n    if (differenceInMinutes(new Date(), date) < 1)\n        return formatDistanceToNow(date, {addSuffix: true});\n    if (differenceInCalendarDays(new Date(), date) < 1)\n        return formatDistanceToNowStrict(date, {addSuffix: true});\n    if (differenceInCalendarYears(new Date(), date) < 1)\n        return format(date, 'd MMM');\n    return format(date, 'MMM y')\n};\n\nexport const isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport const noop = () => {\n};\n\n/**\n * Cryptographically secure random number generator.\n * Assumes window.crypto exists.\n */\nexport const getSecureRandom = () => {\n    if (!window.crypto) throw new Error('window.crypto not supported on browser');\n\n    let arr = new Uint32Array(1);\n    const max = 2 ** 32;\n\n    /*Will generate random numbers between 0 and 1 (exclusive) with 32 bit maximum precision\n    * Rejection sampling.*/\n    const random = () => {\n        let val = crypto.getRandomValues(arr)[0] / max;\n        if (val >= 1) return random();\n        return val\n    };\n\n    /*Random integer between min (inclusive) and max (exclusive)*/\n    const randint = (min, max) => {\n        let floor_min = Math.floor(min);\n        let floor_max = Math.floor(max);\n        return Math.floor(random() * (floor_max - floor_min)) + floor_min\n    };\n\n    /*Select random element of an array*/\n    const choice = arr => arr[randint(0, arr.length)];\n\n    return {\n        random,\n        randint,\n        choice,\n    }\n};\n\nexport const prettifyUAString = uaString => {\n    let ua = UAParser(uaString);\n    let {\n        browser: {\n            name: browserName,\n        },\n        // if type is set, it is mobile\n        device: {model, type},\n        os: {name: osName, version: osVersion}\n    } = ua;\n\n    return {\n        name: `${browserName} on ${osName} ${osVersion}${model ? ` (${model})` : ''}`,\n        isMobile: Boolean(type),\n        browserName\n    }\n};\n\nexport const stripHtml = html => {\n   let doc = new DOMParser().parseFromString(html, 'text/html');\n   return doc.body.textContent || \"\";\n}\n\n/*Copied from RTKQ's fetchBaseQuery.\n* Will not affect non-objects such as classes.*/\nexport const stripUndefined = obj => {\n    if (!isPlainObject(obj)) {\n        return obj\n    }\n    const copy = {...obj}\n    for (const [k, v] of Object.entries(copy)) {\n        if (typeof v === 'undefined') delete copy[k]\n    }\n    return copy\n}\n\n/**\n * Joins 2 URLs. Will not modify/add trailing slashes if present/absent\n * */\nexport const joinUrl = (base, url) => {\n    if (base === undefined) { // can't use !base because '0' is false\n        return url\n    }\n    if (url === undefined) {\n        return base\n    }\n    return String(base).replace(/\\/$/, '') + '/' + String(url).replace(/^\\//)\n}\n\n/* Truncate string with ellipsis after 'len' characters */\nexport const truncateString = (string, len) => string.length < len ? string : `${string.slice(0, len)}...`\n\nexport const tanDegrees = degrees => Math.tan(degrees * Math.PI / 180)","import {useState} from 'react'\nimport {useCallback} from \"react\";\n\n/*Workaround to throw errors in callbacks to ErrorBoundaries*/\nexport const useAsyncError = () => {\n    const setError = useState(null)[1];\n\n    return useCallback(e => setError(() => {\n        if (e instanceof Error){ //Subclasses of Error also return true\n            throw e\n        } else {\n            throw new Error(e)\n        }\n\n    }), [setError])\n};","import {Component} from \"react\";\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Snackbar,\n    styled as muiStyled\n} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\n\nconst StyledDialog = muiStyled(Dialog)(({theme}) => ({\n    /*As zIndex is set inline in Dialog, style must be overridden with !important*/\n    zIndex: `${theme.zIndex.snackbar + 1} !important`,\n}));\n\n/*Catch-all for any application errors*/\nexport class ErrorBoundary extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            errorInfo: null,\n            dialogOpen: false,\n        };\n    }\n\n    static getDerivedStateFromError(error) {\n        return {error: error};\n    }\n\n    setDialogOpen = state => this.setState({dialogOpen: state});\n\n    componentDidCatch(error, errorInfo) {\n        /*Errors are not logged currently*/\n    }\n\n    render() {\n        return this.state.error\n            ? <>\n                <StyledDialog\n                    open={this.state.dialogOpen}\n                    onClose={() => this.setDialogOpen(false)}\n                    scroll={'body'}\n                >\n\n                    <DialogTitle>{this.state.error.toString()}</DialogTitle>\n\n                    <DialogContent>\n                        <DialogContentText>{this.state.errorInfo?.componentStack}</DialogContentText>\n                    </DialogContent>\n\n                    <DialogActions>\n                        <Button\n                            variant={'text'}\n                            color={'primary'}\n                            onClick={() => this.setDialogOpen(false)}\n                        >Close\n                        </Button>\n                    </DialogActions>\n\n                </StyledDialog>\n                <Snackbar open>\n                    <Alert\n                        severity={'error'}\n                        action={<>\n                            <Button\n                                variant={'text'}\n                                color={'primary'}\n                                onClick={() => this.setDialogOpen(true)}\n                            >Details</Button>\n                            <Button\n                                variant={'text'}\n                                color={'primary'}\n                                onClick={() => window.location.reload()\n                                }\n                            >Reload</Button>\n                        </>\n                        }>\n                        Application Error\n                    </Alert>\n                </Snackbar>\n            </>\n            : this.props.children\n    }\n\n}","import {unstable_createMuiStrictModeTheme as createMuiTheme} from \"@material-ui/core/styles\"; //todo replace with v5 when out\n\nexport const theme = createMuiTheme({\n    palette: {\n        type: \"dark\",\n        primary: {\n            main: '#90caf9',\n        },\n        secondary: {\n            main: '#f48fb1',\n        },\n    }\n});\n\nexport const OverlayScrollbarOptions = {\n    className: 'os-theme-light',\n    overflowBehavior: {\n        x: 'hidden'\n    },\n    scrollbars: {\n        autoHide: 'move',\n    }\n};","/*TODO Replace this file with typescript*/\n\nexport const NETWORK_ERROR = {\n    HTTP_ERROR: 1,\n    FETCH_ERROR: 2,\n}","import { stripHtml, stripUndefined } from \"../../shared/util\";\nimport { NETWORK_ERROR } from \"../constants\";\nimport { joinUrl } from \"../../shared/util\";\nimport { retry } from \"@reduxjs/toolkit/dist/query\";\n\nconst defaultValidateStatus = response =>\n    (response.status >= 200 && response.status <= 299)\n\n\n/*Parse body as JSON only if content-type is JSON*/\nconst responseHandler = response =>\n    response.headers.get('content-type')?.trim()?.startsWith('application/json') ?\n        response.json() :\n        response.text()\n\n/*Custom query which wraps fetch errors in NetworkError format.\n* Will consider 4xx/5xx statuses to be errors, regardless of login status.*/\nexport const baseQuery = ({\n    baseUrl,\n    defaultHeaders = {},\n    prepareHeaders = (x) => x,\n    fetchFn = fetch,\n    ...baseFetchOptions\n}) =>\n    async (arg = {}, { signal, getState }) => {\n        let {\n            url = '',\n            method = 'GET',\n            headers = new Headers({}),\n            body = undefined,\n            params = undefined,\n            validateStatus = defaultValidateStatus,\n        } = typeof arg == 'string' ? { url: arg } : arg\n        let config = {\n            ...baseFetchOptions,\n            method,\n            signal,\n            body,\n        }\n\n        config.headers = await prepareHeaders(\n            new Headers(stripUndefined({ ...defaultHeaders, ...headers })),\n            { getState }\n        )\n\n        config.body = JSON.stringify(body)\n\n        if (params) {\n            const divider = ~url.indexOf('?') ? '&' : '?'\n            const query = new URLSearchParams(stripUndefined(params))\n            url += divider + query\n        }\n\n        url = joinUrl(baseUrl, url)\n\n\n        const request = new Request(url, config)\n        const requestClone = request.clone()\n\n        try {\n            const response = await fetchFn(request)\n            const responseClone = response.clone()\n\n            const meta = { request: requestClone, response: responseClone }\n\n            const resultData = await responseHandler(response)\n\n            return validateStatus(response, resultData)\n                ? {\n                    data: resultData, //This is not wrapped in 'data' in the reducer!\n                    meta,\n                }\n                : {\n                    error: {\n                        method: request.method,\n                        url: request.url,\n                        text: typeof resultData === 'object' ? JSON.stringify(resultData, undefined, 2) : stripHtml(resultData),\n                        status: response.status,\n                        type: NETWORK_ERROR.HTTP_ERROR,\n\n                        /*Mainly for use by auth*/\n                        data: resultData\n                    },\n                    meta,\n                }\n        } catch (e) {\n            return {\n                error: {\n                    method: request.method,\n                    url: request.url,\n                    text: `${e.name}: ${e.message}`,\n                    type: NETWORK_ERROR.FETCH_ERROR\n                }\n            }\n        }\n    }\n\n/* baseQuery with retries ONLY on NETWORK_ERROR.FETCH_ERROR (Up to 5, exponential backoff) */\nexport const baseQueryWithRetry = (...baseQueryOptions) =>\n    retry(\n        (...args) =>\n            baseQuery(...baseQueryOptions)(...args)\n                .then(r => r.error && r.error.type !== NETWORK_ERROR.FETCH_ERROR ? retry.fail(r.error) : r),\n        { maxRetries: 5 }\n    )","/**\n * Base createApi.\n */\n\nimport { createApi } from \"@reduxjs/toolkit/dist/query/react\";\nimport { baseQueryWithRetry } from \"./baseQuery\";\n\n/* Connect to an alternative backend if supplied via\na '#' fragment */\nconst API_URL = window.location.hash.slice(1) || \"https://api.nicholaslyz.com\";\n\nexport const baseApi = createApi({\n  reducerPath: \"api\",\n  baseQuery: baseQueryWithRetry({\n    baseUrl: API_URL,\n    credentials: \"include\",\n    defaultHeaders: { \"content-type\": \"application/json\" },\n  }),\n  endpoints: () => ({}),\n});\n","import {baseApi} from \"../network-core/baseApi\";\n\nexport const authApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        checkLogin: build.query({\n            query: () => 'account/login/',\n        }),\n        login: build.mutation({\n            query: body => ({\n                url: 'account/login/',\n                method: 'POST',\n                body\n            })\n        }),\n        logout: build.mutation({\n            query: () => ({\n                url: 'account/logout/',\n                method: 'POST'\n            })\n        })\n    })\n})\n\nexport const {\n    useCheckLoginQuery,\n    useRecaptchaKeyQuery,\n    useLoginMutation,\n    useLogoutMutation,\n} = authApi","import { createSlice, isAllOf, isRejectedWithValue } from \"@reduxjs/toolkit\";\nimport { NETWORK_ERROR } from \"./constants\";\nimport { authApi } from \"./auth/authApi\";\n\nexport const appSliceName = \"app\";\n\nconst initialState = {\n  module: null,\n  loginStatus: {\n    user: null,\n    expiry: null,\n    isSuperUser: false,\n    recaptchaKey: null,\n    loggedIn: false,\n  },\n  networkError: null,\n  pendingNetworkActions: [],\n};\n\nconst handleLoginFulfilled = (\n  state,\n  {\n    payload: {\n      user,\n      expiry,\n      is_superuser: isSuperUser,\n      recaptcha_key: recaptchaKey,\n    },\n  }\n) =>\n  void (state.loginStatus = {\n    user,\n    expiry,\n    isSuperUser,\n    recaptchaKey,\n    loggedIn: true,\n  });\n\nconst setNetworkErrorReducer = (state, action) => {\n  let {\n    method = \"Method not specified\",\n    url = \"URL not specified\",\n    text = \"\",\n    status = null /*Must be specified if HTTP_ERROR*/,\n    type,\n    timestamp,\n  } = action.payload;\n\n  /*Type not specified:  rejected thunk with value which is NOT a NetworkError object*/\n  if (!type) {\n    state.networkError = {\n      method,\n      url,\n      text: JSON.stringify(action, undefined, 2),\n      status,\n      type,\n      timestamp,\n    };\n    return;\n  }\n\n  if (type === NETWORK_ERROR.HTTP_ERROR && typeof status !== \"number\")\n    throw new Error(`NetworkError: 'status' must be a number if \n            'type' === HTTP_ERROR, but got ${status} instead`);\n\n  /*Ignore 401/403 errors if not logged in*/\n  if (!state.loginStatus.loggedIn && [401, 403].includes(status)) {\n    return;\n  }\n  state.networkError = { method, url, text, status, type, timestamp };\n};\n\nexport const appSlice = createSlice({\n  name: appSliceName,\n  initialState,\n  reducers: {\n    setNetworkError: {\n      reducer: setNetworkErrorReducer,\n      prepare: (action) => ({\n        payload: {\n          ...action,\n          timestamp: new Date().getTime(),\n        },\n      }),\n    },\n    clearNetworkError: (state) => void (state.networkError = null),\n    setCurrentModule: (state, { payload }) => void (state.module = payload),\n    setAppBar: (state, { payload: { drawerOpen = false } }) =>\n      void (state.appBar.drawerOpen = drawerOpen),\n    addNetworkAction: (state, { payload }) => {\n      if (!state.pendingNetworkActions.includes(payload))\n        state.pendingNetworkActions.push(payload);\n    },\n    removeNetworkAction: (state, { payload }) => {\n      if (state.pendingNetworkActions.includes(payload))\n        state.pendingNetworkActions.splice(\n          state.pendingNetworkActions.indexOf(payload),\n          1\n        );\n    },\n  },\n  extraReducers: (builder) =>\n    builder\n      .addMatcher(\n        authApi.endpoints.checkLogin.matchFulfilled,\n        handleLoginFulfilled\n      )\n      .addMatcher(\n        isAllOf(\n          authApi.endpoints.checkLogin.matchRejected,\n          isRejectedWithValue\n        ),\n        (state, action) => {\n          let payload = action.payload;\n          if (\n            payload.type === NETWORK_ERROR.HTTP_ERROR &&\n            [401, 403].includes(payload.status)\n          )\n            state.loginStatus.recaptchaKey = payload.data.recaptcha_key;\n        }\n      )\n      .addMatcher(authApi.endpoints.login.matchFulfilled, handleLoginFulfilled)\n      .addMatcher(authApi.endpoints.logout.matchFulfilled, () => {\n        /*Not pure, but an exception here as I want to clear everything*/\n        localStorage.clear();\n        /*Page is refreshed on logout, to clear both Redux store and cached memory.*/\n        window.location.reload();\n      }),\n});\n\nexport const {\n  setNetworkError,\n  clearNetworkError,\n  setCurrentModule,\n  setAppBar,\n  addNetworkAction,\n  removeNetworkAction,\n} = appSlice.actions;\n\nexport const selectLoginStatus = (state) => state[appSliceName].loginStatus;\nexport const selectNetworkError = (state) => state[appSliceName].networkError;\nexport const selectCurrentModule = (state) => state[appSliceName].module;\nexport const selectPendingNetworkActions = (state) =>\n  state[appSliceName].pendingNetworkActions;\n","import { nanoid } from \"@reduxjs/toolkit\"\n\n/* Generates a skeleton, used by BaseListItem \nHas to be a function, or the id will not be unique*/\nexport const BaseListItemSkeleton = () => ({ isSkeleton: true, id: nanoid() })\n","import { BaseListItemSkeleton } from '../../shared/components/GenericList/BaseListItemSkeleton';\nimport { joinUrl } from '../../shared/util';\nimport { baseApi } from './../../app/network-core/baseApi';\n\nconst literatureApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        searchBook: build.mutation({\n            query: q => ({\n                url: 'literature/search/',\n                params: { q }\n            }),\n            transformResponse: resp => resp.results\n        }),\n        googleBookInfo: build.mutation({\n            query: isbn => ({\n                url: 'literature/bookinfo/',\n                params: { isbn }\n            })\n        }),\n        goodreadsBookInfo: build.mutation({\n            query: ({ workId, bookId }) => ({\n                url: 'literature/bookinfo/',\n                params: { work_id: workId, book_id: bookId }\n            })\n        }),\n\n        // Books\n        getBooks: build.query({\n            query: () => 'literature/books/'\n        }),\n\n        createBook: build.mutation({\n            query: data => ({\n                url: 'literature/books/',\n                method: 'POST',\n                body: data\n            }),\n            onQueryStarted: (queryArg, { dispatch, queryFulfilled }) => {\n                /* No skeletons for now */\n                queryFulfilled.then(({ data }) =>\n                    dispatch(literatureApi.util.updateQueryData('getBooks', undefined, draft => {\n                        draft.unshift(data);\n                    }))\n                )\n            }\n        }),\n\n        updateBook: build.mutation({\n            query: ({ id, ...data }) => ({\n                url: joinUrl('literature/books/', id),\n                method: 'PUT',\n                body: data,\n            }),\n            /* Optimistically update */\n            onQueryStarted: ({ id, ...data }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(literatureApi.util.updateQueryData('getBooks', undefined, draft => {\n                    let obj = draft.find(e => e.id === id)\n                    Object.assign(obj, data)\n                }))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        deleteBook: build.mutation({\n            query: ({ id }) => ({\n                url: joinUrl('literature/books/', id) + '/',\n                method: 'DELETE',\n            }),\n            /* Optimistically delete */\n            onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(literatureApi.util.updateQueryData('getBooks', undefined, draft => draft.filter(e => e.id !== id)))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        // Authors\n        getAuthors: build.query({\n            query: () => 'literature/authors/'\n        }),\n\n        createAuthor: build.mutation({\n            query: data => ({\n                url: 'literature/authors/',\n                method: 'POST',\n                body: data\n            }),\n            onQueryStarted: (queryArg, { dispatch, queryFulfilled }) => {\n                /* Show skeleton optimistically */\n                let result = dispatch(literatureApi.util.updateQueryData('getAuthors', undefined, draft => {\n                    draft.unshift(BaseListItemSkeleton())\n                }))\n                queryFulfilled.then(result.undo).catch(result.undo)\n\n                /* Update cache with result if successful */\n                queryFulfilled.then(({ data }) => {\n                    dispatch(literatureApi.util.updateQueryData('getAuthors', undefined, draft => {\n                        draft.unshift(data);\n                    }))\n                })\n            }\n        }),\n\n        updateAuthor: build.mutation({\n            query: ({ id, ...data }) => ({\n                url: joinUrl('literature/authors/', id),\n                method: 'PUT',\n                body: data,\n            }),\n            /* Optimistically update */\n            onQueryStarted: ({ id, ...data }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(literatureApi.util.updateQueryData('getAuthors', undefined, draft => {\n                    let obj = draft.find(e => e.id === id)\n                    Object.assign(obj, data)\n                }))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        deleteAuthor: build.mutation({\n            query: ({ id }) => ({\n                url: joinUrl('literature/authors/', id) + '/',\n                method: 'DELETE'\n            }),\n            onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n                /* Optimistically delete */\n                let result = dispatch(literatureApi.util.updateQueryData('getAuthors', undefined, draft => draft.filter(e => e.id !== id)))\n                queryFulfilled.catch(result.undo)\n\n                /* Update getBooks cache */\n                let bookResult = dispatch(literatureApi.util.updateQueryData('getBooks', undefined,\n                    draft => draft.forEach(book => {\n                        let idx = book.authors.indexOf(id)\n                        if (idx !== -1) book.authors.splice(idx, 1)\n                    })\n                ))\n                queryFulfilled.catch(bookResult.undo)\n            }\n        }),\n\n        // Genres\n        getGenres: build.query({\n            query: () => 'literature/genres/'\n        }),\n\n        createGenre: build.mutation({\n            query: data => ({\n                url: 'literature/genres/',\n                method: 'POST',\n                body: data\n            }),\n            onQueryStarted: (queryArg, { dispatch, queryFulfilled }) => {\n                /* Update cache with result if successful, don't show skeleton for now*/\n                queryFulfilled.then(({ data }) => {\n                    dispatch(literatureApi.util.updateQueryData('getGenres', undefined, draft => {\n                        draft.unshift(data);\n                    }))\n                })\n            }\n        }),\n\n        updateGenre: build.mutation({\n            query: ({ id, ...data }) => ({\n                url: joinUrl('literature/genres/', id),\n                method: 'PUT',\n                body: data,\n            }),\n            /* Optimistically update*/\n            onQueryStarted: ({ id, ...data }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(literatureApi.util.updateQueryData('getGenres', undefined, draft => {\n                    let obj = draft.find(e => e.id === id)\n                    Object.assign(obj, data)\n                }))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        deleteGenre: build.mutation({\n            query: ({ id }) => ({\n                url: joinUrl('literature/genres/', id) + '/',\n                method: 'DELETE'\n            }),\n            onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n                /* Optimistically delete */\n                let result = dispatch(literatureApi.util.updateQueryData('getGenres', undefined, draft => draft.filter(e => e.id !== id)))\n                queryFulfilled.catch(result.undo)\n\n                /* Update getBooks cache */\n                let bookResult = dispatch(literatureApi.util.updateQueryData('getBooks', undefined,\n                    draft => draft.forEach(book => {\n                        let idx = book.genres.indexOf(id)\n                        if (idx !== -1) book.genres.splice(idx, 1)\n                    })\n                ))\n                queryFulfilled.catch(bookResult.undo)\n            }\n        }),\n\n        getTypes: build.query({\n            query: () => 'literature/types/'\n        }),\n\n        createType: build.mutation({\n            query: data => ({\n                url: 'literature/types/',\n                method: 'POST',\n                body: data\n            }),\n            onQueryStarted: (queryArg, { dispatch, queryFulfilled }) => {\n                /* Show skeleton optimistically */\n                let result = dispatch(literatureApi.util.updateQueryData('getTypes', undefined, draft => {\n                    draft.unshift(BaseListItemSkeleton())\n                }))\n                queryFulfilled.then(result.undo).catch(result.undo)\n\n                /* Update cache with result if successful */\n                queryFulfilled.then(({ data }) => {\n                    dispatch(literatureApi.util.updateQueryData('getTypes', undefined, draft => {\n                        draft.unshift(data);\n                    }))\n                })\n            }\n        }),\n\n        updateType: build.mutation({\n            query: ({ id, ...data }) => ({\n                url: joinUrl('literature/types/', id),\n                method: 'PUT',\n                body: data,\n            }),\n            /* Optimistically update */\n            onQueryStarted: ({ id, ...data }, { dispatch, queryFulfilled }) => {\n                let result = dispatch(literatureApi.util.updateQueryData('getTypes', undefined, draft => {\n                    let obj = draft.find(e => e.id === id)\n                    Object.assign(obj, data)\n                }))\n                queryFulfilled.catch(result.undo)\n            }\n        }),\n\n        deleteType: build.mutation({\n            query: ({ id }) => ({\n                url: joinUrl('literature/types/', id) + '/',\n                method: 'DELETE'\n            }),\n            onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n                /* Optimistically delete */\n                let result = dispatch(literatureApi.util.updateQueryData('getTypes', undefined, draft => draft.filter(e => e.id !== id)))\n                queryFulfilled.catch(result.undo)\n\n                /* Update getBooks cache.*/\n                let bookResult = dispatch(literatureApi.util.updateQueryData('getTypes', undefined,\n                    draft => draft.forEach(book => {\n                        if (book.type === id) book.type = null\n                    })\n                ))\n                queryFulfilled.catch(bookResult.undo)\n            }\n        }),\n\n    })\n})\n\nexport const {\n    useSearchBookMutation,\n    useGoodreadsBookInfoMutation,\n    useGoogleBookInfoMutation,\n\n    useGetBooksQuery,\n    useCreateBookMutation,\n    useUpdateBookMutation,\n    useDeleteBookMutation,\n\n    useGetAuthorsQuery,\n    useCreateAuthorMutation,\n    useUpdateAuthorMutation,\n    useDeleteAuthorMutation,\n\n    useGetGenresQuery,\n    useCreateGenreMutation,\n    useUpdateGenreMutation,\n    useDeleteGenreMutation,\n\n    useGetTypesQuery,\n    useCreateTypeMutation,\n    useUpdateTypeMutation,\n    useDeleteTypeMutation,\n\n} = literatureApi","/**\n * Schemas for Yup validation, default field values, transformations before submission and other utility functions\n */\n\nimport * as yup from \"yup\";\nimport { formatISO, parseISO } from \"date-fns\";\nimport { trim, isNumber, isEqual, pick } from 'lodash'\n\n/*\nThis is the schema AFTER hydrating to user-viewable input (id, date_added etc are stripped).\n\nSchema keys here are equal to those server-side\n*/\nconst BOOK_SCHEMA = {\n    authors: {\n        yupSchema: yup.array(\n            yup.object({\n                name: yup.string(),\n                id: yup.number().required(),\n                notes: yup.string()\n            }))\n            .ensure(),\n        defaultValue: [],\n        transformToServer: val => val.map(e => e.id),\n        transformFromServer: (val, {authors}) => val.map(id => id._name ? id : authors.find(e => e.id === id))\n    },\n    genres: {\n        yupSchema: yup.array(\n            yup.object({\n                name: yup.string(),\n                id: yup.number().required(),\n                notes: yup.string()\n            }))\n            .ensure(),\n        defaultValue: [],\n        transformToServer: val => val.map(e => e.id),\n        transformFromServer: (val, {genres}) => val.map(id => genres.find(e => e.id === id))\n    },\n    type: {\n        yupSchema: yup.object({\n            name: yup.string(),\n            id: yup.number().required(),\n            notes: yup.string()\n        }).typeError('Required'),\n        defaultValue: null,\n        transformToServer: val => val.id,\n        transformFromServer: (val, { types }) => types.find(e => e.id === val)\n    },\n    title: {\n        yupSchema: yup.string().required(),\n        defaultValue: '',\n    },\n    description: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n    },\n    read_next: {\n        yupSchema: yup.bool(),\n        defaultValue: false,\n    },\n    date_read: {\n        /*v3 KeyboardDatePicker will return 'Invalid Date' as a string for invalid input, causing typeError\n        * Apparently will return null if left blank\n        * This value is modified on submission, to ISO8601\n        * Necessary to check if validated date is not null prior to modifying to ISO8601*/\n        yupSchema: yup.date().nullable().typeError('Date must be in dd/mm/yyyy format'),\n        defaultValue: null,\n        transformToServer: val => val ? formatISO(val, { representation: \"date\" }) : null,\n        transformFromServer: val => val ? parseISO(val) : null // date could be null\n    },\n    image_url: {\n        yupSchema: yup.string().url(),\n        defaultValue: '',\n    },\n    published: {\n        yupSchema: yup.number().integer().nullable().transform((val, origVal) => trim(origVal) === '' ? null : val)\n            .typeError('Must be a valid year'),\n        defaultValue: '',\n        /* isNumber checks are needed because 0 is falsy*/\n        transformFromServer: val => isNumber(val) ? val : ''\n    },\n    google_id: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n        transformToServer: val => trim(val) || null,\n        transformFromServer: val => val || '',\n    },\n    goodreads_book_id: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n        transformToServer: val => trim(val) || null,\n        transformFromServer: val => val || ''\n    },\n    series: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n    },\n    series_position: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n    },\n    rating: {\n        yupSchema: yup.number().min(0).max(5).nullable().transform((val, origVal) => trim(origVal) === '' ? null : val),\n        defaultValue: '',\n        /* isNumber checks are needed because 0 is falsy*/\n        transformToServer: val => isNumber(val) ? Math.round(val * 10) / 10 : null, //val is guaranteed to be either number or null here\n        transformFromServer: val => isNumber(val) ? val : ''\n    },\n    my_review: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n    },\n    notes: {\n        yupSchema: yup.string(),\n        defaultValue: '',\n    },\n};\n\nexport const BOOK_FIELDS = Object.fromEntries(Object.keys(BOOK_SCHEMA).map(e => [e, e]));\n\nexport const YUP_SCHEMA = yup.object(Object.fromEntries(Object.entries(BOOK_SCHEMA)\n    .map(([k, v]) => [k, v.yupSchema]))).noUnknown();\n\nexport const DEFAULT_BOOK_VALUES = Object.fromEntries(Object.entries(BOOK_SCHEMA)\n    .map(([k, v]) => [k, v.defaultValue]));\n\nexport const transformToServer = data => Object.fromEntries(\n    Object.entries(data)\n        .map(([k, v]) =>\n            /*This is NOT the same as\n            * BOOK_SCHEMA[k].transformToServer?.(v) ?? v\n            *\n            * The above code will return v if transformToServer(v) === null, which is not intended behavior\n            * */\n            [k, BOOK_SCHEMA[k].transformToServer ?\n                BOOK_SCHEMA[k].transformToServer(v) :\n                v]\n        ));\n\nexport const transformFromServer = (data, dataTypes) => Object.fromEntries(\n    Object.entries(data).map(([k, v]) => [\n        /*See above for explanation why nullish coalescing/optional chaining is not used here*/\n        k, BOOK_SCHEMA[k]?.transformFromServer ?\n            BOOK_SCHEMA[k].transformFromServer(v, dataTypes) :\n            v])\n);\n\n/**\n * Verify if user had made changes to the fields\n * @param originalData - from server\n * @param userData - data from UI after transformation\n * @returns {boolean}\n */\nexport const isBookDataEqual = (originalData, userData) =>\n    isEqual(pick(originalData, Object.keys(BOOK_FIELDS)), userData);","\nimport { createSlice } from '@reduxjs/toolkit';\nimport { BOOK_FIELDS } from './schema';\n\nexport const literaturePath = 'literature'\n\n\nconst initialState = {\n    submodule: null,\n    displayedColumns: {\n        [BOOK_FIELDS.image_url]: true,\n        [BOOK_FIELDS.title]: true,\n        [BOOK_FIELDS.authors]: true,\n        [BOOK_FIELDS.genres]: true,\n    }\n}\n\nexport const literatureSlice = createSlice({\n    name: literaturePath,\n    initialState,\n    reducers: {\n        setLiteratureSubmodule: (state, { payload }) => void (state.submodule = payload),\n        setDisplayedColumn: {\n            reducer: (state, {payload: { column, display }}) => void (state.displayedColumns[column] = display),\n            prepare: (column, display) => ({ payload: { column, display } })\n        }\n    }\n})\n\nexport const {\n    setLiteratureSubmodule,\n    setDisplayedColumn\n} = literatureSlice.actions\n\nexport const selectLiteratureSubmodule = state => state[literaturePath].submodule\nexport const selectDisplayedColumns = state => state[literaturePath].displayedColumns","import styled from 'styled-components'\nimport { Fab } from '@material-ui/core'\nimport AddIcon from '@material-ui/icons/Add';\n\nconst StyledFab = styled(Fab)`\n  position: fixed;\n  z-index: 1;\n  bottom: 20px;\n  right: 20px;\n`;\n\nexport const AddButton = props => (\n  <StyledFab color={'primary'} {...props}>\n    <AddIcon />\n  </StyledFab>\n)","import { debounce } from \"lodash\";\nimport { useCallback, useRef } from \"react\";\n\n/**\n * Autosave hook.\n * Saves items via `updateItem` on debounced intervals.\n * Calls `createItem` if id is not provided.\n * Optionally deletes item on flush.\n *\n * Note: provided functions must be memoized, otherwise\n * the debounced onChange function will not be referentially stable,\n * and cause unnecessary re-renders\n *\n * Provides:\n * onChange: data => void\n * flush: () => void (flush all pending debounced onChange callbacks)\n *\n * Required props:\n * updateItem: (id, data) => Promise || void\n *\n * Required if id is null:\n * createItem: (data) => id: Promise<String>\n *\n * Optional, delete item if empty, and only on flush():\n * deleteItem: (id) => Promise || void\n *\n * Required if deleteItem is provided:\n * itemIsEmpty: data => Boolean\n */\nexport const useAutosave = ({\n  id = null,\n  createItem,\n  updateItem,\n  deleteItem,\n  itemIsEmpty = () => false,\n  wait = 1000,\n  maxWait,\n}) => {\n  /* Validate arguments */\n  if (typeof updateItem !== \"function\") {\n    throw new Error(\n      `updateItem must be a function, but got ${typeof updateItem}`\n    );\n  } else if (!id && typeof createItem !== \"function\") {\n    throw new Error(\n      `createItem must be provided if id is null/undefined, but got ${typeof createItem}`\n    );\n  } else if (!!deleteItem && typeof deleteItem !== \"function\") {\n    throw new Error(\n      `deleteItem must be a function, but got ${typeof deleteItem}`\n    );\n  } else if (!!deleteItem && typeof itemIsEmpty !== \"function\") {\n    throw new Error(\n      `itemIsEmpty must be provided with deleteItem, but got ${typeof itemIsEmpty}`\n    );\n  }\n\n  const state = useRef({\n    id, //Store a copy of the item's id\n    data: null,\n    pendingData: false,\n    creationInProgress: false,\n    flushing: false,\n  });\n\n  /* Update item (or delete, if flushing) */\n  const updateOrDelete = useCallback(\n    (id, data) => {\n      if (state.current.flushing && itemIsEmpty(data)) {\n        deleteItem(id);\n        state.current.data = null; // Clear data so that a second deleteItem won't be called\n      } else {\n        updateItem(id, data);\n      }\n    },\n    [deleteItem, itemIsEmpty, updateItem]\n  );\n\n  const _onChange = useCallback(\n    async (data) => {\n      state.current.data = data;\n\n      if (state.current.id) {\n        /* id was supplied or item was created, update*/\n        updateOrDelete(state.current.id, data);\n      } else if (state.current.creationInProgress) {\n        /* Flag data for update later when id is available */\n        state.current.pendingData = true;\n      } else {\n        /* New item, and it is empty, and we are flushing:\n            don't create the item */\n        if (state.current.flushing && itemIsEmpty(data)) return;\n\n        /* id is null, and creation has not yet occurred - create item */\n        state.current.creationInProgress = true;\n        let newId = await createItem(data);\n        state.current.creationInProgress = false;\n        state.current.id = newId;\n\n        /* Execute and clear pendingData if any*/\n        if (state.current.pendingData) {\n          updateOrDelete(newId, state.current.data);\n          state.current.pendingData = false;\n        }\n      }\n    },\n    [createItem, itemIsEmpty, updateOrDelete]\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const onChange = useCallback(\n    debounce(_onChange, wait, { ...(maxWait && { maxWait }) }),\n    [_onChange, wait, maxWait]\n  );\n\n  const flush = useCallback(() => {\n    state.current.flushing = true;\n    onChange.flush();\n\n    /* Bail if item doesn't exist, e.g. flush() was called on a\n         new item where id = null and _onChange wasn't called */\n    if (!id && !state.current.id) return;\n\n    /* onChange.flush() will not execute deleteItem if no changes are in the queue.\n        This manually checks and fires a delete if necessary. */\n    if (state.current.data && itemIsEmpty(state.current.data)) {\n      deleteItem(state.current.id);\n    }\n  }, [deleteItem, id, itemIsEmpty, onChange]);\n\n  return {\n    onChange,\n    flush,\n  };\n};\n","import styled from \"styled-components\";\nimport { OverlayScrollbarsComponent } from \"overlayscrollbars-react\";\nimport { Dialog } from \"@material-ui/core\";\nimport { OverlayScrollbarOptions, theme } from \"../../app/theme\";\n\nconst StyledDialog = styled(Dialog)`\n\n  .MuiDialog-paper {\n    width: min(100vw, 600px);\n    box-shadow: 0px 0px 17px 12px rgba(0,0,0,0.71);\n  }\n\n  // Start from top of screen regardless of content height\n  .MuiDialog-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: flex-start;\n  }\n\n  .MuiDialog-paper {\n      background: black;\n  }\n\n  @supports (backdrop-filter: blur(5px)) {\n    .MuiDialog-paper {\n      backdrop-filter: blur(5px);\n      background: none;\n    }\n  }\n\n  // Reduce margins when on mobile\n  ${theme.breakpoints.down('sm')} {\n\n    // Extend width\n    .MuiDialog-paperWidthFalse {\n      max-width: calc(100% - 32px);\n    }\n\n    // Extend height\n    .MuiDialog-container {\n      height: 100%;\n    }\n\n    .MuiDialog-paper {\n      // Keep taskbar visible\n      margin: 48px 0 0;\n\n      // Fill up screen\n      max-height: initial;\n    }\n\n  }\n`;\n\nconst StyledOverlayScrollbarsComponent = styled(OverlayScrollbarsComponent)`\n  .os-viewport {\n    overscroll-behavior: contain;\n  }\n`;\n\n/* Dialog with overlayscrollbars (does not scroll footer component)*/\nexport const DialogBlurResponsive = ({\n  children,\n  footer,\n  fullscreen = false,\n  ...props }) =>\n\n  <StyledDialog\n    maxWidth={false}\n    disableScrollLock\n    disablePortal\n    $fullscreen={fullscreen}\n    {...props}>\n\n    <StyledOverlayScrollbarsComponent\n      options={OverlayScrollbarOptions}\n      className={'os-host-flexbox'}>\n      {children}\n    </StyledOverlayScrollbarsComponent>\n\n    {footer}\n\n  </StyledDialog>;","import { ListItemText } from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\n\n/* A skeleton with a line for title and notes */\nexport const ItemSkeleton = () => <ListItemText\n  primary={<Skeleton animation={'wave'} width={'min(80%, 300px)'} />}\n  secondary={<Skeleton animation={'wave'} width={'min(60%, 240px)'} />} />;\n","import styled from \"styled-components\";\n\nexport const BACKGROUND_COLOR = `background: rgba(0, 0, 0, 0.6)`;\n\n//For use with already dark backgrounds\nexport const BACKGROUND_COLOR_LIGHT = `background: rgba(0, 0, 0, 0.3)`;\nexport const BACKGROUND_BOX_SHADOW = `box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.6)`;\n\nexport const BackgroundScreen = styled.div`\n  ${BACKGROUND_COLOR};\n`;\n\nexport const BackgroundScreenRounded = styled(BackgroundScreen)`\n  border-radius: 5px;\n  ${BACKGROUND_BOX_SHADOW};\n`;","import { ListItem } from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport { theme } from '../../../app/theme'\nimport { BACKGROUND_COLOR } from \"../backgroundScreen\";\n\nexport const StyledListItem = styled(ListItem)`\n  ::before {\n    margin-left: -16px;\n    content: '';\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: -1;\n    ${({ $hideBackground }) => $hideBackground ? '' : BACKGROUND_COLOR};\n  }\n\n  ${theme.breakpoints.up('md')} {\n    ${({ $reserveSpace }) => $reserveSpace ? 'padding-right: 48px' : 'padding-right: 16px'};\n  }\n  \n  .MuiListItem-container:hover & {\n    padding-right: 48px;\n    \n    // Highlight entire item even when secondary action is hovered\n    background-color: rgba(255, 255, 255, 0.08);\n  }\n`;","import { ListItemSecondaryAction } from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../../app/theme\";\n\n/* A ListItemSecondaryAction which will appear on hover for desktops,\nand always appear for mobile screens. */\nexport const StyledListItemSecondaryAction = styled(ListItemSecondaryAction)`\n  ${theme.breakpoints.up('md')}  {\n    display: none;\n  }\n\n  .MuiListItem-container:hover & {\n    display: block;\n  }\n`;\n","import { List } from \"@material-ui/core\";\nimport { forwardRef } from \"react\";\nimport { Virtuoso } from \"react-virtuoso/dist\";\nimport styled from \"styled-components\";\nimport { BaseListItem } from \"./BaseListItem\";\n\nconst StyledDiv = styled.div`\n  max-width: 800px;\n  height: 100%;\n`;\n\nconst DefaultItem = BaseListItem({\n  primaryTextKey: \"name\",\n  secondaryTextKey: \"notes\",\n});\n\nexport const BaseList =\n  ({ Item = DefaultItem } = {}) =>\n  ({\n    context,\n    deleteItemMutation,\n    items,\n    itemIdField,\n    isSkeleton,\n    loading,\n    setEditingItem,\n    sortBy,\n  }) => {\n    if (loading)\n      return (\n        <List disablePadding dense>\n          {[...Array(3)].map((_, idx) => (\n            <Item\n              context={context}\n              deleteItemMutation={deleteItemMutation}\n              itemIdField={itemIdField}\n              key={idx}\n              isSkeleton={() => true}\n              setEditingItem={setEditingItem}\n            />\n          ))}\n        </List>\n      );\n\n    const itemsArray = [...items]\n      .sort(sortBy)\n      .map((e) => (\n        <Item\n          context={context}\n          deleteItemMutation={deleteItemMutation}\n          itemIdField={itemIdField}\n          key={e[itemIdField]}\n          isSkeleton={isSkeleton}\n          item={e}\n          setEditingItem={setEditingItem}\n        />\n      ));\n\n    return (\n      <StyledDiv>\n        <Virtuoso\n          totalCount={items.length}\n          itemContent={(idx) => itemsArray[idx]}\n          components={{\n            List: forwardRef(({ children, ...props }, ref) => (\n              <List disablePadding dense ref={ref} {...props}>\n                {children}\n              </List>\n            )),\n          }}\n        />\n      </StyledDiv>\n    );\n  };\n","import { Button, Dialog, DialogActions, DialogTitle, IconButton, ListItemText } from \"@material-ui/core\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React, { useState } from 'react';\nimport { truncateString } from '../../util';\nimport { ItemSkeleton } from \"./ItemSkeleton\";\nimport { StyledListItem } from \"./StyledListItem\";\nimport { StyledListItemSecondaryAction } from \"./StyledListItemSecondaryAction\";\n\n/**\n * A ListItem component which can show title, notes and a delete button on hover.\n * Will ask for confirmation on delete.\n */\nexport const BaseListItem = ({\n    primaryTextKey = 'title',\n    secondaryTextKey = 'notes'\n\n}) => function GeneratedBaseListItem({\n    context,\n    deleteItemMutation,\n    itemIdField,\n    isSkeleton,\n    item,\n    setEditingItem }) {\n\n        const [deleteItem] = deleteItemMutation()\n        const [dialogOpen, setDialogOpen] = useState(false)\n\n        /* Avoid destructuring item if it's a skeleton */\n        if (isSkeleton(item)) {\n            return <StyledListItem>\n                <ItemSkeleton />\n            </StyledListItem>\n        }\n\n        const { [primaryTextKey]: primaryText, [secondaryTextKey]: secondaryText } = item\n        const closeDialog = () => setDialogOpen(false)\n\n        return <>\n            <Dialog\n                open={dialogOpen}\n                onClose={closeDialog}>\n                <DialogTitle>Delete '{truncateString(primaryText, 30)}' ?</DialogTitle>\n                <DialogActions>\n                    <Button onClick={() => deleteItem({ [itemIdField]: item[itemIdField], ...context })} color={'primary'}>Delete</Button>\n                    <Button onClick={closeDialog}>Cancel</Button>\n                </DialogActions>\n            </Dialog>\n            <StyledListItem\n                button\n                onClick={() => setEditingItem(item)}\n                $reserveSpace={true}>\n\n                <ListItemText\n                    primary={primaryText}\n                    secondary={secondaryText}\n                    secondaryTypographyProps={{ noWrap: true }} />\n                <StyledListItemSecondaryAction>\n                    <IconButton\n                        edge={'end'}\n                        onClick={e => {\n                            e.stopPropagation();\n                            setDialogOpen(true)\n                        }}>\n                        <DeleteIcon />\n                    </IconButton>\n                </StyledListItemSecondaryAction>\n\n            </StyledListItem>\n        </>\n    }","import { useState } from \"react\";\nimport { AddButton } from \"./../AddButton\";\nimport { BaseItemEdit } from \"./BaseItemEdit\";\nimport { BaseList } from \"./BaseList\";\n\n/* Can't be passed as a default option, otherwise it will continuously trigger re-renders */\nconst DefaultItemEdit = BaseItemEdit({ name: \"\", notes: \"\" });\nconst DefaultList = BaseList();\n\n/**\n * Note: assumes API endpoints take objects as arguments\n *\n * context: argument passed (via spread) to all query/mutation requests\n * defaultItemValues: Object containing all fields (except id) and their default values.\n * Received as a prop on new item addition, and\n * used by BaseItemEdit to determine how many fields to render.\n *\n * List: renderer for list and items.\n * ItemEdit: renderer for editing items.\n * isItemEmpty: used by BaseItemEdit's useAutosave to determine if item should be deleted on close\n * itemIdField: field used by objects and api submission for id\n * isSkeleton: whether temporary object returned by api should be marked as a skeleton.\n * Passed to List\n *\n *\n * */\nexport const GenericList = ({\n  getItemsQuery,\n  createItemMutation,\n  updateItemMutation,\n  deleteItemMutation,\n\n  defaultItemValues,\n  context,\n  sortBy = () => 0,\n\n  List = DefaultList,\n  ItemEdit = DefaultItemEdit,\n  isItemEmpty = (e) => !e.name && !e.notes,\n  itemIdField = \"id\",\n  isSkeleton = (e) => !!e.isSkeleton,\n}) => {\n  const { data: items, isFetching } = getItemsQuery(context);\n  const [editingItem, setEditingItem] = useState(null);\n  const loading = isFetching || !items;\n\n  return (\n    <>\n      {!loading && (\n        <AddButton onClick={() => setEditingItem(defaultItemValues)} />\n      )}\n\n      {editingItem && (\n        <ItemEdit\n          editingItem={\n            editingItem[itemIdField]\n              ? items.find((e) => e[itemIdField] === editingItem[itemIdField])\n              : editingItem\n          }\n          closeEdit={() => void setEditingItem(null)}\n          context={context}\n          isItemEmpty={isItemEmpty}\n          itemIdField={itemIdField}\n          createItemMutation={createItemMutation}\n          updateItemMutation={updateItemMutation}\n          deleteItemMutation={deleteItemMutation}\n        />\n      )}\n\n      <List\n        context={context}\n        updateItemMutation={updateItemMutation}\n        deleteItemMutation={deleteItemMutation}\n        items={items}\n        itemIdField={itemIdField}\n        isSkeleton={isSkeleton}\n        loading={loading}\n        setEditingItem={setEditingItem}\n        sortBy={sortBy}\n      />\n    </>\n  );\n};\n","import {styled as muiStyled} from \"@material-ui/core/styles\";\nimport {Backdrop, CircularProgress, Typography} from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport {BackgroundScreen} from \"./backgroundScreen\";\n\nconst StyledBackdrop = muiStyled(Backdrop)(({theme}) => ({\n    // To cover the app drawer\n    zIndex: theme.zIndex.drawer + 1,\n}));\n\nconst FlexContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 100px;\n`;\n\nconst FlexBackgroundScreen = styled(BackgroundScreen)`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n`;\n\n/**\n * A fullscreen loading backdrop element\n * @param open\n * @param message\n * @param showSpinner\n * @param fullscreen\n * @returns {JSX.Element}\n * @constructor\n */\nexport const Loading = ({\n                            open = true,\n                            message = 'Loading...',\n                            showSpinner = true,\n                            fullscreen = true\n                        }) => {\n\n    let content = <FlexContainer>\n        {showSpinner ? <CircularProgress color=\"inherit\" size={30}/> : null}\n        <Typography variant={'body1'} display={\"block\"} style={{whiteSpace: 'pre-line', textAlign: 'center'}}>{message}</Typography>\n    </FlexContainer>;\n\n    if (!open) return null;\n\n    return fullscreen ?\n        <StyledBackdrop open={open}>\n            {content}\n        </StyledBackdrop>\n        : <FlexBackgroundScreen>\n            {content}\n        </FlexBackgroundScreen>;\n\n};","import { useMemo, useState } from \"react\";\nimport { flow } from \"lodash\";\nimport { noop, sanitizeString } from \"../util\";\nimport { matchSorter } from \"match-sorter\";\nimport TextField from \"@material-ui/core/TextField\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Chip from \"@material-ui/core/Chip\";\nimport styled from 'styled-components'\nimport { Autocomplete } from \"@material-ui/lab\";\nimport PropTypes from 'prop-types'\nimport { useEffect } from \"react\";\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  cursor: default;\n`;\nconst propTypes = {\n    createOption: PropTypes.func,\n    getOptionLabel: PropTypes.func,\n    getOptionSelected: PropTypes.func,\n    getValue: PropTypes.func, // Required if multiple=true (to get the current state in a callback)\n    maxOptionsToShow: PropTypes.number,\n    multiple: PropTypes.bool,\n    onChange: PropTypes.func.isRequired,\n    options: PropTypes.array.isRequired,\n    renderProps: PropTypes.object, // error state, helper text\n    skipRenderOption: PropTypes.func, // Whether to skip rendering an option (e.g. skeleton)\n    value: PropTypes.any\n};\n\n/**\n * Will not render options marked as 'isSkeleton' by default\n */\nexport const AutocompleteWithCreate = ({\n    createOption,\n    error, // Not used\n    getOptionLabel = e => e,\n    getOptionSelected = (a, b) => a === b,\n    getValue,\n    helperText, // Not used\n    maxOptionsToShow = 10,\n    multiple = false,\n    onChange,\n    options: _options,\n    renderProps,\n    skipRenderOption = e => e.isSkeleton,\n    value,\n    ...props\n}) => {\n\n    /* Filter out options to skip */\n    const options = useMemo(() => _options.filter(e => !skipRenderOption(e)), [_options, skipRenderOption])\n\n    let [loading, setLoading] = useState(false);\n\n    // Optimization for filtering through option labels\n    const sanitizedOptionLabels = useMemo(() => options.map(flow(getOptionLabel, sanitizeString)), [options, getOptionLabel]);\n\n    /* Needed for getting option label for single autocomplete when option is being added (i.e. _name is set)*/\n    const _getOptionLabel = option => getOptionLabel(option) ?? option._name;\n\n    /* Needed to detect options with _name (e.g. currently being added),\n     * otherwise when creating an option while another is being created,\n     * useAutocomplete returns 'remove-option' instead*/\n    const _getOptionSelected = (option, value) =>\n        getOptionSelected(option, value) ||\n            /*An option is currently being created.\n            * Ternary is needed because undefined === undefined*/\n            value._name ? value._name === option._name : false;\n\n    const filterOptions = (options, state) => {\n        let input = state.inputValue;\n        //matchSorter already removes accents, spaces and converts to lowercase\n        let filtered = input ? matchSorter(options, input, { keys: [getOptionLabel] }) : options;\n\n        if (maxOptionsToShow) {\n            filtered = filtered.slice(0, maxOptionsToShow) //TODO add 'Scroll for more' functionality\n        }\n\n        /*Suggest adding option ONLY if input is NOT blank,\n        NOT in existing options (comparing with diacritics stripped),\n        AND createOption is provided*/\n        if (createOption &&\n            input &&\n            !sanitizedOptionLabels.includes(input)) {\n            createOption && filtered.push({\n                _name: state.inputValue.trim(),\n                _isNew: true,\n                _justAdded: true,\n            })\n        }\n\n        return filtered\n    };\n\n    const renderInput = params => <TextField\n        {...params}\n        {...renderProps}\n        InputProps={{\n            ...params.InputProps,\n            ...renderProps?.InputProps,\n            endAdornment:\n                <>\n                    {loading && <CircularProgress size={20} />}\n                    {params.InputProps.endAdornment}\n                </>\n        }}\n    />;\n\n    const renderTags = (tagValue, getTagProps) => tagValue.map((option, index) => {\n        let { onDelete, ...rest } = getTagProps({ index });\n        return <Chip\n            {...rest}\n            size={\"small\"}\n            variant={option._isNew ? 'outlined' : 'default'}\n            onDelete={option._isNew ? noop : onDelete} // onDelete must be set for deleteIcon to appear, but I don't want it to actually delete a newly added option.\n            deleteIcon={option._isNew ? <StyledCircularProgress size={16} /> : null}\n            label={option._isNew ?\n                `Adding ${option._name}...` :\n                getOptionLabel(option)}\n        />\n    }\n    );\n\n    const onOptionChange = (event, newValue) => {\n        /* A click will never trigger a 'create-option' event.\n         * Only Enter will. So it's useless relying on that.\n         *\n         * The component must be controlled, or else book search\n         * will not be able to add authors.*/\n\n\n        if (multiple) {\n\n            // Find all the options with _justAdded === true, call createOption for it and remove the flag\n            for (let i = 0; i < newValue.length; i++) {\n                let el = newValue[i]\n                if (!el._justAdded) continue;\n                el._justAdded = false;\n                createOption(el._name)\n                    .then(obj => {\n                        // Get current state and then replace new option with server created object (it now has id)\n                        onChange(getValue().map(e => e._name === el._name ? obj : e))\n                    })\n            }\n\n\n            let el = newValue.find(e => e._justAdded);\n            if (el) {\n                el._justAdded = false;\n                createOption(el._name)\n                    .then(obj => {\n                        // Get current state and then replace new option with server created object (it now has id)\n                        onChange(getValue().map(e => e._name === el._name ? obj : e))\n                    })\n\n            }\n\n        } else if (newValue && newValue._justAdded) {\n\n            // New option added to single value autocomplete (will be disabled while loading)\n            setLoading(true);\n            createOption(newValue._name)\n                .then(obj => {\n                    // Input is disabled while this is happening\n                    onChange(obj);\n                    setLoading(false)\n                })\n        }\n\n        /*No new options were created.\n        * Setting newValue here will result in some options having _name, _justAdded, _isNew properties.\n        * Submission is prevented while in such a state, by Yup schema validation.*/\n        onChange(newValue)\n    };\n\n    // Start option creation on first mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => onOptionChange(undefined, value), [])\n\n    return <Autocomplete\n        clearOnBlur // Used together with freeSolo\n        disabled={!multiple && loading}\n        filterOptions={filterOptions}\n        freeSolo // This fixes the 'none of the options match with ...' error\n        getOptionLabel={_getOptionLabel}\n        getOptionSelected={_getOptionSelected}\n        loading={loading}\n        multiple={multiple}\n        onChange={onOptionChange}\n        options={options}\n        renderInput={renderInput}\n        renderOption={option => option._isNew ? `Add '${option._name}'` : getOptionLabel(option)}\n        renderTags={renderTags}\n        value={value}\n        {...props}\n    />\n}\n    ;\n\nAutocompleteWithCreate.propTypes = propTypes;","import TextField from \"@material-ui/core/TextField\";\nimport {InputAdornment} from \"@material-ui/core\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\nexport const TextFieldClearable = ({onChange, ...props}) =>\n    <TextField\n        {...props}\n        onChange={onChange}\n        InputProps={{\n            ...props.InputProps,\n            endAdornment:\n                <InputAdornment position={'end'}>\n                    {props.value &&\n                    <ClearIcon style={{cursor: 'pointer'}} onClick={() => onChange('')}/>}\n                    {props.InputProps?.endAdornment}\n                </InputAdornment>\n        }}\n    />\n;","import {TextField} from \"@material-ui/core\";\nimport {useEffect, useRef, useState} from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledTextField = styled(TextField)`\n  \n  ${({$ellipsis}) => $ellipsis ? `\n  .MuiInputBase-input {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }`: null}\n`;\n\n/*TextField which switches to multiline when focused, and singleline with ellipsis otherwise.*/\nexport const TextFieldMultilineEllipsis = ({onBlur, onFocus, ...props}) => {\n    const [focused, setFocused] = useState(false);\n    const [focusPos, setFocusPos] = useState(0);\n    const inputRef = useRef();\n\n    useEffect(() => {\n        if (!focused) return\n        inputRef.current.focus() // Required to focus on the new textarea\n        inputRef.current.setSelectionRange(focusPos, focusPos); // Maintain original cursor position\n    }, [focusPos, focused]);\n\n    return <StyledTextField\n        {...props}\n        $ellipsis={!focused}\n        multiline={focused}\n        inputRef={inputRef}\n        onFocus={e => {\n            setFocused(true)\n            e.target.selectionStart && setFocusPos(e.target.selectionStart)\n        }}\n        onBlur={() => setFocused(false)}\n    />\n};","import {\n    ListItem,\n    ListItemText\n} from \"@material-ui/core\"\nimport NoteIcon from '@material-ui/icons/Note'\nimport React from \"react\"\nimport styled from 'styled-components'\n\nconst NumberCircle = styled.span`\n  margin: auto 5px;\n  border: 2px solid rgba(255, 255, 255, 0.4);\n  padding: 3px;\n  border-radius: 20%;\n  font-weight: lighter;\n`\n\n/*Recursively sort Genre objects*/\nexport const recursiveSort = (arr, compareFn, childrenKey = 'children') => {\n    let mapped = arr.map(e => e[childrenKey].length ? {\n        ...e,\n        [childrenKey]: recursiveSort(e[childrenKey], compareFn, childrenKey)\n    } : e)\n    return mapped.sort(compareFn)\n}\n\n/*Get array of ancestors, from top level to direct parent*/\nexport const getAncestors = (e, genres) => {\n    let arr = []\n    let currentEl = e\n    while (currentEl.parent) {\n        // eslint-disable-next-line no-loop-func\n        let parent = genres.find(p => p.id === currentEl.parent);\n        arr.unshift(parent.name)\n        currentEl = parent\n    }\n    return arr\n}\n\n/*Add extra contextual information to the genres object*/\nexport const mapGenres = (e, genres) => {\n    let ancestors = getAncestors(e, genres)\n    return ({\n        ...e,\n        ancestors, /*for display*/\n        fullName: [...ancestors, e.name].join(' '), /*for sorting*/\n    })\n}\n\n/*Will also get book counts for each genre, with each parent's including the sum of their children*/\nexport const getTreeDataFromGenres = (setEditingItem) => (genres, books) => {\n    let genreMap = new Map();\n    let root = [];\n    let bookCountForGenre = {};\n\n    /*Get count of books for each genre*/\n    books.forEach(e => e.genres.forEach(id => id in bookCountForGenre ?\n        bookCountForGenre[id] += 1 :\n        bookCountForGenre[id] = 1));\n\n    /*Clone genres, add React-Sortable-Tree specific props*/\n    genres.forEach(e => genreMap.set(e.id, {\n        ...e,\n        expanded: true,\n        children: [],\n        bookCount: bookCountForGenre[e.id] ?? 0,\n        title: ({ node }) => <ListItem\n            disableGutters\n            dense\n            onClick={() => setEditingItem(node)}\n            button>\n            <NumberCircle>{node.bookCount}</NumberCircle>\n            <ListItemText primary={`${node.name}`} />\n            {node.notes &&\n                <NoteIcon />}\n        </ListItem>\n    }));\n\n    let addCount = (v, numToAdd) => {\n        if (!v.parent)\n            return;\n        let parent = genreMap.get(v.parent);\n        parent.bookCount += numToAdd;\n        addCount(parent, numToAdd);\n    };\n\n    /* Start creating the tree\n     * Also add descendent counts*/\n    genreMap.forEach(v => {\n        if (v.parent) {\n            genreMap.get(v.parent).children.push(v);\n            addCount(v, v.bookCount);\n        } else {\n            root.push(v);\n        }\n    });\n\n    return root;\n};\n","import DateFns from '@date-io/date-fns';\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport {\n    Button,\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    FormControlLabel,\n    FormHelperText,\n    IconButton,\n    Snackbar,\n    Typography\n} from \"@material-ui/core\";\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport { Alert } from \"@material-ui/lab\";\nimport { KeyboardDatePicker } from \"@material-ui/pickers/DatePicker\";\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers/MuiPickersUtilsProvider\";\nimport { isEmpty } from \"lodash\";\nimport React, { useCallback, useState } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\nimport styled from \"styled-components\";\nimport { AutocompleteWithCreate } from \"../../shared/components/AutocompleteWithCreate\";\nimport { DialogBlurResponsive } from \"../../shared/components/DialogBlurResponsive\";\nimport { TextFieldClearable } from \"../../shared/components/textFieldClearable\";\nimport { TextFieldMultilineEllipsis } from \"../../shared/components/textFieldMultilineEllipsis\";\nimport { useCreateAuthorMutation, useCreateBookMutation, useCreateGenreMutation, useCreateTypeMutation, useGetAuthorsQuery, useGetGenresQuery, useGetTypesQuery, useUpdateBookMutation } from './literatureApi';\nimport {\n    BOOK_FIELDS,\n    DEFAULT_BOOK_VALUES,\n    isBookDataEqual,\n    transformFromServer,\n    transformToServer,\n    YUP_SCHEMA\n} from \"./schema\";\nimport { mapGenres } from \"./utils\";\n\nconst FieldContainer = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);\n  grid-template-areas: \n    \"${BOOK_FIELDS.title} ${BOOK_FIELDS.title}\"\n    \"${BOOK_FIELDS.authors} ${BOOK_FIELDS.type}\"\n    \"${BOOK_FIELDS.description} ${BOOK_FIELDS.description}\"\n    \"${BOOK_FIELDS.genres} ${BOOK_FIELDS.read_next}\"\n    \"${BOOK_FIELDS.rating} ${BOOK_FIELDS.date_read} \"\n    \"${BOOK_FIELDS.image_url} ${BOOK_FIELDS.published}\"\n    \"${BOOK_FIELDS.google_id} ${BOOK_FIELDS.goodreads_book_id}\"\n    \"${BOOK_FIELDS.series} ${BOOK_FIELDS.series_position}\"\n    \"${BOOK_FIELDS.my_review} ${BOOK_FIELDS.my_review}\"\n    \"${BOOK_FIELDS.notes} ${BOOK_FIELDS.notes}\";\n  gap: 20px 10px;\n  margin: 10px;\n`;\n\nconst ButtonFlexDiv = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nexport const AddBook = ({\n    bookData,\n    onClose,\n    setAddedSnackbar\n}) => {\n\n    /* Books.js will prevent AddBook.js displaying until these queries have loaded initially,\n    so they're guaranteed to be defined */\n    const { data: authors } = useGetAuthorsQuery()\n    const { data: genres } = useGetGenresQuery()\n    const { data: types } = useGetTypesQuery()\n\n    const [createBook] = useCreateBookMutation()\n    const [updateBook] = useUpdateBookMutation()\n    const [createAuthor] = useCreateAuthorMutation()\n    const [createGenre] = useCreateGenreMutation()\n    const [createType] = useCreateTypeMutation()\n\n    const {\n        handleSubmit,\n        control,\n        getValues,\n        setValue,\n        formState: {\n            isDirty\n        },\n        watch\n    } = useForm({\n        resolver: yupResolver(YUP_SCHEMA),\n        defaultValues: isEmpty(bookData) ? DEFAULT_BOOK_VALUES : transformFromServer(bookData, {\n            authors,\n            genres,\n            types\n        }),\n        mode: 'onTouched',\n    });\n\n    const [errorSnackbar, setErrorSnackbar] = useState(false);\n    const [saveDialog, setSaveDialog] = useState(false);\n    const [infoDialog, setInfoDialog] = useState(false);\n\n    const sortedGenres = genres.map(e => mapGenres(e, genres)).sort((a, b) => a.fullName.localeCompare(b.fullName))\n\n    const onSubmit = handleSubmit(\n        data => {\n            if (!isDirty ||\n                /*Untouched form, guaranteed no changes*/\n\n                /*Editing book, no actual changes made*/\n                (!isEmpty(bookData) && isBookDataEqual(bookData, transformToServer(data)))) {\n                setAddedSnackbar({ message: 'No changes were detected' });\n                onClose();\n                return\n            }\n\n            let transformedData = transformToServer(data);\n\n            if (isEmpty(bookData) || !('id' in bookData)) {\n                /*User is adding book*/\n                createBook(transformedData)\n                    .unwrap()\n                    .then(() => {\n                        setAddedSnackbar({ message: 'Book added' });\n                    })\n                onClose()\n            } else {\n                /* Changes were made in editing book*/\n                updateBook({ id: bookData['id'], ...transformedData })\n                    .unwrap()\n                    .then(() => {\n                        setAddedSnackbar({ message: 'Changes saved' });\n                    })\n                }\n                onClose()\n        },\n        () => {\n            setErrorSnackbar(true)\n        });\n\n\n    const handleDiscard = () => isDirty ?\n        setSaveDialog(true) :\n        onClose(); //Untouched form\n\n\n    const footer = <ButtonFlexDiv>\n        <IconButton\n            tabIndex={-1}\n            onClick={() => setInfoDialog(true)}>\n            <InfoOutlinedIcon />\n        </IconButton>\n        <Button onClick={handleDiscard}>Discard</Button>\n        <Button onClick={onSubmit} color={'primary'}> Save </Button>\n    </ButtonFlexDiv>;\n\n    const StandardField = useCallback(({ Component, name, label, getComponentProps = () => ({}), ...props }) =>\n        <Controller\n            control={control}\n            name={name}\n            render={controllerProps => {\n                const { field: { ref, ...field }, fieldState: { error } } = controllerProps\n                return <Component\n                    error={Boolean(error)}\n                    label={label}\n                    helperText={error?.message}\n                    size={'small'}\n                    style={{ gridArea: field.name }}\n                    variant={'outlined'}\n                    {...props}\n                    {...field}\n                    {...getComponentProps({ ...controllerProps, label })} />\n            }} />, [control])\n\n    return <>\n        <Dialog\n            open={saveDialog}\n            onClose={() => setSaveDialog(false)}>\n            <DialogTitle>Discard changes?</DialogTitle>\n            <DialogActions>\n                <Button onClick={() => {\n                    setAddedSnackbar({ message: 'Changes discarded' });\n                    onClose()\n                }}> Discard </Button>\n                <Button onClick={() => setSaveDialog(false)} color={'primary'}>Cancel</Button>\n            </DialogActions>\n        </Dialog>\n        <Dialog\n            open={infoDialog}\n            onClose={() => setInfoDialog(false)}>\n            <DialogTitle>Notes on fields</DialogTitle>\n            <DialogContent>\n                <DialogContentText component={'div'}>\n                    Series:\n                    <ul>\n                        <li>For new ones I wish to read, just store the first book.</li>\n                        <li>If I like it, add just the next book (read_next=true)</li>\n                        <li>As I complete each book in the series, it is added.</li>\n                        <li>If I don't like it halfway, I don't add any further books (i.e. the series is left\n                            hanging)\n                        </li>\n                        <li>Series which I have completed should have all books added.</li>\n                    </ul>\n\n                    Authors with many works:\n                    <ul>\n                        <li>The anthology is listed, if I plan to read it</li>\n                        <li>All works I have read/wish to read are also listed.</li>\n                        <li>I could also make comments in the author object's notes.</li>\n                    </ul>\n\n                    Unknown read date\n                    <ul>\n                        <li>put as 01/01/2000</li>\n                    </ul>\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    onClick={() => setInfoDialog(false)}>\n                    Close\n                </Button>\n            </DialogActions>\n\n        </Dialog>\n        <Snackbar\n            open={errorSnackbar}\n            onClose={() => setErrorSnackbar(false)}\n            autoHideDuration={3000}>\n            <Alert\n                severity={'error'}\n                onClose={() => setErrorSnackbar(false)}>\n                Check errors before submitting\n            </Alert>\n        </Snackbar>\n        <DialogBlurResponsive\n            open\n            footer={footer}\n            onClose={handleDiscard}>\n            <FieldContainer>\n\n                <StandardField\n                    name={BOOK_FIELDS.title}\n                    label={'Title'}\n                    Component={TextFieldMultilineEllipsis} />\n\n                <StandardField\n                    name={BOOK_FIELDS.authors}\n                    label={'Authors'}\n                    Component={AutocompleteWithCreate}\n\n                    autoComplete\n                    autoHighlight\n                    createOption={name => createAuthor({ name }).unwrap()}\n                    filterSelectedOptions\n                    getComponentProps={({ field: { name }, fieldState: { error }, label }) => ({\n                        getValue: () => getValues(name),\n                        renderProps: {\n                            label,\n                            variant: 'outlined',\n                            error: Boolean(error),\n                            helperText: error ? 'Creating author(s)...' : null\n                        }\n                    })}\n                    getOptionLabel={e => e.name}\n                    getOptionSelected={(option, value) => option.id === value.id}\n                    multiple={true}\n                    options={authors}\n                />\n\n                <StandardField\n                    name={BOOK_FIELDS.type}\n                    label={'Type'}\n                    Component={AutocompleteWithCreate}\n\n                    autoComplete\n                    autoHighlight\n                    createOption={name => createType({ name }).unwrap()}\n                    filterSelectedOptions\n                    getComponentProps={({field: { name }, fieldState: { error }, label }) => ({\n                        getValue: () => getValues(name),\n                        renderProps: {\n                            label,\n                            variant: 'outlined',\n                            error: Boolean(error),\n                            helperText: error?.message\n                        }\n                    })}\n                    getOptionLabel={e => e.name}\n                    getOptionSelected={(option, value) => option.id === value.id}\n                    maxOptionsToShow={0}\n                    multiple={false}\n                    options={types} />\n\n                <StandardField\n                    name={BOOK_FIELDS.description}\n                    label={'Description'}\n                    Component={TextFieldMultilineEllipsis} />\n\n                {/*todo Very hacky. Write this better*/}\n                <StandardField\n                    name={BOOK_FIELDS.genres}\n                    label={'Genres'}\n                    Component={AutocompleteWithCreate}\n\n                    autoComplete\n                    autoHighlight\n                    createOption={name => createGenre({ name }).unwrap()}\n                    filterSelectedOptions\n                    getComponentProps={({ field: { name }, fieldState: { error }, label }) => ({\n                        getValue: () => getValues(name),\n                        renderProps: {\n                            label,\n                            variant: 'outlined',\n                            error: Boolean(error),\n                            helperText: error ? 'Creating genre(s)...' : null\n                        }\n                    })}\n                    getOptionLabel={e => e.name}\n                    getOptionSelected={(option, value) => option.id === value.id}\n                    groupBy={e => e.ancestors?.length ? e.ancestors.join(' > ') : ''}\n                    maxOptionsToShow={0}\n                    multiple={true}\n                    options={sortedGenres}\n                    renderOption={e => e.ancestors?.length ?\n                        <Typography style={{ marginLeft: '20px' }}>{e.name}</Typography> : (e.name || `Add '${e._name}'`)}\n\n                />\n\n                <Controller\n                    name={BOOK_FIELDS.read_next}\n                    control={control}\n                    render={({\n                        field: { onChange, value, ...field },\n                        fieldState: { error },\n                    }) => <>\n                            <FormControlLabel\n                                {...field}\n                                checked={value}\n                                control={<Checkbox />}\n                                label={'Read next?'}\n                                labelPlacement={'end'}\n                                onChange={e => {\n                                    setValue(BOOK_FIELDS.date_read, DEFAULT_BOOK_VALUES[BOOK_FIELDS.date_read])\n                                    onChange(e)\n                                }}\n                                style={{ gridArea: field.name }}\n                            />\n                            <FormHelperText\n                                error={Boolean(error)}>\n                                {error?.message}\n                            </FormHelperText>\n                        </>} />\n\n                <StandardField\n                    name={BOOK_FIELDS.rating}\n                    label={'Rating'}\n                    Component={TextFieldClearable} />\n\n                <MuiPickersUtilsProvider utils={DateFns}>\n                    <StandardField\n                        name={BOOK_FIELDS.date_read}\n                        label={'Date Read'}\n                        Component={KeyboardDatePicker}\n\n                        autoOk\n                        disabled={watch(BOOK_FIELDS.read_next)}\n                        disableFuture\n                        format={'dd/MM/yyyy'}\n                        placeholder={'dd/mm/yyyy'}\n                        inputVariant={'outlined'}\n                    />\n\n                </MuiPickersUtilsProvider>\n\n                <StandardField\n                    name={BOOK_FIELDS.image_url}\n                    label={'Image URL'}\n                    Component={TextFieldClearable}\n                    type={'url'} />\n\n                <StandardField\n                    name={BOOK_FIELDS.published}\n                    label={'Year Published'}\n                    Component={TextFieldClearable} />\n\n                <StandardField\n                    name={BOOK_FIELDS.google_id}\n                    label={'Google ID'}\n                    Component={TextFieldClearable} />\n\n                <StandardField\n                    name={BOOK_FIELDS.goodreads_book_id}\n                    label={'Goodreads ID'}\n                    Component={TextFieldClearable} />\n\n                <StandardField\n                    name={BOOK_FIELDS.series}\n                    label={'Series Name'}\n                    Component={TextFieldClearable} />\n\n                <StandardField\n                    name={BOOK_FIELDS.series_position}\n                    label={'Series Position'}\n                    Component={TextFieldClearable} />\n\n                <StandardField\n                    name={BOOK_FIELDS.my_review}\n                    label={'My Review'}\n                    Component={TextFieldMultilineEllipsis}\n                    placeholder={'Not good, read others, highlight specific chapters, etc'} />\n\n                <StandardField\n                    name={BOOK_FIELDS.notes}\n                    label={'Notes'}\n                    Component={TextFieldMultilineEllipsis}\n                    placeholder={'Specific edition, comments on metadata, somebody recommended me, want to buy etc'} />\n\n            </FieldContainer>\n        </DialogBlurResponsive>\n    </>\n};\n","import styled from \"styled-components\";\nimport { capitalize } from \"lodash\"\nimport { Button, Card, CardActionArea, CardActions, CardContent, CircularProgress, Typography } from \"@material-ui/core\";\nimport { useEffect, useState } from \"react\";\n\n\nconst StyledCard = styled(Card)`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n\nconst StyledCardContent = styled(CardContent)`\n  height: 100%;\n`;\n\nconst Description = styled(CardContent)`\n  display: ${({ $empty }) => $empty ? 'flex' : 'block'};\n  justify-content: center;\n  align-items: center;\n  overflow-y: auto;\n  height: ${({ $maxHeight }) => `${$maxHeight}px` || 'initial'};\n`;\n\nconst StyledActionArea = styled(CardActionArea)`\n  height: 100%;\n`;\n\nconst Image = styled.img`\n  height: 200px;\n`\n\nconst ImageContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 10px 0;\n  height: 200px;\n`;\nconst Title = styled(Typography)`\n  line-height: 1rem;\n`;\n\nconst Authors = styled(Typography)`\n  font-style: italic;\n`;\n\nexport const BookResult = ({ onSearchResultClick, result, searchLoading }) => {\n  let { authors = [], from, image_url, published, title, description } = result;\n\n  const [detailView, setDetailView] = useState(false);\n  const [maxHeight, setMaxHeight] = useState();\n  const [loading, setLoading] = useState(false);\n\n  const onClick = () => {\n    setLoading(true);\n    onSearchResultClick(result)\n  };\n\n  useEffect(() => void setDetailView(false), [result]);\n\n  return <StyledCard>\n    <StyledActionArea onClick={() => setDetailView(!detailView)}>\n      {detailView ?\n        <Description $maxHeight={maxHeight} $empty={!Boolean(description)}>\n          <Typography variant={'body2'}>{description ? description : 'No description provided'}</Typography>\n        </Description> :\n        <StyledCardContent ref={ref => ref && setMaxHeight(ref.offsetHeight)}>\n          <Typography align={'right'} color={'textSecondary'} variant={'body2'}>{capitalize(from)}</Typography>\n          <ImageContainer>{image_url ?\n            <Image src={image_url} alt={''} /> :\n            <Typography variant={'body2'}>No cover</Typography>}</ImageContainer>\n          <Title align={'center'} variant={'subtitle2'}>{title} {published ? `(${published})` : null}</Title>\n          <Authors align={'center'} variant={'body2'}>{authors.length ? authors.reduce((acc, cur) => acc + `, ${cur}`) : ''}</Authors>\n        </StyledCardContent>}\n    </StyledActionArea>\n    <CardActions>\n      <Button onClick={onClick} disabled={searchLoading}>Select</Button>\n      {loading && <CircularProgress size={20} />}\n    </CardActions>\n  </StyledCard>\n};\n","import { Button, CircularProgress, TextField } from \"@material-ui/core\";\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Autocomplete } from \"@material-ui/lab\";\nimport { mergeWith } from \"lodash\";\nimport { matchSorter } from \"match-sorter\";\nimport styled from \"styled-components\";\nimport { DialogBlurResponsive } from \"../../shared/components/DialogBlurResponsive\";\nimport { sanitizeString } from \"../../shared/util\";\nimport { BookResult } from \"./BookResult\";\nimport { useGetAuthorsQuery, useGetBooksQuery, useGoodreadsBookInfoMutation, useGoogleBookInfoMutation, useSearchBookMutation } from './literatureApi';\nimport { BOOK_FIELDS, DEFAULT_BOOK_VALUES } from \"./schema\";\n\nconst BookResults = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  grid-auto-rows: 1fr;\n  gap: 10px 10px;\n  margin: 10px 0;\n`;\n\nconst StyledForm = styled.form`\n  padding: 10px 0;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport const SearchBooks = ({ closeSearch, setBookData }) => {\n\n    const { data: authors = [] } = useGetAuthorsQuery()\n    const { data: books = [] } = useGetBooksQuery()\n\n    /* Mutation, because I don't want cached results\n    (data is reset to undefined on trigger() for mutations) */\n    const [search, { data: searchResults, isLoading: searchLoading }] = useSearchBookMutation()\n    // These methods get 'published', 'series_name', 'series_position', 'description'\n    const [getGoogleBookInfo, { isLoading: googleBookInfoLoading }] = useGoogleBookInfoMutation()\n    const [getGoodreadsBookInfo, { isLoading: goodreadsBookInfoLoading }] = useGoodreadsBookInfoMutation()\n\n    /* Get book description from results, and add new authors \n    Returns filled book template for use in AddBooks*/\n    /* TODO Note: Goodreads is getting deprecated...*/\n    const getBookInfoAndCreateAuthors = async book => {\n        const {\n            from,\n            goodreads_work_id: workId,\n            goodreads_book_id: bookId,\n            ISBN_10,\n            ISBN_13\n        } = book;\n\n        const searchMutation = from === 'google' ?\n            // Use ISBN_13 if available, otherwise ISBN_10\n            getGoogleBookInfo(ISBN_13 || ISBN_10) :\n            getGoodreadsBookInfo({ workId, bookId })\n\n        const apiBookInfo = await searchMutation.unwrap()\n\n        //Prefer api values (srcVal) over existing values (objVal)\n        const mergedBook = mergeWith({}, book, apiBookInfo, (objVal, srcVal) => srcVal || objVal);\n\n        const existingAuthors = []; // [] of {id, name, notes}\n        const authorsToCreate = []; // [] of String\n\n        mergedBook.authors.forEach(mergedBookAuthor => {\n            /* Check if authors in the book result already exist */\n            const author = authors.find(existingAuthor => sanitizeString(existingAuthor.name) === sanitizeString(mergedBookAuthor));\n            if (author) {\n                // Author already exists, push id\n                existingAuthors.push(author.id)\n            } else {\n                // Author doesn't exist, to create\n                /* authorsToCreate is made in a format which will trigger creation upon passing to AutocompleteWithCreate */\n                authorsToCreate.push({_justAdded: true, _name: mergedBookAuthor, _isNew: true})\n            }\n        });\n\n        /* Generate a book template from default values */\n        const bookTemplate = Object.assign({}, DEFAULT_BOOK_VALUES);\n\n        /* Then copy selected truthy properties from mergedBook */\n        [\n            BOOK_FIELDS.description,\n            BOOK_FIELDS.google_id,\n            BOOK_FIELDS.goodreads_book_id,\n            BOOK_FIELDS.image_url,\n            BOOK_FIELDS.published,\n            BOOK_FIELDS.title,\n            BOOK_FIELDS.series,\n            BOOK_FIELDS.series_position\n        ].forEach(e => mergedBook[e] && (bookTemplate[e] = mergedBook[e]));\n        \n        bookTemplate[BOOK_FIELDS.authors] = [...existingAuthors, ...authorsToCreate];\n        console.log(bookTemplate)\n        return bookTemplate\n    }\n\n    const onSearch = e => {\n        e.preventDefault();\n        search(e.target.elements.search.value)\n    };\n\n    const onSearchResultClick = book => {\n        getBookInfoAndCreateAuthors(book)\n            .then(r => {\n                setBookData(r);\n                closeSearch()\n            })\n    };\n\n    const footer = <Footer>\n        <Button\n            onClick={() => {\n                setBookData({});\n                closeSearch()\n            }}>\n            Add manually\n        </Button>\n        <Button\n            onClick={closeSearch}\n            color={'primary'}>\n            Close\n        </Button>\n    </Footer>;\n\n    return <>\n        <DialogBlurResponsive\n            open\n            onClose={closeSearch}\n            footer={footer}>\n            <StyledForm onSubmit={onSearch}>\n                <Autocomplete\n                    autoComplete\n                    filterSelectedOptions\n                    filterOptions={(options, state) => state.inputValue ?\n                        matchSorter(options, state.inputValue.trim()).slice(0, 3) : []}\n                    freeSolo\n                    options={books.map(e => e.title)}\n                    renderInput={params => <TextField\n                        {...params}\n                        autoFocus\n                        disabled={searchLoading}\n                        fullWidth\n                        InputProps={{\n                            ...params.InputProps,\n                            startAdornment: <SearchIcon />,\n                            endAdornment: <>\n                                {searchLoading && <CircularProgress size={25} />}\n                                {params.InputProps.endAdornment}\n                            </>\n                        }}\n                        label={'Search'}\n                        name={'search'}\n                        variant={'outlined'}\n                    />}\n                />\n            </StyledForm>\n            {searchResults && <BookResults>\n                {searchResults.map((result, idx) => {\n                    return <BookResult\n                        result={result}\n                        onSearchResultClick={onSearchResultClick}\n                        searchLoading={googleBookInfoLoading || goodreadsBookInfoLoading}\n                        key={idx}\n                    />\n                })}\n            </BookResults>}\n        </DialogBlurResponsive>\n    </>\n};","import { Checkbox, Fab, FormControlLabel, Snackbar, TableContainer, TextField } from \"@material-ui/core\";\nimport { ThemeProvider, unstable_createMuiStrictModeTheme as createMuiTheme } from '@material-ui/core/styles'; //todo replace with v5 when out\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ErrorOutlineOutlinedIcon from '@material-ui/icons/ErrorOutlineOutlined';\nimport { Alert, Autocomplete } from \"@material-ui/lab\";\nimport { isBefore, parseISO, subMonths, subWeeks, subYears } from 'date-fns';\nimport { matchSorter } from \"match-sorter\";\nimport MUIDataTable, { debounceSearchRender } from \"mui-datatables\";\nimport { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Waypoint } from 'react-waypoint';\nimport styled from 'styled-components';\nimport { BACKGROUND_COLOR } from \"../../shared/components/backgroundScreen\";\nimport { formatDistanceToNowPretty } from \"../../shared/util\";\nimport { Loading } from '../../shared/components/Loading';\nimport { AddBook } from \"./AddBook\";\nimport { useDeleteBookMutation, useGetAuthorsQuery, useGetBooksQuery, useGetGenresQuery, useGetTypesQuery } from './literatureApi';\nimport { selectDisplayedColumns, setDisplayedColumn } from './literatureSlice';\nimport { BOOK_FIELDS } from \"./schema\";\nimport { SearchBooks } from \"./SearchBooks\";\n\nconst StyledTableContainer = styled(TableContainer)`\n  ${BACKGROUND_COLOR};\n`;\n \nconst StyledFab = styled(Fab)`\n  position: fixed;\n  z-index: 1;\n  bottom: 20px;\n  right: 20px;\n`;\n\n// TODO books in a series should be collapsible\n\n/**\n * Book search, addition, table view/sort\n */\nexport const Books = () => {\n\n    const dispatch = useDispatch()\n    const displayedColumns = useSelector(selectDisplayedColumns)\n\n    /* I have to set a default value, because useMemo below cannot be called conditionally */\n    const { data: books = [], isLoading: booksLoading } = useGetBooksQuery()\n    const { data: authors = [], isLoading: authorsLoading } = useGetAuthorsQuery()\n    const { data: genres = [], isLoading: genresLoading } = useGetGenresQuery()\n    const { data: types = [], isLoading: typesLoading } = useGetTypesQuery()\n    const [deleteBook] = useDeleteBookMutation()\n\n    const [searchBookOpen, setSearchBookOpen] = useState(false);\n    const [bookData, setBookData] = useState(null);\n    const [addedSnackbar, setAddedSnackbar] = useState(null);\n    const [filteredItemsLength, setFilteredItemsLength] = useState();\n    const [numBooksToShow, setNumBooksToShow] = useState(10);\n\n    const loading = booksLoading || authorsLoading || genresLoading || typesLoading\n\n    const dateOptions = useMemo(() => [\n        {\n            name: 'All',\n            date: new Date(0),\n        },\n        {\n            name: 'Last week',\n            date: subWeeks(new Date(), 1)\n        },\n        {\n            name: 'Last month',\n            date: subMonths(new Date(), 1)\n        },\n        {\n            name: 'Last year',\n            date: subYears(new Date(), 1)\n        }\n    ], [])\n\n    const options = useMemo(() => ({\n        count: numBooksToShow,\n        customFooter: () =>\n            <Waypoint\n                bottomOffset={-400}\n                scrollableAncestor={'window'}\n                onEnter={() => setNumBooksToShow(row => row + 10)}> \n                <tfoot /> \n            </Waypoint>,\n        customSearchRender: debounceSearchRender(200),\n        draggableColumns: {\n            enabled: true,\n        },\n        onFilterChange: () => setNumBooksToShow(20),\n        onRowClick: (rowData, { dataIndex }) =>\n            setBookData(books[dataIndex]),\n        onRowsDelete: (rowsDeleted, data, newTableData) => rowsDeleted.data.forEach(e => deleteBook({ id: books[e.dataIndex].id })),\n        onTableChange: (action, tableState) => setFilteredItemsLength(tableState.displayData.length),\n        onViewColumnsChange: (changedColumn, action) =>\n            dispatch(setDisplayedColumn(changedColumn, action === 'add')),\n        pagination: false,\n        responsive: 'simple',\n        setTableProps: () => ({\n            padding: 'none',\n            size: 'small',\n        }),\n        searchPlaceholder: `Search ${books.length} items`,\n        tableBodyMaxHeight: '100%'\n    }), [books, deleteBook, dispatch, numBooksToShow]);\n\n    const columns = useMemo(() => [\n        {\n            label: 'Cover',\n            name: BOOK_FIELDS.image_url,\n            options: {\n                filter: false,\n                searchable: false,\n                sort: false,\n                customBodyRenderLite: dataIndex => books[dataIndex][BOOK_FIELDS.image_url] ?\n                    <img alt={''} src={books[dataIndex][BOOK_FIELDS.image_url]} style={{ maxHeight: '80px' }} /> : null,\n            },\n        },\n        {\n            label: 'Title',\n            name: BOOK_FIELDS.title,\n            options: {\n                filter: false,\n            }\n        },\n        {\n            label: 'Authors',\n            name: BOOK_FIELDS.authors,\n            options: {\n                customBodyRenderLite: dataIndex =>\n                    books[dataIndex][BOOK_FIELDS.authors]\n                        .map(id => authors.find(authors => authors.id === id)?.name)\n                        .join(', '),\n                customFilterListOptions: {\n                    render: val => val.map(e => `Author: ${e.name}`)\n                },\n                filterType: 'custom',\n                filterOptions: {\n                    logic: (el, filters) => filters.length && !filters.some(e => el.includes(e.id)),\n                    display: (filterList, onChange, index, column) =>\n                        <Autocomplete\n                            autoComplete\n                            autoHighlight\n                            filterSelectedOptions\n                            filterOptions={(options, state) =>\n                                matchSorter(options,\n                                    state.inputValue,\n                                    { keys: ['name'] }\n                                ).slice(0, 10)}\n                            getOptionLabel={option => option.name}\n                            multiple\n                            onChange={(event, value) => {\n                                onChange(value, index, column)\n                            }}\n                            options={authors}\n                            renderInput={params => <TextField {...params} label={'Author'} />}\n                            value={filterList[index]}\n                        />\n                },\n            }\n        },\n        {\n            label: 'Genres',\n            name: BOOK_FIELDS.genres,\n            options: {\n                customBodyRenderLite: dataIndex => books[dataIndex][BOOK_FIELDS.genres]\n                    .map(id => genres.find(genres => genres.id === id)?.name).join(', '),\n                customFilterListOptions: {\n                    render: val => val.map(e => `Genre: ${e.name}`)\n                },\n                filterType: 'custom',\n                filterOptions: {\n                    logic: (el, filters) => filters.length && !filters.some(e => el.includes(e.id)),\n                    display: (filterList, onChange, index, column) =>\n                        <Autocomplete\n                            autoComplete\n                            autoHighlight\n                            filterSelectedOptions\n                            filterOptions={(options, state) =>\n                                matchSorter(options,\n                                    state.inputValue,\n                                    { keys: ['name'] }\n                                )}\n                            getOptionLabel={option => option.name}\n                            multiple\n                            onChange={(event, value) => {\n                                onChange(value, index, column)\n                            }}\n                            options={genres}\n                            renderInput={params => <TextField {...params} label={'Genre'} />}\n                            value={filterList[index]}\n                        />\n                },\n            }\n        },\n        {\n            label: 'Type',\n            name: BOOK_FIELDS.type,\n            options: {\n                customBodyRenderLite: dataIndex => types.find(type => type.id === books[dataIndex][BOOK_FIELDS.type])?.name,\n                customFilterListOptions: {\n                    render: v => `Type: ${types.find(type => type.id === v).name}`\n                },\n                filterOptions: {\n                    renderValue: v => types.find(type => type.id === v).name,\n                },\n                filterType: 'multiselect',\n            }\n        },\n        {\n            label: 'Description',\n            name: BOOK_FIELDS.description,\n            options: {\n                filter: false,\n            }\n        },\n        {\n            label: 'Date added',\n            name: 'date_added', // date_added is not in BOOK_FIELDS\n            options: {\n                customBodyRenderLite: dataIndex => formatDistanceToNowPretty(parseISO(books[dataIndex].date_added)), // date_added is not in BOOK_FIELDS\n                customFilterListOptions: {\n                    render: v => `Date Added: ${v[0].name}`\n                },\n                filterOptions: {\n                    logic: (el, filters) => filters.length && isBefore(parseISO(el), filters[0].date),\n                    display: (filterList, onChange, index, column) =>\n                        <Autocomplete\n                            autoComplete\n                            autoHighlight\n                            getOptionLabel={e => e.name}\n                            getOptionSelected={(opt, val) => opt.name === val.name}\n                            onChange={(event, value) =>\n                                onChange(value ? [value] : [], index, column)}\n                            options={dateOptions}\n                            renderInput={params => <TextField {...params} label={'Date Added'} />}\n                            value={filterList[index].length ? filterList[index][0] : dateOptions[0]}\n                        />\n                },\n                filterType: 'custom',\n                searchable: false,\n                sortDescFirst: true,\n            },\n        },\n        {\n            label: 'Read Next',\n            name: BOOK_FIELDS.read_next,\n            options: {\n                customBodyRenderLite: dataIndex => books[dataIndex][BOOK_FIELDS.read_next] ?\n                    <ErrorOutlineOutlinedIcon color={'secondary'} /> : '',\n                customFilterListOptions: {\n                    render: () => 'Read Next'\n                },\n                filterOptions: {\n                    logic: (el, filters) => filters.length && !el,\n                    display: (filterList, onChange, index, column) =>\n                        <FormControlLabel\n                            control={<Checkbox\n                                checked={Boolean(filterList[index][0])}\n                                onChange={e => onChange(e.target.checked ? [true] : [], index, column)}\n                            />}\n                            label={'Read Next'} />\n                },\n                filterType: 'custom',\n                searchable: false,\n            }\n        },\n        {\n            label: 'Date Read',\n            name: BOOK_FIELDS.date_read,\n            options: {\n                customBodyRenderLite: dataIndex => books[dataIndex][BOOK_FIELDS.date_read] ?\n                    formatDistanceToNowPretty(parseISO(books[dataIndex][BOOK_FIELDS.date_read])) : '',\n                customFilterListOptions: {\n                    render: v => `Date Read: ${v[0].name}`\n                },\n                filterOptions: {\n                    logic: (el, filters) => filters.length && (isBefore(parseISO(el), filters[0].date) || !Boolean(el)),\n                    display: (filterList, onChange, index, column) =>\n                        <Autocomplete\n                            autoComplete\n                            autoHighlight\n                            getOptionLabel={e => e.name}\n                            getOptionSelected={(opt, val) => opt.name === val.name}\n                            onChange={(event, value) =>\n                                onChange(value ? [value] : [], index, column)}\n                            options={dateOptions}\n                            renderInput={params => <TextField {...params} label={'Date Read'} />}\n                            value={filterList[index].length ? filterList[index][0] : dateOptions[0]}\n                        />\n                },\n                filterType: 'custom',\n                searchable: false,\n                sortDescFirst: true,\n            },\n        },\n\n        {\n            label: 'Published',\n            name: BOOK_FIELDS.published,\n            options: {\n                filter: false,\n                sortDescFirst: true\n            },\n        },\n        {\n            label: 'Series',\n            name: BOOK_FIELDS.series,\n            options: {\n                customBodyRenderLite: dataIndex => {\n                    let row = books[dataIndex];\n                    return row[BOOK_FIELDS.series] ? `${row[BOOK_FIELDS.series]} #${row[BOOK_FIELDS.series_position]}` : ''\n                },\n                customFilterListOptions: {\n                    render: v => v.map(e => `Series: ${e}`)\n                },\n                filterType: 'custom',\n                filterOptions: {\n                    logic: (el, filters) => filters.length && !filters.some(e => e === el),\n                    display: (filterList, onChange, index, column) =>\n                        <Autocomplete\n                            autoComplete\n                            autoHighlight\n                            filterSelectedOptions\n                            filterOptions={(options, state) =>\n                                matchSorter(options, state.inputValue,)}\n                            multiple\n                            onChange={(event, value) => {\n                                onChange(value, index, column)\n                            }}\n                            options={[...new Set(books.map(e => e[BOOK_FIELDS.series]).filter(e => Boolean(e)))]}\n                            renderInput={params => <TextField {...params} label={'Series'} />}\n                            value={filterList[index]}\n                        />\n                },\n            }\n        },\n        {\n            label: 'Rating',\n            name: BOOK_FIELDS.rating,\n            options: {\n                searchable: false,\n            }\n        },\n        {\n            label: 'My Review',\n            name: BOOK_FIELDS.my_review,\n            options: {\n                filter: false,\n            }\n        },\n        {\n            label: 'Notes',\n            name: BOOK_FIELDS.notes,\n            options: {\n                filter: false,\n            }\n        },\n        {\n            label: 'Updated',\n            name: 'updated',\n            options: {\n                customBodyRenderLite: dataIndex => formatDistanceToNowPretty(parseISO(books[dataIndex].updated)),\n                customFilterListOptions: {\n                    render: v => `Updated: ${v[0].name}`\n                },\n                filterOptions: {\n                    logic: (el, filters) => filters.length && isBefore(parseISO(el), filters[0].date),\n                    display: (filterList, onChange, index, column) =>\n                        <Autocomplete\n                            autoComplete\n                            autoHighlight\n                            getOptionLabel={e => e.name}\n                            getOptionSelected={(opt, val) => opt.name === val.name}\n                            onChange={(event, value) =>\n                                onChange(value ? [value] : [], index, column)}\n                            options={dateOptions}\n                            renderInput={params => <TextField {...params} label={'Updated'} />}\n                            value={filterList[index].length ? filterList[index][0] : dateOptions[0]}\n                        />\n                },\n                filterType: 'custom',\n                searchable: false,\n                sortDescFirst: true,\n            },\n        }\n    ].map(e => ({\n        ...e,\n        options: {\n            ...e.options,\n            display: !!displayedColumns[e.name],\n            sortThirdClickReset: true,\n        }\n    })), [authors, books, dateOptions, displayedColumns, genres, types]);\n\n    if (loading) return <Loading fullscreen={false} />\n\n    return <>\n        <StyledFab color={'primary'} onClick={() => setSearchBookOpen(true)}>\n            <AddIcon />\n        </StyledFab>\n\n        {bookData &&\n            <AddBook\n                bookData={bookData}\n                onClose={() => setBookData(null)}\n                setAddedSnackbar={setAddedSnackbar} />}\n\n        {searchBookOpen &&\n            <SearchBooks\n                closeSearch={() => setSearchBookOpen(false)}\n                setBookData={setBookData} />}\n\n        <Snackbar\n            open={Boolean(addedSnackbar)}\n            onClose={() => setAddedSnackbar(false)}\n            autoHideDuration={3000}>\n            <Alert\n                severity={'success'}\n                onClose={() => setAddedSnackbar(false)}>\n                {addedSnackbar?.message}\n            </Alert>\n        </Snackbar>\n        <StyledTableContainer>\n            <ThemeProvider theme={theme => createMuiTheme({\n                ...theme,\n                overrides: {\n                    MUIDataTable: {\n                        paper: {\n                            backgroundColor: 'transparent'\n                        }\n                    },\n                    MUIDataTableHeadCell: {\n                        fixedHeader: {\n                            backgroundColor: 'transparent'\n                        }\n                    },\n                    MUIDataTableSelectCell: {\n                        headerCell: {\n                            backgroundColor: 'transparent'\n                        }\n                    },\n                    MuiGrid: {},\n                    MUIDataTableToolbar: {\n                        filterPaper: {\n                            maxWidth: 'calc(100% - 32px) !important',\n                        }\n\n                    }\n                }\n            })}>\n\n                <MUIDataTable\n                    columns={columns}\n                    data={books}\n                    options={options}\n                    title={`${filteredItemsLength || books.length} items`}\n                />\n            </ThemeProvider>\n        </StyledTableContainer>\n    </>\n\n};\n","import { DialogBlurResponsive } from \"../../shared/components/DialogBlurResponsive\";\nimport React, { useMemo, useState } from \"react\";\nimport { Button, Dialog, DialogActions, DialogTitle, TextField, Typography } from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport { mapGenres } from \"./utils\";\nimport { useGetGenresQuery } from \"./literatureApi\";\n\nconst FormContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n`;\n\nconst StyledFooter = styled.div`\n  display: flex;\n  align-content: flex-end;\n`;\n\nconst StyledTextField = styled(TextField)`\n  margin: 10px 0;\n`;\n\nconst StyledDiv = styled.div`\n  flex: 1\n`;\n/*Todo consider using 'genres' as an object instead of array for improved performance*/\nexport const GenreEdit = ({\n    editingItem: { id, name, notes, parent },\n    closeEdit,\n    isItemEmpty,\n    itemIdField,\n    createItemMutation,\n    updateItemMutation,\n    deleteItemMutation,\n}) => {\n\n    const { data: genres } = useGetGenresQuery()\n    const [createGenre] = createItemMutation()\n    const [updateGenre] = updateItemMutation()\n    const [deleteGenre] = deleteItemMutation()\n\n    const [deleteDialog, setDeleteDialog] = useState(false)\n    const [saveDialog, setSaveDialog] = useState(false)\n\n    const genresWithNull = useMemo(() => {\n        let arr = [\n            {\n                ancestors: [],\n                fullName: '<Top Level>',\n                id: null,\n                name: '<Top Level>',\n                parent: null\n            },\n            ...genres.map(e => mapGenres(e, genres)),\n        ].sort((a, b) => a.fullName.localeCompare(b.fullName))\n\n        /* Don't allow a genre to have itself as the parent */\n        let ownIdx = arr.findIndex(e => e.id === id)\n        if (ownIdx !== -1) arr.splice(ownIdx, 1)\n        return arr\n    }, [genres, id])\n\n    const {\n        control,\n        handleSubmit,\n        formState: {\n            isDirty\n        },\n    } = useForm({\n        defaultValues: {\n            name,\n            notes,\n            parent: genresWithNull.find(e => e.id === parent) || genresWithNull[0],\n        }\n    });\n\n\n\n    const onCloseCheckDirty = () => isDirty ? setSaveDialog(true) : closeEdit()\n    const parseData = ({ parent, ...data }) => ({ parent: parent.id, ...data })\n    const onSubmit = () => {\n        handleSubmit(data => id ?\n            updateGenre({ id, ...parseData(data) }) :\n            createGenre(parseData(data))\n        )()\n        closeEdit()\n    }\n\n    const footer = (\n        <StyledFooter>\n            <StyledDiv />\n            {id && <Button onClick={() => setDeleteDialog(true)}>Delete</Button>}\n            <Button onClick={onSubmit} color={'primary'}>Submit</Button>\n        </StyledFooter>\n    )\n\n\n    return <>\n        <Dialog\n            open={saveDialog}\n            onClose={() => setSaveDialog(false)}>\n            <DialogTitle>Discard changes?</DialogTitle>\n            <DialogActions>\n                <Button onClick={closeEdit} color={'primary'}>Discard</Button>\n                <Button onClick={() => setSaveDialog(false)}>Cancel</Button>\n            </DialogActions>\n        </Dialog>\n        <Dialog\n            open={deleteDialog}\n            onClose={() => setDeleteDialog(false)}>\n            <DialogTitle>Delete '{name}'?</DialogTitle>\n            <DialogActions>\n                <Button\n                    onClick={() => {\n                        deleteGenre({ id })\n                        closeEdit()\n                    }}\n                    color={'primary'}>\n                    Delete\n                </Button>\n                <Button onClick={() => setDeleteDialog(false)}>Cancel</Button>\n            </DialogActions>\n        </Dialog>\n        <DialogBlurResponsive\n            open\n            onClose={onCloseCheckDirty}\n            footer={footer}>\n\n            <FormContainer>\n\n                <Controller\n                    name={'name'}\n                    control={control}\n                    render={({ field: { ref, ...field } }) =>\n                        <StyledTextField\n                            {...field}\n                            autoFocus\n                            label={'Name'}\n                            variant={'outlined'} />} />\n\n                <Controller\n                    name={'notes'}\n                    control={control}\n                    render={({ field: { ref, ...field } }) =>\n                        <StyledTextField\n                            {...field}\n                            label={'Notes'}\n                            variant={'outlined'} />} />\n\n                <Controller\n                    name={'parent'}\n                    control={control}\n                    render={({ field: { ref, onChange, ...field } }) =>\n                        <Autocomplete\n                            {...field}\n                            disableClearable\n                            getOptionLabel={e => e.name}\n                            getOptionSelected={(opt, val) => opt.id === val.id}\n                            groupBy={e => e.ancestors.length ? e.ancestors.join(' > ') : ''}\n                            onChange={(event, value) => onChange(value)}\n                            options={genresWithNull}\n                            renderInput={params => <TextField label={'Parent'} {...params} variant={'outlined'} />}\n                            renderOption={e => e.ancestors.length ?\n                                <Typography style={{ marginLeft: '20px' }}>{e.name}</Typography> : e.name}\n                        />} />\n\n            </FormContainer>\n\n        </DialogBlurResponsive>\n    </>\n};","import { Fab } from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport React, { useEffect, useState } from \"react\";\nimport { SortableTreeWithoutDndContext as SortableTree } from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css';\nimport styled from 'styled-components';\nimport { BACKGROUND_COLOR } from \"../../shared/components/backgroundScreen\";\nimport { Loading } from \"../../shared/components/Loading\";\nimport { useGetBooksQuery } from \"./literatureApi\";\nimport { getTreeDataFromGenres, recursiveSort } from \"./utils\";\n\n\nconst StyledSortableTree = styled(SortableTree)`\n\n  .rst__lineHalfHorizontalRight::before,\n  .rst__lineFullVertical::after,\n  .rst__lineHalfVerticalTop::after,\n  .rst__lineHalfVerticalBottom::after,\n  .rst__lineChildren::after {\n    background-color: white;\n  }\n\n  .rst__rowContents {\n    background-color: transparent;\n    border: none;\n    box-shadow: none;\n  }\n\n  .rst__moveHandle {\n    width: 20px;\n    border: none;\n    box-shadow: none;\n    background-color: transparent;\n  }\n`\n\nconst StyledFab = styled(Fab)`\n  position: fixed;\n  z-index: 1;\n  bottom: 20px;\n  right: 20px;\n`;\n\n\nconst Container = styled.div`\n  ${BACKGROUND_COLOR};\n`\n\nexport const GenreTreeView = ({\n    updateItemMutation,\n    items: genres,\n    loading,\n    setEditingItem,\n}) => {\n\n    const [treeState, setTreeState] = useState([])\n\n    const { data: books } = useGetBooksQuery()\n    const [updateGenre] = updateItemMutation()\n\n    /* Set tree state */\n    useEffect(() => {\n        if (!genres || !books) return\n        setTreeState(recursiveSort(getTreeDataFromGenres(setEditingItem)(genres, books), (a, b) => a.name.localeCompare(b.name)))\n    }, [books, genres, setEditingItem])\n\n    /* TODO Why can't I update name/notes and parent simultaneously? */\n    const onMoveNode = ({\n        node: { title, id, children, parent, ...data },\n        nextParentNode\n    }) => {\n        if (parent === (nextParentNode ? nextParentNode.id : null)) return\n        updateGenre({ id, parent: nextParentNode && nextParentNode.id, ...data })\n    }\n\n    if (loading || !genres || !books) return (\n        <Loading fullscreen={false} />\n    )\n\n    return (\n        <Container>\n            <StyledFab color={'primary'} onClick={() => setEditingItem(true)}>\n                <AddIcon />\n            </StyledFab>\n            \n                <StyledSortableTree\n                    canDrop={({ prevParent, nextParent }) => prevParent?.id !== nextParent?.id}\n                    getNodeKey={({ node }) => node.id}\n                    onChange={setTreeState}\n                    onMoveNode={onMoveNode}\n                    rowHeight={35}\n                    treeData={treeState}\n                    isVirtualized={false}\n                />\n            \n        </Container>\n    )\n}\n\n\n","import HomeIcon from '@material-ui/icons/Home';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport PeopleIcon from '@material-ui/icons/People';\nimport TitleIcon from '@material-ui/icons/Title';\nimport { GenericList } from '../../shared/components/GenericList/GenericList';\nimport { Books } from \"./Books\";\nimport { Genres } from './Genres';\nimport { useCreateAuthorMutation, useCreateTypeMutation, useDeleteAuthorMutation, useDeleteTypeMutation, useGetAuthorsQuery, useGetTypesQuery, useUpdateAuthorMutation, useUpdateTypeMutation } from './literatureApi';\n\nexport const submodules = {\n    BOOKS: {\n        name: 'Books',\n        Icon: HomeIcon,\n        jsx: Books,\n    },\n    AUTHORS: {\n        name: 'Authors',\n        Icon: PeopleIcon,\n        jsx: GenericList,\n        props: {\n            getItemsQuery: useGetAuthorsQuery,\n            createItemMutation: useCreateAuthorMutation,\n            updateItemMutation: useUpdateAuthorMutation,\n            deleteItemMutation: useDeleteAuthorMutation,\n            defaultItemValues: { name: '', notes: '' }\n        }\n    },\n    GENRES: {\n        name: 'Genres',\n        Icon: InsertDriveFileIcon,\n        jsx: Genres\n    },\n    TYPES: {\n        name: 'Types',\n        Icon: TitleIcon,\n        jsx: GenericList,\n        props: {\n            getItemsQuery: useGetTypesQuery,\n            createItemMutation: useCreateTypeMutation,\n            updateItemMutation: useUpdateTypeMutation,\n            deleteItemMutation: useDeleteTypeMutation,\n            defaultItemValues: { name: '', notes: '' }\n        }\n    }\n}","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton } from \"@material-ui/core\";\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\nimport { useEffect, useState } from \"react\";\nimport { GenericList } from \"../../shared/components/GenericList/GenericList\";\nimport { GenreEdit } from './GenreEdit';\nimport { GenreTreeView } from \"./GenreTreeView\";\nimport { useCreateGenreMutation, useDeleteGenreMutation, useGetGenresQuery, useUpdateGenreMutation } from \"./literatureApi\";\n\n\nexport const Genres = ({ setTitleEndAdornment }) => {\n\n    const [genreInfoDialogOpen, setGenreInfoDialogOpen] = useState(false);\n\n    useEffect(() => {\n        setTitleEndAdornment(<>\n            <IconButton onClick={() => setGenreInfoDialogOpen(true)}>\n                <InfoOutlinedIcon />\n            </IconButton>\n        </>)\n        return () => setTitleEndAdornment(null)\n    }, [setTitleEndAdornment])\n\n    return <>\n        <Dialog\n            fullScreen={false}\n            disableScrollLock\n            open={genreInfoDialogOpen}\n            onClose={() => setGenreInfoDialogOpen(false)}>\n            <DialogTitle>Genre Notes</DialogTitle>\n            <DialogContent>\n                <DialogContentText component={'div'}>\n                    A book can belong to multiple tags e.g.\n                    <ul>\n                        <li>Fahrenheit 451 belongs to 'Science Fiction', 'Dystopian'</li>\n                    </ul>\n\n                    Books can be tagged with both a tag as well as its parent:\n                    searching for the parent tag will also include all child tags\n\n                    <ul>\n                        <li>If a tag is deleted/modified, it is deleted/modified on all books</li>\n                        <li>A parent tag cannot be deleted if it has children</li>\n                    </ul>\n\n                    Also, book counts by genre will not add up to the total number of books. This is because\n                    some books can belong to two top-level genres, for example Finance and Programming.\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button color={'primary'} onClick={() => setGenreInfoDialogOpen(false)}>Close</Button>\n            </DialogActions>\n        </Dialog>\n        <GenericList\n            getItemsQuery={useGetGenresQuery}\n            createItemMutation={useCreateGenreMutation}\n            updateItemMutation={useUpdateGenreMutation}\n            deleteItemMutation={useDeleteGenreMutation}\n            defaultItemValues={{ name: '', notes: '' }}\n            List={GenreTreeView}\n            ItemEdit={GenreEdit}\n        />\n    </>\n}","\nimport { baseApi } from './../../app/network-core/baseApi';\n\nbaseApi.enhanceEndpoints({\n    addTagTypes: ['otpStatus', 'browsers']\n})\n\nconst accountApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        getBrowsers: build.query({\n            query: () => 'account/browsers/',\n            providesTags: ['browsers']\n        }),\n        forgetAndLogoutBrowser: build.mutation({\n            query: id => ({\n                url: `account/browsers/${id}/`,\n                method: 'DELETE'\n            }),\n            invalidatesTags: ['browsers']\n        }),\n\n        getOtpStatus: build.query({\n            query: () => 'account/twofactor/',\n            providesTags: ['otpStatus']\n        }),\n\n        modify2Fa: build.mutation({\n            query: data => ({\n                url: 'account/twofactor/',\n                method: 'POST',\n                body: data\n            }),\n            invalidatesTags: ['otpStatus']\n        })\n    })\n})\n\nexport const {\n    useGetBrowsersQuery,\n    useForgetAndLogoutBrowserMutation,\n    useGetOtpStatusQuery,\n    useModify2FaMutation,\n} = accountApi","import { Button, Card, CardActionArea, CardActions, CardContent, Chip, Typography } from \"@material-ui/core\";\nimport DesktopWindowsIcon from \"@material-ui/icons/DesktopWindows\";\nimport PhoneIphoneIcon from \"@material-ui/icons/PhoneIphone\";\nimport PublicIcon from '@material-ui/icons/Public';\nimport { getName } from \"country-list\";\nimport { format, parseJSON } from \"date-fns\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { theme } from \"../../app/theme\";\nimport ChromeLogo from '../../shared/static/browserLogos/chrome.png';\nimport EdgeLogo from '../../shared/static/browserLogos/edge.png';\nimport FirefoxLogo from '../../shared/static/browserLogos/firefox.png';\nimport SafariLogo from '../../shared/static/browserLogos/safari.png';\nimport { formatDistanceToNowPretty, prettifyUAString } from \"../../shared/util\";\n\nconst StyledCard = styled(Card)`\n  outline: ${props => props.$thisDevice ? '2px solid ' + theme.palette.primary.main : 'none'};\n`;\n\nconst StyledTypography = styled(Typography)`\n  margin: 10px 0;\n`;\n\nconst ImageDiv = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst SavedBrowserDiv = styled.div`\n  width: 100%;\n  height: 32px;\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst BrowserLogoDiv = styled.div`\n  background: no-repeat url(${props => props.$image}) center/contain;\n  margin: 0 6px;\n  width: 32px;\n  height: 32px\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n\nconst BrowserLogo = {\n    Chrome: ChromeLogo,\n    Firefox: FirefoxLogo,\n    Edge: EdgeLogo,\n    Safari: SafariLogo,\n};\n\nexport const BrowserCard = ({\n                                browser: {\n                                    id,\n                                    is_active,\n                                    is_current_session,\n                                    is_saved,\n                                    first_login,\n                                    last_activity,\n                                    ip,\n                                    country_code,\n                                    user_agent,\n                                },\n                                forgetAndLogoutBrowser,\n                            }) => {\n\n    const prettifiedUserAgent = prettifyUAString(user_agent);\n    const browserName = prettifiedUserAgent.browserName;\n    const [detailView, setDetailView] = useState(false);\n\n    return <>\n        <StyledCard $thisDevice={is_current_session} key={id}>\n            <CardContainer>\n                <CardActionArea onClick={() => setDetailView(!detailView)}>\n                    <CardContent>\n                        {detailView ?\n                            <>\n                                <Typography variant={'body1'}>First Login</Typography>\n                                <Typography variant={'body2'}\n                                            color={'textSecondary'}>{format(parseJSON(first_login), 'PPpp')}</Typography>\n                                <Typography variant={'body1'}>Last Activity</Typography>\n                                <Typography variant={'body2'}\n                                            color={'textSecondary'}>{format(parseJSON(last_activity), 'PPpp')}</Typography>\n                                <Typography variant={'body1'}>User-Agent</Typography>\n                                <Typography variant={'body2'} color={'textSecondary'}>{user_agent}</Typography>\n\n                            </> :\n                            <>\n                                <ImageDiv>\n                                    {prettifiedUserAgent.isMobile ? <PhoneIphoneIcon/> : <DesktopWindowsIcon/>}\n                                    {browserName in BrowserLogo ? <BrowserLogoDiv $image={BrowserLogo[browserName]}/> :\n                                        <PublicIcon/>}\n                                    <SavedBrowserDiv>\n                                        {is_saved && <Chip label={'Saved'} color={'primary'}/>}\n                                    </SavedBrowserDiv>\n                                </ImageDiv>\n\n                                <StyledTypography variant={'body1'}>{prettifiedUserAgent.name}</StyledTypography>\n                                <Typography variant={'body2'}>{getName(country_code)}</Typography>\n                                <Typography variant={'body2'} style={{overflowWrap: 'break-word'}}>{ip}</Typography>\n                                <StyledTypography variant={'body2'}\n                                                  color={'textSecondary'}>{formatDistanceToNowPretty(parseJSON(last_activity))}</StyledTypography>\n                            </>\n                        }\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    {(is_active || is_saved) ?\n                        <Button color={'primary'}\n                                onClick={() => forgetAndLogoutBrowser(id)}>\n                            {is_active ? 'Logout' : 'Forget'}\n                        </Button> :\n                        null}\n                </CardActions>\n            </CardContainer>\n        </StyledCard>\n    </>\n};","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { Typography } from \"@material-ui/core\";\nimport { compareDesc, parseJSON } from \"date-fns\";\nimport styled from 'styled-components';\nimport { useForgetAndLogoutBrowserMutation, useGetBrowsersQuery } from \"./accountApi\";\nimport { BrowserCard } from \"./BrowserCard\";\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  grid-auto-rows: 1fr;\n  gap: 20px 20px;\n  margin: 20px;\n`;\nconst GridContainer = styled.div`\n  max-width: 1000px;\n`;\n\nexport const Browsers = () => {\n\n    const [forgetAndLogoutBrowser] = useForgetAndLogoutBrowserMutation()\n    const { data: browsers } = useGetBrowsersQuery()\n\n    return <GridContainer>\n        <Typography variant={'h5'} style={{ marginLeft: '10px' }}>Active Browsers</Typography>\n        <Grid>\n            {browsers && browsers\n                .filter(e => e.is_active)\n                .sort((a, b) => compareDesc(parseJSON(a.last_activity), parseJSON(b.last_activity)))\n                .map(browser => <BrowserCard\n                    key={browser.id}\n                    browser={browser}\n                    forgetAndLogoutBrowser={forgetAndLogoutBrowser}\n                />)}\n        </Grid>\n\n        <Typography variant={'h5'} style={{ marginLeft: '10px' }}>Inactive Browsers</Typography>\n\n        <Grid>\n            {browsers && browsers\n                .filter(e => !e.is_active)\n                .sort((a, b) => compareDesc(parseJSON(a.last_activity), parseJSON(b.last_activity)))\n                .map(browser => <BrowserCard\n                    key={browser.id}\n                    browser={browser}\n                    forgetAndLogoutBrowser={forgetAndLogoutBrowser}\n                />)}\n        </Grid>\n    </GridContainer>\n};","import { Button, TextField, Typography } from \"@material-ui/core\";\nimport { parseJSON } from \"date-fns\";\nimport QRCode from \"qrcode.react\";\nimport { useState } from \"react\";\nimport { formatDistanceToNowPretty } from \"../../shared/util\";\nimport { useModify2FaMutation, useGetOtpStatusQuery } from \"./accountApi\";\n\nexport const TwoFactor = () => {\n\n    const [otp, setOtp] = useState('');\n    const [secret, setSecret] = useState();\n\n    const { data: otpStatus } = useGetOtpStatusQuery()\n    const [modify2Fa] = useModify2FaMutation()\n\n    const register = () =>\n        modify2Fa({ action: 'register' })\n            .unwrap()\n            .then(r => setSecret(r['otpauth_url']));\n\n    const enable = () => modify2Fa({ action: 'enable', otp })\n\n    const disable = () => modify2Fa({ action: 'disable', otp })\n\n    if (!otpStatus) return null\n\n    return <>\n        {secret && <a href={secret}><QRCode value={secret} /></a>}\n        <Typography variant={'body1'}>OTP is {otpStatus['2fa_enabled'] ? 'enabled' : 'disabled'}.</Typography>\n        <Typography\n            variant={'body1'}>Created: {otpStatus['created'] && formatDistanceToNowPretty(parseJSON(otpStatus['created']))}</Typography>\n        <Button color={'primary'} variant={'contained'} onClick={register}>Register</Button>\n        <Button color={'primary'} variant={'contained'} onClick={enable}>Enable</Button>\n        <Button color={'secondary'} variant={'contained'} onClick={disable}>Disable</Button>\n        <TextField\n            value={otp}\n            onChange={e => setOtp(e.target.value)}\n        />\n    </>\n};","import { List, ListItem, ListItemIcon, ListItemText, Typography } from \"@material-ui/core\";\nimport PublicIcon from '@material-ui/icons/Public';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport { useEffect, useState } from \"react\";\nimport { BackgroundScreen } from \"../../shared/components/backgroundScreen\";\nimport { Browsers } from \"./Browsers\";\nimport { TwoFactor } from \"./TwoFactor\";\n\nconst SUBMODULES = {\n    BROWSERS: {\n        name: 'Browsers',\n        appDrawer: <>\n            <ListItemIcon>\n                <PublicIcon />\n            </ListItemIcon>\n            <ListItemText primary={'Browsers'} />\n        </>,\n        jsx: <Browsers />\n    },\n    TWOFACTOR: {\n        name: '2FA Settings',\n        appDrawer: <>\n            <ListItemIcon>\n                <VpnKeyIcon />\n            </ListItemIcon>\n            <ListItemText primary={'2FA Settings'} />\n        </>,\n        jsx: <TwoFactor />\n    }\n};\n\nexport const Account = ({ setTitleContent, setDrawerContent }) => {\n    const [submodule, setSubmodule] = useState(Object.keys(SUBMODULES)[0]);\n\n    useEffect(() => {\n        setDrawerContent(<List disablePadding>\n            {Object.entries(SUBMODULES).map(([k, v]) =>\n                <ListItem key={k}\n                    button\n                    onClick={() => setSubmodule(k)}\n                >{v.appDrawer}</ListItem>)}\n        </List>)\n    }, [setDrawerContent])\n\n    useEffect(() => {\n        setTitleContent(<Typography variant={'h6'}>{SUBMODULES[submodule].name}</Typography>)\n    }, [setTitleContent, submodule])\n\n    return <BackgroundScreen>\n        {SUBMODULES[submodule].jsx}\n    </BackgroundScreen>\n};","\nimport { FILES_URL } from '../../app/urls';\nimport { baseApi } from './../../app/network-core/baseApi';\n\nconst dvrApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        getOrRefreshChannel: build.query({\n            query: channel => ({\n                url: 'dvr/',\n                params: { channel }\n            })\n        }),\n    })\n})\n\nexport const {\n    useGetOrRefreshChannelQuery\n} = dvrApi\n\nexport const getChannelUrl = (uuid, channel) =>\n`${FILES_URL}/dvr_stream/${uuid}/${channel}.mpd`;","import { List, ListItem, ListItemText, Typography } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"shaka-player/dist/controls.css\";\nimport shaka from \"shaka-player/dist/shaka-player.ui\";\nimport styled from \"styled-components\";\nimport { getChannelUrl, useGetOrRefreshChannelQuery } from \"./dvrApi\";\n\nconst CHANNELS = [\"CAM_1\", \"CAM_2\", \"CAM_3\", \"CAM_4\", \"CAM_5\", \"CAM_6\"];\n\nconst REFRESH_INTERVAL = 10_000;\n\nconst VideoDiv = styled.div`\n  width: min(100%, 1280px);\n`;\n\nconst StyledVideo = styled.video`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const Dvr = ({ setDrawerContent, setTitleContent, setSidebarName }) => {\n  const [channel, setChannel] = useState(CHANNELS[0]);\n  const player = useRef();\n\n  const { data, isFetching } = useGetOrRefreshChannelQuery(channel, {\n    refetchOnMountOrArgChange: true, //Don't cache stream UUIDs\n    pollingInterval: REFRESH_INTERVAL,\n  });\n\n  useEffect(() => {\n    if (data && !isFetching) {\n      player.current?.load(getChannelUrl(data.stream_uuid, channel));\n    }\n  }, [channel, data, isFetching]);\n\n  // Initialize polyfills (required)\n  useEffect(() => {\n    shaka.polyfill.installAll();\n    return () => {\n      if (player.current) {\n        player.current.unload();\n        player.current.destroy();\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    setDrawerContent(\n      <List>\n        {CHANNELS.map((channel) => (\n          <ListItem key={channel} button onClick={() => switchChannel(channel)}>\n            <ListItemText primary={channel} />\n          </ListItem>\n        ))}\n      </List>\n    );\n  }, [setDrawerContent]);\n\n  useEffect(() => {\n    setTitleContent(<Typography variant={\"h6\"}>{channel}</Typography>);\n  }, [setTitleContent, channel]);\n\n  // Init and attach to video element\n  const attachPlayer = (videoEl) => {\n    /*Do not reinitialize video element if a null element is passed, or player already exists*/\n    if (!videoEl || player.current) return;\n    if (!shaka.Player.isBrowserSupported()) {\n      console.error(\"Shaka player not supported\");\n      return;\n    }\n\n    player.current = new shaka.Player(videoEl);\n    player.current.addEventListener(\"error\", (e) =>\n      console.error(\"Shaka player error: \", e.detail)\n    );\n\n    /* Set up video controls\n        videoEl.parentNode is guaranteed to have been mounted, if videoEl itself was mounted*/\n    let ui = new shaka.ui.Overlay(player.current, videoEl.parentNode, videoEl);\n    let controls = ui.getControls();\n    controls.addEventListener(\"UIError\", (e) =>\n      console.error(\"Shaka UI error: \", e.detail)\n    );\n  };\n\n  const switchChannel = (channel) =>\n    void player.current?.unload().then(setChannel(channel));\n\n  return (\n    <VideoDiv data-shaka-player-container>\n      <StyledVideo data-shaka-player ref={attachPlayer} id=\"video\" autoPlay />\n    </VideoDiv>\n  );\n};\n","import { baseApi } from \"../../app/network-core/baseApi\";\nimport { baseQueryWithRetry } from \"../../app/network-core/baseQuery\";\n\n\nexport const testingApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        throwHttpError: build.mutation({\n            query: status => ({\n                url: 'test/',\n                params: {status}\n            })\n        }),\n        throwFetchError: build.mutation({\n            queryFn: (arg, api, extraOptions) =>\n                baseQueryWithRetry({\n                    baseUrl: 'https://dummy.nicholaslyz.com',\n                    credentials: \"include\"\n                })(arg, api, extraOptions)\n        }),\n        mutationTest: build.mutation({\n            query: () => 'test/mutationTest/'\n        })\n    })\n})\n\nexport const {\n    useThrowHttpErrorMutation,\n    useThrowFetchErrorMutation,\n    useMutationTestMutation,\n} = testingApi","import {createAsyncThunk} from \"@reduxjs/toolkit\";\n\nexport const throwAsyncThunkReject = createAsyncThunk('testing/asyncThunkReject', async () => {\n    throw new Error('Testing: AsyncThunkReject')\n})\n\nexport const throwAsyncThunkRejectWithValue = createAsyncThunk('testing/asyncThunkRejectWithValue', async(arg, {rejectWithValue}) => {\nreturn rejectWithValue('Testing: AsyncThunkRejectWithValue')\n})","import {Button} from \"@material-ui/core\";\nimport {useMutationTestMutation, useThrowFetchErrorMutation, useThrowHttpErrorMutation} from \"./testingApi\";\nimport {useDispatch} from \"react-redux\";\nimport {throwAsyncThunkReject, throwAsyncThunkRejectWithValue} from \"./util\";\nimport styled from 'styled-components'\nimport {clearNetworkError} from \"../../app/appSlice\";\n\nconst StyledDiv = styled.div`\n  display: grid;\n  grid-gap: 20px;\n  max-width: 300px;\n  padding: 10px;\n`\n\nexport const Testing = () => {\n\n    const dispatch = useDispatch()\n    const [throwHttpError] = useThrowHttpErrorMutation()\n    const [throwFetchError] = useThrowFetchErrorMutation()\n    const [mutationTest, {data: mutationData}] = useMutationTestMutation()\n\n    return <StyledDiv>\n        <Button variant={'contained'} onClick={() => throwHttpError(401)}>Throw 401 error</Button>\n        <Button variant={'contained'} onClick={() => throwHttpError(500)}>Throw 500 error</Button>\n        <Button variant={'contained'} onClick={() => throwFetchError()}>Throw fetch error</Button>\n        <Button variant={'contained'} onClick={() => dispatch(throwAsyncThunkReject())}>\n            Throw asyncThunkReject\n        </Button>\n        <Button variant={'contained'} onClick={() => dispatch(throwAsyncThunkRejectWithValue())}>\n            Throw asyncThunkRejectWithValue\n        </Button>\n        <Button variant={'contained'} onClick={() => mutationTest()}>Mutation Test - Current Data: {JSON.stringify(mutationData)}</Button>\n        <Button variant={'contained'} onClick={() => dispatch(clearNetworkError())}>Clear</Button>\n    </StyledDiv>\n}","import {getSecureRandom} from \"../../shared/util\";\nimport {formatDistance} from \"date-fns\";\n\nconst DIGITS_REGEX = /\\d/;\nconst LOWER_REGEX = /[a-z]/;\nconst UPPER_REGEX = /[A-Z]/;\nconst SYMBOLS_REGEX = /[!@#$%^&*]/;\n\n\nconst DIGITS = '0123456789';\nconst LOWER = 'abcdefghijklmnopqrstuvwxyz';\nconst UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\nconst SYMBOLS = '!@#$%^&*';\n\nconst secureRandom = getSecureRandom();\nconst formatNumber = new Intl.NumberFormat(undefined, {\n    maximumFractionDigits: 0,\n    maximumSignificantDigits: 3,\n});\n\n/*Gets the entropy in bits for a password, assuming it is completely random*/\nexport const getEntropy = password => {\n\n    let hasDigits = DIGITS_REGEX.test(password);\n    let hasLowerCase = LOWER_REGEX.test(password);\n    let hasUpperCase = UPPER_REGEX.test(password);\n    let hasSymbols = SYMBOLS_REGEX.test(password);\n\n    let totalSymbols =\n        (hasDigits ? 10 : 0) +\n        (hasLowerCase ? 26 : 0) +\n        (hasUpperCase ? 26 : 0) +\n        (hasSymbols ? SYMBOLS.length : 0);\n\n    let bitsPerChar = Math.log2(totalSymbols);\n    let totalEntropy = bitsPerChar * password.length;\n\n    return {\n        length: password.length,\n        hasDigits,\n        hasLowerCase,\n        hasUpperCase,\n        hasSymbols,\n        bitsPerChar,\n        totalEntropy,\n    }\n\n};\n\nexport const generatePassword = ({length = 10, digits = true, lower = true, upper = true, symbols = true} = {}) => {\n\n    if (length < 4) throw new Error('Password length is too short');\n\n    let charSet =\n        (digits ? DIGITS : '') +\n        (lower ? LOWER : '') +\n        (upper ? UPPER : '') +\n        (symbols ? SYMBOLS : '');\n\n    const generate = () => {\n        let password = '';\n        while (password.length < length)\n            password += secureRandom.choice(charSet);\n        return password\n    };\n\n    let password = generate();\n\n    /*Ensure generated password meets criteria*/\n    while ((digits && !DIGITS_REGEX.test(password)) ||\n    (lower && !LOWER_REGEX.test(password)) ||\n    (upper && !UPPER_REGEX.test(password)) ||\n    (symbols && !SYMBOLS_REGEX.test(password))) {\n        password = generate()\n    }\n    return password\n};\n\nwindow.test = generatePassword;\n\nexport const getSha1Hash = async message => {\n    const msgUint8 = new TextEncoder().encode(message);                            // encode as (utf-8) Uint8Array\n    const hashBuffer = await crypto.subtle.digest('SHA-1', msgUint8);    // hash the message\n    const hashArray = Array.from(new Uint8Array(hashBuffer));                      // convert buffer to byte array\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('').toUpperCase();       // convert bytes to hex string\n};\n\nexport const generateUsername = ({length = 8} = {}) => {\n\n    const vowels = ['a', 'e', 'i', 'o', 'u'];\n    const cons = ['b', 'c', 'd', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'r', 's', 't', 'u', 'v', 'w', 'tr', 'cr', 'br', 'fr', 'th', 'dr', 'ch', 'ph', 'wr', 'st', 'sp', 'sw', 'pr', 'sl', 'cl'];\n\n    const num_vowels = vowels.length;\n    const num_cons = cons.length;\n    let password = '';\n\n    for (let i = 0; i < length; i++) {\n        password += cons[Math.floor(secureRandom.random() * num_cons)] + vowels[Math.floor(secureRandom.random() * num_vowels)];\n    }\n\n    return password.substr(0, length);\n};\n\nexport const formatLargeDuration = seconds => {\n    if (seconds < 3.154e+7) {\n        return formatDistance(new Date(0), new Date(seconds * 1000))\n    }\n    if (seconds > 4.4e+17) {\n        return 'longer than the age of the Universe'\n    }\n    return formatNumber.format(seconds / 3.154e+7) + ' years';\n};","import {baseApi} from \"../../app/network-core/baseApi\";\n\n\n\nconst passwordToolsApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        hibpLookup: build.mutation({\n            query: hash => ({\n                url: 'passwords/lookup/',\n                params: {hash}\n            })\n        })\n    })\n})\n\nexport const {useHibpLookupMutation} = passwordToolsApi","import {useCallback, useEffect, useState} from \"react\";\nimport {\n    Button,\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl,\n    FormControlLabel,\n    FormGroup,\n    IconButton,\n    Slider,\n    Snackbar,\n    TextField,\n    Tooltip,\n    Typography\n} from \"@material-ui/core\";\nimport {formatLargeDuration, generatePassword, generateUsername, getEntropy, getSha1Hash} from \"./passwordUtil\";\nimport styled from 'styled-components'\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport \"@fontsource/jetbrains-mono\"\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport {Alert} from \"@material-ui/lab\";\nimport {debounce} from 'lodash'\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\nimport CheckIcon from '@material-ui/icons/Check';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport {useHibpLookupMutation} from \"./passwordToolsApi\";\n\nconst Container = styled.div`\n  display: flex;\n  max-width: 600px;\n  flex-direction: column;\n  padding: 10px;\n  ${BACKGROUND_COLOR};\n`;\n\nconst StyledTextField = styled(TextField)`\n  .MuiInputBase-input {\n    font-family: \"JetBrains Mono\", monospace\n  }\n\n  margin: 10px 0;\n`;\n\nconst TextFieldContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n`;\n\nconst StyledIconButton = styled(IconButton)`\n  margin-top: 14px;\n`;\n\nconst OptionsFormGroup = styled(FormGroup)`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PasswordDetailGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  justify-items: start;\n  gap: 10px 10px;\n  align-items: center;\n  margin: 5px 0 15px;\n`;\n\nconst GreenCheck = styled(CheckIcon)`\n  color: chartreuse;\n  margin-right: 10px;\n`;\n\nconst GreyCross = styled(ClearIcon)`\n  color: grey;\n  margin-right: 10px;\n`;\n\n\nconst formatNumber = new Intl.NumberFormat(undefined, {maximumFractionDigits: 0});\nconst formatDecimal = new Intl.NumberFormat(undefined, {maximumFractionDigits: 2});\n\nconst DEFAULT_USERNAME_LENGTH = 10;\nconst DEFAULT_PASSWORD_LENGTH = 24;\n\nexport const PasswordTools = () => {\n    const [lookupHibp, {isLoading, data}] = useHibpLookupMutation()\n    const {count: hashCount} = data ?? {}\n\n    const [settings, setSettings] = useState({\n        dialogOpen: false,\n        dialogType: null,\n        passwordSettings: {\n            length: DEFAULT_PASSWORD_LENGTH,\n            digits: true,\n            lower: true,\n            upper: true,\n            symbols: true\n        },\n        usernameSettings: {\n            length: DEFAULT_USERNAME_LENGTH\n        }\n    });\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\n    const [entropy, setEntropy] = useState({});\n\n    let secondsToBruteforce = (2 ** entropy.totalEntropy / (200 * 10 ** 18));\n\n    useEffect(() => {\n        if (!password) return;\n\n        let generatedPassword = generatePassword(settings.passwordSettings);\n        setPassword(generatedPassword);\n        setEntropy(getEntropy(generatedPassword))\n        // eslint-disable-next-line\n    }, [settings.passwordSettings]);\n\n    useEffect(() => {\n        setUsername(generateUsername(settings.usernameSettings))\n    }, [settings.usernameSettings]);\n\n    // eslint-disable-next-line\n    const checkHibp = useCallback(debounce(\n        passwordStr =>\n            getSha1Hash(passwordStr)\n                .then(lookupHibp), 500), []);\n\n    const copyToClipboard = text => navigator.clipboard.writeText(text)\n        .then(() => {\n            if (snackbarOpen) {\n                setSnackbarOpen(false);\n                setTimeout(() => setSnackbarOpen(true), 100)\n            } else\n                setSnackbarOpen(true);\n        });\n\n    const onPasswordChange = text => {\n        setPassword(text);\n        checkHibp(text);\n        setEntropy(getEntropy(text))\n    };\n\n    const closeSettings = () => setSettings(current => ({...current, dialogOpen: false}));\n\n    return <>\n        <Dialog open={settings.dialogOpen} onClose={closeSettings}>\n            <DialogTitle\n                style={{zIndex: 1}}>{settings.dialogType === 'username' ? 'Username' : 'Password'} Options</DialogTitle>\n            <DialogContent>\n                {settings.dialogType === 'username' && <>\n                    Length: {settings.usernameSettings.length}\n                    <Slider value={settings.usernameSettings.length}\n                            step={1}\n                            min={6}\n                            max={24}\n                            onChange={(e, value) =>\n                                setSettings(current => ({\n                                    ...current,\n                                    usernameSettings: {\n                                        length: value\n                                    }\n                                }))}/>\n                </>}\n                {settings.dialogType === 'password' && <>\n                    Length: {settings.passwordSettings.length}\n                    <Slider value={settings.passwordSettings.length}\n                            step={1}\n                            min={6}\n                            max={64}\n                            onChange={(e, value) =>\n                                setSettings(current => ({\n                                    ...current,\n                                    passwordSettings: {\n                                        ...current.passwordSettings,\n                                        length: value\n                                    }\n                                }))}/>\n                    <FormControl>\n                        <OptionsFormGroup>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.lower}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         lower: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'a-z'}/>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.upper}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         upper: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'A-Z'}/>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.digits}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         digits: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'0-9'}/>\n                            <FormControlLabel control={<Checkbox checked={settings.passwordSettings.symbols}\n                                                                 onChange={e => setSettings(current => ({\n                                                                     ...current,\n                                                                     passwordSettings: {\n                                                                         ...current.passwordSettings,\n                                                                         symbols: e.target.checked\n                                                                     }\n                                                                 }))}/>}\n                                              label={'!@#$%^&*'}/>\n                        </OptionsFormGroup>\n                    </FormControl>\n                </>}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={closeSettings}>Close</Button>\n            </DialogActions>\n        </Dialog>\n        <Snackbar\n            anchorOrigin={{vertical: 'top', horizontal: 'center'}}\n            open={snackbarOpen}\n            autoHideDuration={3000}\n            onClose={() => setSnackbarOpen(false)}>\n            <Alert severity=\"success\" variant={'filled'}>Copied</Alert>\n        </Snackbar>\n        <Container>\n            <TextFieldContainer>\n                <StyledTextField\n                    variant={'outlined'}\n                    label={'Random Username'}\n                    value={username}\n                    fullWidth\n                    onChange={e => setUsername(e.target.value)}\n                    InputProps={{\n                        endAdornment:\n                            <>\n                                <IconButton onClick={() => copyToClipboard(username)}>\n                                    <FileCopyIcon/>\n                                </IconButton>\n                                <IconButton\n                                    onClick={() => setUsername(generateUsername(settings.usernameSettings))}>\n                                    <ReplayIcon/>\n                                </IconButton>\n                            </>\n                    }}\n                />\n                <StyledIconButton onClick={() => setSettings(current => ({\n                    ...current,\n                    dialogOpen: true,\n                    dialogType: 'username'\n                }))}><SettingsIcon/></StyledIconButton>\n            </TextFieldContainer>\n            <TextFieldContainer>\n                <StyledTextField\n                    variant={'outlined'}\n                    label={'Type a password'}\n                    value={password}\n                    fullWidth\n                    error={!isLoading && Boolean(hashCount)}\n                    helperText={isLoading ? 'Checking...' :\n                        password === '' ? 'Type a password to check, or generate one' :\n                            hashCount > 0 ? `Password cracked ${formatNumber.format(hashCount)} times` :\n                                'Password has not been cracked'}\n                    onChange={e => onPasswordChange(e.target.value)}\n                    InputProps={{\n                        endAdornment:\n                            <>\n                                <IconButton onClick={() => copyToClipboard(password)}>\n                                    <FileCopyIcon/>\n                                </IconButton>\n                                <IconButton\n                                    onClick={() => onPasswordChange(generatePassword(settings.passwordSettings))}>\n                                    <ReplayIcon/>\n                                </IconButton>\n                            </>\n                    }}\n                />\n                <StyledIconButton onClick={() => setSettings(current => ({\n                    ...current,\n                    dialogOpen: true,\n                    dialogType: 'password'\n                }))}><SettingsIcon/></StyledIconButton>\n            </TextFieldContainer>\n            <PasswordDetailGrid>\n                <Typography variant={'body1'} color={entropy.hasLowerCase ? 'textPrimary' : 'textSecondary'}>Lowercase\n                    letters </Typography>\n                {entropy.hasLowerCase ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'} color={entropy.hasUpperCase ? 'textPrimary' : 'textSecondary'}>Uppercase\n                    letters</Typography>\n                {entropy.hasUpperCase ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'}\n                            color={entropy.hasDigits ? 'textPrimary' : 'textSecondary'}>Digits</Typography>\n                {entropy.hasDigits ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'} color={entropy.hasSymbols ? 'textPrimary' : 'textSecondary'}>Symbols\n                    (@#...)</Typography>\n                {entropy.hasSymbols ? <GreenCheck/> : <GreyCross/>}\n\n                <Typography variant={'body1'}>Entropy\n                    <Tooltip\n                        arrow\n                        enterTouchDelay={100}\n                        interactive\n                        title={'A measure of how secure the password is. 128 bits is recommended for most people.'}>\n                        <IconButton tabIndex={-1}>\n                            <InfoOutlinedIcon/>\n                        </IconButton>\n                    </Tooltip>\n                </Typography>\n                <Typography\n                    variant={'body1'}>{entropy.totalEntropy && (formatDecimal.format(entropy.totalEntropy) + ' bits')}</Typography>\n\n                <Typography variant={'body1'}>Time to crack\n                    <Tooltip\n                        arrow\n                        enterTouchDelay={100}\n                        interactive\n                        title={'Based on the current Bitcoin hashrate (200 EH/s)'}>\n                        <IconButton tabIndex={-1}>\n                            <InfoOutlinedIcon/>\n                        </IconButton>\n                    </Tooltip>\n                </Typography>\n                <Typography\n                    variant={'body1'}>{Number.isFinite(secondsToBruteforce) && formatLargeDuration(secondsToBruteforce)}</Typography>\n            </PasswordDetailGrid>\n\n\n        </Container>\n\n    </>\n};","import {baseApi} from \"../../app/network-core/baseApi\";\n\n\nconst homeAutomationApi = baseApi.injectEndpoints({\n    endpoints: build => ({\n        sendCommand: build.mutation({\n            query: command => ({\n                url: 'home-automation/send',\n                method: 'POST',\n                body: {command}\n            })\n        })\n    })\n})\n\nexport const {useSendCommandMutation} = homeAutomationApi","import {Button, FormControl, InputLabel, MenuItem, Select, Snackbar} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\nimport React, {useState} from \"react\";\nimport styled from 'styled-components'\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\nimport {useSendCommandMutation} from \"./homeAutomationApi\";\n\nconst StyledContainer = styled.form`\n  display: flex;\n  max-width: 600px;\n  height: 200px;\n  justify-content: space-between;\n  flex-direction: column;\n  padding: 20px;\n  ${BACKGROUND_COLOR};\n`;\n\nexport const COMMANDS = {\n    gate_toggle: 'Gate: Toggle',\n    ac_off: 'AC: Off',\n    ac_on_24: 'AC: On @ 24°C',\n    ac_on_25: 'AC: On @ 25°C',\n    ceiling_fan_on: 'Ceiling Fan: On',\n    ceiling_fan_off: 'Ceiling Fan: Off',\n    dyson_fan_on: 'Dyson Fan: On',\n    dyson_fan_off: 'Dyson Fan: Off',\n};\n\nexport const HomeAutomation = () => {\n    const [sendCommand] = useSendCommandMutation()\n\n    const [snackbar, setSnackbar] = useState();\n    const [disabled, setDisabled] = useState(false);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setDisabled(true);\n        setTimeout(() => setDisabled(false), 2000);\n        sendCommand(e.target.command.value).unwrap().then(() => setSnackbar(true));\n    };\n\n    return <>\n        <Snackbar\n            anchorOrigin={{vertical: 'top', horizontal: 'center'}}\n            open={snackbar}\n            onClose={() => setSnackbar(false)}\n            autoHideDuration={3000}>\n            <Alert\n                variant={'filled'}\n                severity={'success'}>\n                Command sent\n            </Alert>\n        </Snackbar>\n        <StyledContainer\n            onSubmit={handleSubmit}>\n\n            <FormControl>\n                <InputLabel>Command</InputLabel>\n                <Select\n                    defaultValue={Object.entries(COMMANDS)[0][0]}\n                    name={'command'}\n                    required>\n                    {Object.entries(COMMANDS).map(([k, v]) => <MenuItem value={k} key={k}>{v}</MenuItem>)}\n                </Select>\n            </FormControl>\n            <Button\n                disabled={disabled}\n                variant={'contained'}\n                color={'primary'}\n                type={'submit'}>\n                Send command\n            </Button>\n        </StyledContainer>\n    </>\n};","import InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport {IconButton, InputAdornment, Tooltip} from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\n/*Textfield with clear and info buttons*/\nexport const TextFieldClearableInfo = ({info, onChange, ...props}) => {\n\n    return <TextField\n        {...props}\n        onChange={onChange}\n        InputProps={{\n            ...props.InputProps,\n            endAdornment:\n                <InputAdornment position={'end'}>\n                    {props.value &&\n                    <ClearIcon style={{cursor: 'pointer'}} onClick={() => onChange('')}/>}\n                    {info && <InputAdornment position={'end'}>\n                        <Tooltip\n                            arrow\n                            enterTouchDelay={100}\n                            interactive\n                            title={info}>\n                            <IconButton tabIndex={-1}>\n                                <InfoOutlinedIcon/>\n                            </IconButton>\n                        </Tooltip>\n                    </InputAdornment>}\n                    {props.InputProps?.endAdornment}\n                </InputAdornment>\n        }}\n    />\n};","import marked from 'marked'\n\n\nexport const explanatoryText = marked(`\nThis calculates a 1:1 put spread (not the 1:1.1 as described in *The Options Edge*)\n\nRehedge in first month ONLY if SPY has moved > 3% from the previous month.\n\n|                   |                                                      |\n|-------------------|------------------------------------------------------|\n| Hedge instrument: | Long 1 year ATM SPY puts, short 3m 8.6% OTM SPY puts |\n| Beta of DPYA:     | 0.99                                                 |\n| Beta of IWDP:     | 0.99                                                 |\n| Beta of IWDA:     | 0.89                                                 |\n| Portfolio Beta:   | 1 (since I'm only hedging CSPX and IWDA)             |\n`)","import {useWatch} from \"react-hook-form\";\nimport React from \"react\";\n\n/*Isolate rendering of an array of fields (convenience)*/\nexport const FieldUseWatch = ({control, fieldsToWatch, Component}) => {\n    const fields = useWatch({\n        control,\n        name: fieldsToWatch,\n    });\n    return <Component fields={fields}/>\n};","import {TextFieldClearableInfo} from \"../../shared/components/textFieldClearableInfo\";\nimport Cleave from \"cleave.js/react\";\nimport React from \"react\";\n\nconst CleaveTextField = ({inputRef, ...props}) =>\n    <Cleave\n        htmlRef={inputRef}\n        {...props}\n    />;\n\n/*Textfield with clear and info buttons, and currency formatting\n* Permanently shrunk*/\nexport const TextFieldClearableInfoCurrency = ({info, onChange, InputProps, ...props}) => {\n\n    return <TextFieldClearableInfo\n        {...props}\n        info={info}\n        InputLabelProps={{ shrink: true }}\n        InputProps={{\n            ...InputProps,\n            inputComponent: CleaveTextField,\n            inputProps: {\n                options: {\n                    numeral: true,\n                    prefix: '$',\n                    rawValueTrimPrefix: true,\n                }\n            },\n            onChange: e => onChange(e.target.rawValue)\n        }}\n        onChange={onChange}\n    />\n};","import { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Typography } from \"@material-ui/core\";\nimport { trim } from \"lodash\";\nimport React from \"react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport * as yup from \"yup\";\nimport { BACKGROUND_COLOR } from \"../../shared/components/backgroundScreen\";\nimport { TextFieldClearable } from \"../../shared/components/textFieldClearable\";\nimport { TextFieldClearableInfo } from \"../../shared/components/textFieldClearableInfo\";\nimport { explanatoryText } from \"./explanatoryText\";\nimport { FieldUseWatch } from \"./FieldUseWatch\";\nimport { TextFieldClearableInfoCurrency } from \"./TextFieldClearableInfoCurrency\";\n\nconst FIELDS = {\n  portfolioValue: \"portfolioValue\",\n  spyPrice: \"spyPrice\",\n  hedgeRatio: \"hedgeRatio\",\n  delta: \"delta\",\n};\n\nconst emptyStringToUndefined = (val, origVal) =>\n  trim(origVal) === \"\" ? undefined : val;\n\nconst schema = yup.object({\n  portfolioValue: yup\n    .number()\n    .positive()\n    .required()\n    .transform(emptyStringToUndefined),\n  spyPrice: yup\n    .number()\n    .positive()\n    .required()\n    .transform(emptyStringToUndefined),\n  hedgeRatio: yup\n    .number()\n    .positive()\n    .max(1)\n    .required()\n    .transform(emptyStringToUndefined),\n  delta: yup\n    .number()\n    .positive()\n    .max(1)\n    .required()\n    .transform(emptyStringToUndefined),\n});\n\nconst Container = styled.div`\n  ${BACKGROUND_COLOR};\n  max-width: 600px;\n`;\n\nconst StyledTypography = styled(Typography)`\n  p {\n    margin: 0 0 10px;\n  }\n`;\n\nconst StyledTextFieldClearable = styled(TextFieldClearable)`\n  margin: 10px;\n  width: min(300px, calc(100vw - 20px));\n`;\n\nconst StyledTextFieldClearableInfo = styled(TextFieldClearableInfo)`\n  margin: 10px;\n  width: min(300px, calc(100vw - 20px));\n`;\n\nconst StyledTextFieldClearableInfoCurrency = styled(\n  TextFieldClearableInfoCurrency\n)`\n  margin: 10px;\n  width: min(300px, calc(100vw - 20px));\n`;\n\nconst formatNoDecimals = new Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 0,\n});\n\nconst formatDecimals = new Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 1,\n});\n\nconst formatDollars = new Intl.NumberFormat(undefined, {\n  style: \"currency\",\n  currency: \"USD\",\n  currencyDisplay: \"symbol\",\n});\n\nexport const OptionHedgeCalculator = () => {\n  const { control } = useForm({\n    mode: \"onTouched\",\n    resolver: yupResolver(schema),\n    defaultValues: {\n      [FIELDS.portfolioValue]: \"\",\n      [FIELDS.spyPrice]: \"\",\n      [FIELDS.hedgeRatio]: 0.47,\n      [FIELDS.delta]: \"\",\n    },\n  });\n\n  return (\n    <Container>\n      <StyledTypography\n        variant={\"body1\"}\n        dangerouslySetInnerHTML={{ __html: explanatoryText }}\n      ></StyledTypography>\n\n      <Controller\n        name={FIELDS.portfolioValue}\n        control={control}\n        render={({ field: { ref, ...field }, fieldState: { error } }) => (\n          <StyledTextFieldClearableInfoCurrency\n            {...field}\n            error={Boolean(error)}\n            helperText={error?.message}\n            info={\"Take beta of IWDA to be 0.89 and exclude bonds e.g. AGGU\"}\n            label={\"Beta-weighted Portfolio Value (USD)\"}\n            variant={\"outlined\"}\n          />\n        )}\n      />\n\n      <Controller\n        name={FIELDS.spyPrice}\n        control={control}\n        render={({ field: { ref, ...field }, fieldState: { error } }) => (\n          <StyledTextFieldClearable\n            {...field}\n            error={Boolean(error)}\n            helperText={error?.message}\n            label={\"SPY Price\"}\n            variant={\"outlined\"}\n          />\n        )}\n      />\n\n      <FieldUseWatch\n        control={control}\n        fieldsToWatch={[FIELDS.spyPrice]}\n        Component={({ fields: [spyPrice] }) => (\n          <Typography variant={\"body1\"}>\n            Strike price for short 8.6% delta OTM, 90-day put:{\" \"}\n            {formatNoDecimals.format(0.914 * spyPrice)}\n          </Typography>\n        )}\n      />\n\n      <Controller\n        name={FIELDS.hedgeRatio}\n        control={control}\n        render={({ field: { ref, ...field }, fieldState: { error } }) => (\n          <StyledTextFieldClearableInfo\n            {...field}\n            error={Boolean(error)}\n            info={\n              \"% of portfolio value to hedge using put options (via delta equivalent amount)\"\n            }\n            helperText={error?.message}\n            label={\"Hedge Ratio\"}\n            variant={\"outlined\"}\n          />\n        )}\n      />\n\n      <FieldUseWatch\n        control={control}\n        fieldsToWatch={[FIELDS.hedgeRatio, FIELDS.portfolioValue]}\n        Component={({ fields: [hedgeRatio, portfolioValue] }) => (\n          <Typography variant={\"body1\"}>\n            Notional amount to hedge:{\" \"}\n            {formatDollars.format(portfolioValue * hedgeRatio)}\n          </Typography>\n        )}\n      />\n\n      <Controller\n        name={FIELDS.delta}\n        control={control}\n        render={({ field: { ref, ...field }, fieldState: { error } }) => (\n          <StyledTextFieldClearableInfo\n            {...field}\n            error={Boolean(error)}\n            info={\n              \"Delta of each spread with OTM 8.6% put sold, per option e.g. 0.250\"\n            }\n            label={\"Delta\"}\n            helperText={error?.message}\n            variant={\"outlined\"}\n          />\n        )}\n      />\n\n      <FieldUseWatch\n        control={control}\n        fieldsToWatch={[\n          FIELDS.portfolioValue,\n          FIELDS.hedgeRatio,\n          FIELDS.delta,\n          FIELDS.spyPrice,\n        ]}\n        Component={({\n          fields: [portfolioValue, hedgeRatio, delta, spyPrice],\n        }) => (\n          <Typography variant={\"body1\"}>\n            Number of spreads required (i.e. standard option contracts):\n            {formatDecimals.format(\n              (portfolioValue * hedgeRatio) / (delta * spyPrice * 100)\n            )}\n          </Typography>\n        )}\n      />\n    </Container>\n  );\n};\n\n/*Testing case:\n *\n * Beta-weighted portfolio value in USD: 1000000\n * Current price of SPY: 300\n * OTM Put Strike to sell: 274.2\n * Hedge ratio: 0.47\n * Notional amount: 470000.0\n * Delta of 8.6% OTM put spread: 0.21\n * Number of spreads required (i.e. option contracts): 74.60317460317461\n * */\n","import { baseApi } from \"../../app/network-core/baseApi\";\nimport { BaseListItemSkeleton } from \"../../shared/components/GenericList/BaseListItemSkeleton\";\n\nbaseApi.enhanceEndpoints({\n  addTagTypes: [\"lists\"],\n});\n\n/* Optimistic updates for update and delete operations */\nconst listApi = baseApi.injectEndpoints({\n  endpoints: (build) => ({\n    getLists: build.query({\n      query: () => `lists/lists/`,\n      providesTags: [\"lists\"],\n    }),\n\n    createList: build.mutation({\n      query: ({ title }) => ({\n        url: `lists/lists/`,\n        method: \"POST\",\n        body: { title },\n      }),\n\n      /* TODO Invalidate cache for now since I'm not sure if lists are sorted\n            alphabetically by the server. Optimistically create in the future */\n      invalidatesTags: [\"lists\"],\n    }),\n\n    updateList: build.mutation({\n      query: ({ id, title }) => ({\n        url: `lists/lists/${id}/`,\n        method: \"PUT\",\n        body: { id, title },\n      }),\n\n      /* Optimistically update */\n      onQueryStarted: ({ id, ...data }, { dispatch, queryFulfilled }) => {\n        let result = dispatch(\n          listApi.util.updateQueryData(\"getLists\", undefined, (draft) => {\n            let obj = draft.find((e) => e.id === id);\n            Object.assign(obj, data);\n          })\n        );\n        queryFulfilled.catch(result.undo);\n      },\n    }),\n\n    deleteList: build.mutation({\n      query: ({ id }) => ({\n        url: `lists/lists/${id}/`,\n        method: \"DELETE\",\n      }),\n\n      /* Optimistically delete */\n      onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n        let result = dispatch(\n          listApi.util.updateQueryData(\"getLists\", undefined, (draft) =>\n            draft.filter((e) => e.id !== id)\n          )\n        );\n        queryFulfilled.catch(result.undo);\n      },\n    }),\n\n    getItems: build.query({\n      query: ({ list }) => `lists/lists/${list}/items/`,\n    }),\n\n    createItem: build.mutation({\n      query: ({ list, title, notes, due_date, pinned }) => ({\n        url: `lists/lists/${list}/items/`,\n        method: \"POST\",\n        body: { title, notes, list, due_date, pinned},\n      }),\n\n      onQueryStarted: ({ list }, { dispatch, queryFulfilled }) => {\n        /* Optimistically show skeleton */\n        let result = dispatch(\n          listApi.util.updateQueryData(\"getItems\", { list }, (draft) => {\n            draft.unshift(BaseListItemSkeleton());\n          })\n        );\n        queryFulfilled.then(result.undo).catch(result.undo);\n\n        /* Update getItems with the newly created item on success, and remove skeleton*/\n        queryFulfilled.then(({ data }) => {\n          dispatch(\n            listApi.util.updateQueryData(\"getItems\", { list }, (draft) => {\n              draft.unshift(data);\n            })\n          );\n        });\n      },\n    }),\n\n    updateItem: build.mutation({\n      query: ({ list, id, title, notes, due_date, pinned }) => ({\n        url: `lists/lists/${list}/items/${id}/`,\n        method: \"PATCH\",\n        body: { title, notes, list, due_date, pinned },\n      }),\n\n      /* Optimistically update the item (it will exist in cache IF createItem\n         was successful, due to onQueryStarted in createItem) */\n      onQueryStarted: ({ list, id, ...data }, { dispatch, queryFulfilled }) => {\n        let result = dispatch(\n          listApi.util.updateQueryData(\"getItems\", { list }, (draft) => {\n            let obj = draft.find((e) => e.id === id);\n            Object.assign(obj, data);\n          })\n        );\n        queryFulfilled\n          .then(({ data: successData }) =>\n            dispatch(\n              listApi.util.updateQueryData(\"getItems\", { list }, (draft) => {\n                let obj = draft.find((e) => e.id === id);\n                Object.assign(obj, successData);\n              })\n            )\n          )\n          .catch(result.undo);\n      },\n    }),\n\n    deleteItem: build.mutation({\n      query: ({ list, id }) => ({\n        url: `lists/lists/${list}/items/${id}/`,\n        method: \"DELETE\",\n      }),\n\n      /* Optimistically delete item */\n      onQueryStarted: ({ list, id }, { dispatch, queryFulfilled }) => {\n        let result = dispatch(\n          listApi.util.updateQueryData(\"getItems\", { list }, (draft) =>\n            draft.filter((e) => e.id !== id)\n          )\n        );\n        queryFulfilled.catch(result.undo);\n      },\n    }),\n  }),\n});\n\nexport const {\n  useGetListsQuery,\n  useCreateListMutation,\n  useUpdateListMutation,\n  useDeleteListMutation,\n\n  useGetItemsQuery,\n  useCreateItemMutation,\n  useUpdateItemMutation,\n  useDeleteItemMutation,\n} = listApi;\n","import { IconButton, ListItemText, Menu, MenuItem } from \"@material-ui/core\";\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { useState } from 'react';\nimport { StyledListItem } from '../../shared/components/GenericList/StyledListItem'\nimport {StyledListItemSecondaryAction } from '../../shared/components/GenericList/StyledListItemSecondaryAction'\nimport { useDeleteListMutation, useUpdateListMutation } from \"./listApi\";\n \n/* An individual list shown in the drawer. */\nexport const List = ({ onClick, list: { title, id } }) => {\n\n    const [deleteList] = useDeleteListMutation()\n    const [updateList] = useUpdateListMutation()\n\n    const [anchorEl, setAnchorEl] = useState()\n\n    const stopPropagation = func => e => {\n        e.stopPropagation()\n        func(e)\n    }\n\n    const editTitle = () => {\n        setAnchorEl(undefined)\n        let newTitle = prompt('Enter new title:', title)\n        if (newTitle) {\n            updateList({ title: newTitle, id })\n        }\n    }\n\n    return (\n        <StyledListItem\n            button\n            onClick={onClick}\n            $hideBackground\n            $reserveSpace={false}>\n            <Menu\n                anchorEl={anchorEl}\n                open={!!anchorEl}\n                onClose={stopPropagation(() => setAnchorEl(undefined))}>\n                <MenuItem onClick={stopPropagation(editTitle)}>Edit</MenuItem>\n                <MenuItem onClick={stopPropagation(() => deleteList({ id }))}>Delete</MenuItem>\n            </Menu>\n            <ListItemText\n                primary={title}\n                primaryTypographyProps={{ noWrap: true }}\n            />\n            <StyledListItemSecondaryAction>\n                <IconButton\n                    edge={'end'}\n                    onClick={stopPropagation(e => setAnchorEl(e.currentTarget))}>\n                    <MoreVertIcon />\n                </IconButton>\n            </StyledListItemSecondaryAction>\n\n        </StyledListItem>\n    )\n};\n","import {\n  Button,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  IconButton,\n  ListItemIcon,\n  ListItemText,\n  ThemeProvider,\n} from \"@material-ui/core\";\nimport { orange, red } from \"@material-ui/core/colors\";\nimport { createTheme } from \"@material-ui/core/styles\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport StarIcon from \"@material-ui/icons/Star\";\nimport { differenceInCalendarDays, parseISO } from \"date-fns\";\nimport React, { useState } from \"react\";\nimport { ItemSkeleton } from \"../../shared/components/GenericList/ItemSkeleton\";\nimport { StyledListItem } from \"../../shared/components/GenericList/StyledListItem\";\nimport { StyledListItemSecondaryAction } from \"../../shared/components/GenericList/StyledListItemSecondaryAction\";\nimport { truncateString } from \"../../shared/util\";\n\nconst theme = createTheme({\n  palette: {\n    primary: red,\n    secondary: orange,\n  },\n});\n\n/**\n * A ListItem component which can show title, notes and a delete button on hover.\n * Will ask for confirmation on delete.\n */\nexport const ListItem = ({\n  primaryTextKey = \"title\",\n  secondaryTextKey = \"notes\",\n}) =>\n  function GeneratedBaseListItem({\n    context,\n    deleteItemMutation,\n    itemIdField,\n    isSkeleton,\n    item,\n    setEditingItem,\n  }) {\n    const [deleteItem] = deleteItemMutation();\n    const [dialogOpen, setDialogOpen] = useState(false);\n\n    /* Avoid destructuring item if it's a skeleton */\n    if (isSkeleton(item)) {\n      return (\n        <StyledListItem>\n          <ItemSkeleton />\n        </StyledListItem>\n      );\n    }\n\n    const { [primaryTextKey]: primaryText, [secondaryTextKey]: secondaryText } =\n      item;\n    const closeDialog = () => setDialogOpen(false);\n    const daysToDue = differenceInCalendarDays(\n      parseISO(item.due_date),\n      new Date()\n    );\n    const daysToDueText =\n      daysToDue === 0\n        ? \"Today\"\n        : daysToDue === 1\n        ? \"Tomorrow\"\n        : daysToDue < 1\n        ? `${Math.abs(daysToDue)} day${Math.abs(daysToDue) > 1 ? \"s\" : \"\"} ago`\n        : `In ${daysToDue} days`;\n\n    return (\n      <>\n        <Dialog open={dialogOpen} onClose={closeDialog}>\n          <DialogTitle>\n            Delete '{truncateString(primaryText, 30)}' ?\n          </DialogTitle>\n          <DialogActions>\n            <Button\n              onClick={() =>\n                deleteItem({ [itemIdField]: item[itemIdField], ...context })\n              }\n              color={\"primary\"}\n            >\n              Delete\n            </Button>\n            <Button onClick={closeDialog}>Cancel</Button>\n          </DialogActions>\n        </Dialog>\n        <StyledListItem\n          button\n          onClick={() => setEditingItem(item)}\n          $reserveSpace={true}\n        >\n          {item.pinned && (\n            <ListItemIcon>\n              <StarIcon />\n            </ListItemIcon>\n          )}\n          <ListItemText\n            primary={primaryText}\n            secondaryTypographyProps={{ component: \"div\", noWrap: true }}\n            secondary={\n              <div>\n                <div>{secondaryText}</div>\n                {item.due_date && (\n                  <div>\n                    <ThemeProvider theme={theme}>\n                      <Chip\n                        label={daysToDueText}\n                        icon={<ScheduleIcon />}\n                        color={\n                          daysToDue < 1\n                            ? \"primary\"\n                            : daysToDue < 4\n                            ? \"secondary\"\n                            : \"default\"\n                        }\n                        style={{\n                          ...(daysToDue > 3 && {\n                            color: \"inherit\",\n                            border: \"1px solid rgba(128,128,128,0.6)\",\n                          }),\n                        }}\n                        variant={\"outlined\"}\n                        size={\"small\"}\n                      />\n                    </ThemeProvider>\n                  </div>\n                )}\n              </div>\n            }\n          />\n          <StyledListItemSecondaryAction>\n            <IconButton\n              edge={\"end\"}\n              onClick={(e) => {\n                e.stopPropagation();\n                setDialogOpen(true);\n              }}\n            >\n              <DeleteIcon />\n            </IconButton>\n          </StyledListItemSecondaryAction>\n        </StyledListItem>\n      </>\n    );\n  };\n","import CodeMirror from \"codemirror/lib/codemirror\";\n\nconst updateBottomMargin = cm => {\n\n    // Fixed 300px of virtual height if lineCount > 1\n    let padding = '';\n\n    if (cm.lineCount() > 1) {\n        // const totalH = cm.display.scroller.clientHeight - 30,\n        //     lastLineH = cm.getLineHandle(cm.lastLine()).height;\n        // padding = (totalH - lastLineH) + \"px\";\n        padding = '300px';\n    }\n\n    if (cm.state.scrollPastEndPadding !== padding) {\n        cm.state.scrollPastEndPadding = padding;\n        cm.display.lineSpace.parentNode.style.paddingBottom = padding;\n        cm.off(\"refresh\", updateBottomMargin);\n        cm.setSize();\n        cm.on(\"refresh\", updateBottomMargin);\n    }\n};\n\nconst onChange = (cm, change) => {\n    if (CodeMirror.changeEnd(change).line === cm.lastLine())\n        updateBottomMargin(cm);\n};\n\n\nCodeMirror.defineOption(\"scrollPastEnd\", false, (cm, val, old) => {\n\n    // I think this turns off the mode\n    if (old && old !== CodeMirror.Init) {\n        cm.off(\"change\", onChange);\n        cm.off(\"refresh\", updateBottomMargin);\n        cm.display.lineSpace.parentNode.style.paddingBottom = \"\";\n        cm.state.scrollPastEndPadding = null;\n    }\n\n    if (val) {\n        cm.on(\"change\", onChange);\n        cm.on(\"refresh\", updateBottomMargin);\n        updateBottomMargin(cm);\n    }\n});","import {UnControlled as CodeMirror} from 'react-codemirror2';\nimport 'codemirror/lib/codemirror.css'\nimport './codemirror.css'\nimport 'codemirror/mode/gfm/gfm'\nimport 'codemirror/addon/edit/closebrackets'\nimport 'codemirror/addon/edit/matchbrackets'\nimport 'codemirror/addon/selection/mark-selection'\nimport 'codemirror/addon/selection/active-line'\nimport 'codemirror/addon/display/autorefresh'\nimport './scrollPastEnd'\nimport {useEffect, useState} from \"react\";\n\n/*\n * Uncontrolled component. Modifying defaultValue after first mount will not trigger re-renders.\n */\nexport const MarkdownEditor = ({defaultValue, onChange}) => {\n\n    const [instance, setInstance] = useState(null);\n    const [initialValue, setInitialValue] = useState();\n    const [loaded, setLoaded] = useState(false);\n\n    /*Necessary to fix wrong Codemirror-sizer instance when mounted within\n    an OverlayScrollbars component with lineWrapping: true*/\n    useEffect(() => instance?.refresh(), [instance]);\n\n    // Set default value on first mount, and ignore all further updates\n\n    useEffect(() => {\n        setInitialValue(defaultValue);\n        setLoaded(true)\n        // eslint-disable-next-line\n    }, []);\n\n    return loaded\n        ? <CodeMirror\n            value={initialValue}\n            options={{\n                theme: 'codemirror',\n                mode: {\n                    name: 'gfm',\n                    highlightFormatting: true,\n                },\n                lineNumbers: true,\n                lineWrapping: true,\n                indentWithTabs: true,\n                viewportMargin: Infinity,\n                autoCloseBrackets: true,\n                matchBrackets: true,\n                styleSelectedText: true,\n                styleActiveLine: true,\n                autoRefresh: true,\n                scrollPastEnd: true\n\n            }}\n            editorDidMount={editor => setInstance(editor)}\n            onChange={(editor, data, newValue) => {\n\n                onChange(newValue);\n            }}\n        />\n        : null\n};\n","import DateFns from \"@date-io/date-fns\";\nimport {\n  Button,\n  Checkbox,\n  FormControlLabel,\n  TextField,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n} from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from \"@material-ui/pickers\";\nimport { formatISO, isValid, parseJSON } from \"date-fns\";\nimport { useMemo } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport styled from \"styled-components\";\nimport { DialogBlurResponsive } from \"../../shared/components/DialogBlurResponsive\";\nimport { MarkdownEditor } from \"../../shared/components/MarkdownEditor/MarkdownEditor\";\nimport { useAutosave } from \"../../shared/useAutosave\";\nimport { formatDistanceToNowPretty } from \"../../shared/util\";\n\nconst FooterRight = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 10px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  margin: 5px 0;\n`;\n\nexport const ListItemEdit = ({\n  editingItem,\n  closeEdit,\n  context,\n  isItemEmpty,\n  itemIdField,\n  createItemMutation,\n  updateItemMutation,\n  deleteItemMutation,\n}) => {\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  const [createItem] = createItemMutation();\n  const [updateItem] = updateItemMutation();\n  const [deleteItem] = deleteItemMutation();\n\n  const useAutosaveOptions = useMemo(\n    () => ({\n      id: editingItem[itemIdField],\n      updateItem: (id, data) =>\n        updateItem({ ...context, [itemIdField]: id, ...data }),\n      createItem: (data) =>\n        createItem({ ...context, ...data })\n          .unwrap()\n          .then((res) => res.id),\n      deleteItem: (id) => deleteItem({ ...context, [itemIdField]: id }),\n      itemIsEmpty: isItemEmpty,\n    }),\n    [\n      context,\n      createItem,\n      deleteItem,\n      editingItem,\n      isItemEmpty,\n      itemIdField,\n      updateItem,\n    ]\n  );\n  console.log(editingItem);\n\n  const { onChange, flush } = useAutosave(useAutosaveOptions);\n\n  const initialTitle = editingItem.title || \"\";\n  const initialNotes = editingItem.notes || \"\";\n\n  const { register, getValues, setValue } = useForm({\n    defaultValues: {\n      title: initialTitle,\n      notes: initialNotes,\n      due_date: editingItem.due_date || null,\n      pinned: editingItem.pinned,\n    },\n  });\n\n  register(\"title\");\n  register(\"notes\");\n  register(\"due_date\");\n  register(\"pinned\");\n\n  const onClose = () => {\n    flush();\n    closeEdit();\n  };\n\n  /* If there is any update, it must be after a create.\n    startedTimeStamp are used because fulfilledTimeStamp is reset when a \n    new mutation is requested, causing the UI to default to editingItem.updated\n    momentarily.*/\n  const lastSavedTimeString = editingItem.updated\n    ? formatDistanceToNowPretty(parseJSON(editingItem.updated))\n    : \"\";\n\n  /* Prefer operations with the latest possible time */\n  const lastCreatedTimeString = editingItem.created\n    ? formatDistanceToNowPretty(parseJSON(editingItem.created))\n    : \"\";\n\n  return (\n    <DialogBlurResponsive\n      open\n      onClose={onClose}\n      footer={\n        <Footer>\n          <Tooltip\n            arrow\n            enterTouchDelay={100}\n            interactive\n            title={\n              lastCreatedTimeString\n                ? `Created ${lastCreatedTimeString}`\n                : \"Not yet created\"\n            }\n          >\n            <Typography variant={\"body2\"} color={\"textSecondary\"}>\n              {lastSavedTimeString\n                ? `Last saved ${lastSavedTimeString}`\n                : \"New item\"}\n            </Typography>\n          </Tooltip>\n          <FooterRight>\n            <Button variant={\"text\"} color={\"primary\"} onClick={onClose}>\n              Close\n            </Button>\n          </FooterRight>\n        </Footer>\n      }\n    >\n      <StyledTextField\n        label=\"Title\"\n        multiline\n        fullWidth\n        name={\"title\"}\n        autoFocus={!initialTitle && !initialNotes}\n        defaultValue={initialTitle}\n        variant={\"outlined\"}\n        onChange={(e) => {\n          setValue(\"title\", e.target.value);\n          onChange(getValues());\n        }}\n      />\n      {fullScreen ? (\n        <StyledTextField\n          label=\"Notes\"\n          multiline\n          fullWidth\n          defaultValue={getValues(\"notes\")}\n          variant={\"outlined\"}\n          onChange={(e) => {\n            setValue(\"notes\", e.target.value);\n            onChange(getValues());\n          }}\n        />\n      ) : (\n        <MarkdownEditor\n          defaultValue={getValues(\"notes\")}\n          onChange={(newVal) => {\n            setValue(\"notes\", newVal);\n            onChange(getValues());\n          }}\n        />\n      )}\n      <MuiPickersUtilsProvider utils={DateFns}>\n        <KeyboardDatePicker\n          autoOk\n          value={editingItem.due_date || null}\n          name={\"due_date\"}\n          onChange={(newVal) => {\n            if (isValid(newVal) || newVal === null) {\n              setValue(\n                \"due_date\",\n                newVal ? formatISO(newVal, { representation: \"date\" }) : null\n              );\n              onChange(getValues());\n              flush();\n            }\n          }}\n          format={\"dd/MM/yyyy\"}\n          placeholder={\"dd/mm/yyyy\"}\n          inputVariant={\"outlined\"}\n        />\n      </MuiPickersUtilsProvider>\n      <FormControlLabel\n        control={\n          <Checkbox\n            name={\"pinned\"}\n            checked={editingItem.pinned}\n            onChange={({ target: { checked } }) => {\n              setValue(\"pinned\", checked);\n              onChange(getValues());\n              flush();\n            }}\n          />\n        }\n      />\n    </DialogBlurResponsive>\n  );\n};\n","import {createSlice} from \"@reduxjs/toolkit\";\n\nexport const listsPath = 'lists'\n\nconst initialState = {\n    currentList: null\n}\n\nexport const listsSlice = createSlice({\n    name: listsPath,\n    initialState,\n    reducers: {\n        setCurrentList: (state, {payload}) => void (state.currentList = payload)\n    }\n})\n\nexport const {\n    setCurrentList\n} = listsSlice.actions\n\nexport const selectCurrentList = state => state[listsPath].currentList","import { differenceInCalendarDays, parseISO } from \"date-fns\";\nimport { useSelector } from \"react-redux\";\nimport { BaseList } from \"../../shared/components/GenericList/BaseList\";\nimport { GenericList } from \"../../shared/components/GenericList/GenericList\";\nimport {\n    useCreateItemMutation,\n    useDeleteItemMutation,\n    useGetItemsQuery,\n    useUpdateItemMutation\n} from \"./listApi\";\nimport { ListItem } from \"./ListItem\";\nimport { ListItemEdit } from \"./ListItemEdit\";\nimport { selectCurrentList } from \"./listsSlice\";\n\nconst List = BaseList({\n  Item: ListItem({\n    primaryTextKey: \"title\",\n    secondaryTextKey: \"notes\",\n  }),\n});\n\n/* List of items, for a particular List. */\nexport const ListItems = () => {\n  const currentList = useSelector(selectCurrentList);\n\n  // useEffect(() => {\n  //     if (!currentList) return;\n\n  //     // Prevent virtuoso from remembering the scroll position of the previously viewed list\n  //     if (virtuosoRef.current) {\n  //         virtuosoRef.current.scrollToIndex({ align: 'top', behavior: 'smooth' })\n  //     }\n  //     // eslint-disable-next-line\n  // }, [currentList]);\n\n  return (\n    <GenericList\n      getItemsQuery={useGetItemsQuery}\n      createItemMutation={useCreateItemMutation}\n      updateItemMutation={useUpdateItemMutation}\n      deleteItemMutation={useDeleteItemMutation}\n      defaultItemValues={{ title: \"\", notes: \"\" }}\n      context={{ list: currentList.id }}\n      itemIdField={\"id\"}\n      List={List}\n      ItemEdit={ListItemEdit}\n      isItemEmpty={(e) => !e.title && !e.notes}\n      sortBy={(a, b) =>\n        a.pinned !== b.pinned\n          ? b.pinned - a.pinned\n          : !(a.due_date && b.due_date)\n          ? Boolean(b.due_date) - Boolean(a.due_date)\n          : differenceInCalendarDays(parseISO(a.due_date), parseISO(b.due_date))\n      }\n    />\n  );\n};\n","import { Button, CircularProgress, IconButton, List as MuiList, Typography } from \"@material-ui/core\";\nimport SyncIcon from '@material-ui/icons/Sync';\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { Loading } from \"../../shared/components/Loading\";\nimport { List } from \"./List\";\nimport { useCreateListMutation, useGetItemsQuery, useGetListsQuery } from \"./listApi\";\nimport { ListItems } from \"./ListItems\";\nimport { selectCurrentList, setCurrentList } from \"./listsSlice\";\n\nconst StyledButton = styled(Button)({\n    margin: '10px',\n});\n\nexport const Lists = ({ setDrawerContent, setTitleContent }) => {\n\n    const dispatch = useDispatch()\n\n    // There is a chance the listId stored is invalid - useEffect below checks for this\n    const currentList = useSelector(selectCurrentList)\n\n    const { data: lists, isFetching: isLoadingLists, refetch: refetchLists } = useGetListsQuery()\n    const { isFetching: isFetchingGetItems, refetch: refetchItems } = useGetItemsQuery({list: currentList?.id}, { skip: !currentList })\n    const [createList] = useCreateListMutation()\n\n    /*Show Lists in app-bar drawer*/\n\n    useEffect(() => void setDrawerContent(<MuiList disablePadding dense>\n        {isLoadingLists ?\n            <div style={{ display: 'flex', 'justifyContent': 'center' }}>\n                <CircularProgress size={20} />\n            </div> :\n            [\n                <StyledButton\n                    key={'CREATE_LIST'}\n                    variant={'contained'}\n                    color={'secondary'}\n                    onClick={() => {\n                        let title = prompt('Enter title:');\n                        if (title) {\n                            createList({ title })\n                        }\n                    }}>\n                    Create new Tasklist\n                </StyledButton>,\n\n                lists?.map(list => <List\n                    key={list.id}\n                    list={list}\n                    onClick={() => dispatch(setCurrentList(list))} />)\n            ]}\n    </MuiList>),\n        [createList, dispatch, isLoadingLists, lists, setDrawerContent])\n\n    useEffect(() => void setTitleContent(<>\n        <Typography variant={\"h6\"} noWrap>\n            {currentList?.title}\n        </Typography>\n        <IconButton\n            onClick={() => {\n                refetchLists()\n                refetchItems()\n            }}\n            disabled={isFetchingGetItems}>\n            <SyncIcon />\n        </IconButton>\n    </>), [currentList, isFetchingGetItems, refetchItems, refetchLists, setTitleContent])\n\n    if (!currentList) return <Loading\n        fullscreen={false}\n        showSpinner={false}\n        message={'Select a list'} />\n\n\n    return <ListItems />\n}\n    ;\n","// /*Add new modules here*/\nimport {Literature} from \"../../modules/Literature/Literature\";\nimport { Account } from \"../../modules/Account/Account\";\nimport { Dvr } from \"../../modules/Dvr/Dvr\"; \nimport {Testing} from \"../../modules/Testing/Testing\";\nimport {PasswordTools} from \"../../modules/PasswordTools/PasswordTools\";\nimport {HomeAutomation} from \"../../modules/HomeAutomation/HomeAutomation\";\nimport {OptionHedgeCalculator} from \"../../modules/OptionHedgeCalculator/OptionHedgeCalculator\";\nimport {Lists} from \"../../modules/Lists/Lists\";\n\nexport const MODULES = {\n    LISTS: {\n        menuName: 'Lists',\n        onlySuperUser: false,\n        element: Lists\n    },\n    LITERATURE: {\n        menuName: 'Literature',\n        onlySuperUser: false,\n        element: Literature\n    },\n    ACCOUNT: {\n        menuName: 'Account',\n        onlySuperUser: false,\n        element: Account\n    },\n    PASSWORDS: {\n        menuName: 'Password Tools',\n        onlySuperUser: false,\n        element: PasswordTools,\n    },\n    HOME_AUTOMATION: {\n        menuName: 'Home Automation',\n        onlySuperUser: true,\n        element: HomeAutomation\n    },\n    DVR: {\n        menuName: 'Dvr',\n        onlySuperUser: true,\n        element: Dvr\n    },\n    OPTION_HEDGE_CALCULATOR: {\n        menuName: 'Option Hedge Calculator',\n        onlySuperUser: false,\n        element: OptionHedgeCalculator\n    },\n    TEST: {\n        menuName: 'Testing',\n        onlySuperUser: true,\n        element: Testing\n    }\n}","import { IconButton, List, ListItem, ListItemIcon, ListItemText, Typography } from \"@material-ui/core\";\nimport SyncIcon from '@material-ui/icons/Sync';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useGetAuthorsQuery, useGetBooksQuery, useGetGenresQuery, useGetTypesQuery } from \"./literatureApi\";\nimport { selectLiteratureSubmodule, setLiteratureSubmodule } from \"./literatureSlice\";\nimport { submodules } from './submodules';\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\n\nexport const Literature = ({ setDrawerContent, setTitleContent }) => {\n\n    const { refetch: refetchBooks, isFetching: isFetchingBooks } = useGetBooksQuery()\n    const { refetch: refetchAuthors, isFetching: isFetchingAuthors } = useGetAuthorsQuery()\n    const { refetch: refetchGenres, isFetching: isFetchingGenres } = useGetGenresQuery()\n    const { refetch: refetchTypes, isFetching: isFetchingTypes } = useGetTypesQuery()\n\n    const isFetching = isFetchingBooks || isFetchingAuthors || isFetchingGenres || isFetchingTypes\n\n    const dispatch = useDispatch()\n    const literatureSubmodule = useSelector(selectLiteratureSubmodule) || Object.keys(submodules)[0]\n\n    /* Used by Genres to display genre rules */\n    const [titleEndAdornment, setTitleEndAdornment] = useState(null)\n\n    useEffect(() => {\n        setDrawerContent(<List disablePadding>\n            {\n                Object.entries(submodules)\n                    .map(([key, { Icon, name }]) =>\n                        <ListItem\n                            key={key}\n                            button\n                            onClick={() => dispatch(setLiteratureSubmodule(key))}>\n                            <ListItemIcon>\n                                <Icon />\n                            </ListItemIcon>\n                            <ListItemText primary={name} />\n                        </ListItem>)\n            }\n        </List>)\n    }, [dispatch, setDrawerContent])\n\n    useEffect(() => {\n        setTitleContent(<>\n            <Typography variant={\"h6\"}>\n                {submodules[literatureSubmodule].name}\n            </Typography>\n            <IconButton\n                onClick={() => {\n                    refetchBooks()\n                    refetchAuthors()\n                    refetchGenres()\n                    refetchTypes()\n                }}\n                disabled={isFetching}>\n                <SyncIcon />\n            </IconButton>\n            {titleEndAdornment}\n        </>)\n    }, [isFetching, literatureSubmodule, refetchAuthors, refetchBooks, refetchGenres, refetchTypes, setTitleContent, titleEndAdornment])\n\n    const { jsx, props } = submodules[literatureSubmodule]\n\n\n    /* NOTE: Required versions as follows:\n    - \"react-dnd-html5-backend\": \"^11.1.3\",\n    - \"react-dnd\": \"^11.1.3\", \n    Provider should appear above Mui-Datatable component, so that it doesn't try to\n    add another DndProvider and cause the 'Cannot have 2 HTML5 backends...' error*/\n    return <DndProvider backend={HTML5Backend}>\n        {React.createElement(jsx, { setTitleEndAdornment, ...props })}\n    </DndProvider >\n};\n","/**\n * Base and authentication endpoints\n * */\n\n/*Base*/\nexport const API_URL = 'https://api.nicholaslyz.com';\nexport const FILES_URL = 'https://files.nicholaslyz.com';","import { Button } from \"@material-ui/core\";\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { BackgroundScreenRounded } from \"../../shared/components/backgroundScreen\";\nimport { selectLoginStatus, setCurrentModule } from \"../appSlice\";\nimport { MODULES } from \"./modules\";\n\nconst GDOCS_ATTRACTIONS_URL = 'https://docs.google.com/document/d/1MS6oLLnTWWhdS_FEr1vudNfsnGBMT2V1GtrmHzDd6s0/edit#';\n\nconst OuterContainer = styled.div`\n  display: flex;\n  justify-content: center;\n`\n\nconst ModulesContainer = styled(BackgroundScreenRounded)`\n  margin: 48px 0;\n  max-width: 300px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst StyledButton = styled(Button)({\n    margin: '10px',\n});\n\n/*Also handles persisting of CURRENT_MODULE in localstorage and updates redux store accordingly*/\nexport const ModuleSelect = () => {\n\n    const dispatch = useDispatch()\n    const { isSuperUser } = useSelector(selectLoginStatus)\n\n    const modules = Object.entries(MODULES)\n        .filter(([_, { onlySuperUser }]) => isSuperUser || !onlySuperUser)\n        .map(([moduleKey, { menuName }]) =>\n            <StyledButton\n                variant={'outlined'}\n                color={'primary'}\n                key={moduleKey}\n                onClick={() => dispatch(setCurrentModule(moduleKey))}>\n                {menuName}\n            </StyledButton>\n        )\n\n    /*Todo get this URL from the server in future*/\n    modules.push(isSuperUser && <StyledButton\n        variant={'outlined'}\n        color={'primary'}\n        key={'attractions'}\n        onClick={() => window.open(GDOCS_ATTRACTIONS_URL, '_blank', 'noopener,noreferrer')}\n        endIcon={<CallMadeIcon />}>\n        Attractions and Food\n    </StyledButton>)\n\n    return <OuterContainer>\n        <ModulesContainer>\n            {modules}\n        </ModulesContainer>\n    </OuterContainer>\n};","import { baseApi } from \"../network-core/baseApi\";\nimport { parseISO } from \"date-fns\";\n\nconst notificationsApi = baseApi.injectEndpoints({\n  endpoints: (build) => ({\n\n    /**\n     * Fetch notifications, converting ISO8601 dates\n     * to milliseconds since epoch (timestamps), the same used\n     * for app notifications.\n     */\n    getNotifications: build.query({\n      query: () => \"notifications/\",\n      transformResponse: (response) =>\n        response.map(({ created, dismissed, ...rest }) => ({\n          created: created ? parseISO(created).getTime() : null,\n          dismissed: dismissed ? parseISO(dismissed).getTime() : null,\n          ...rest,\n        })),\n    }),\n\n    dismissNotification: build.mutation({\n      query: ({ id }) => ({\n        url: `notifications/${id}/`,\n        method: \"DELETE\",\n      }),\n\n      /* Optimistically update */\n      onQueryStarted: ({ id }, { dispatch, queryFulfilled }) => {\n        let result = dispatch(\n          notificationsApi.util.updateQueryData(\n            \"getNotifications\",\n            undefined,\n            (draft) => draft.filter((e) => e.id !== id)\n          )\n        );\n        queryFulfilled.catch(result.undo);\n      },\n    }),\n  }),\n});\n\nexport const { useGetNotificationsQuery, useDismissNotificationMutation } =\n  notificationsApi;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const notificationsSliceName = \"notifications\";\n\nconst shape = [\n  \"title\",\n  \"content\",\n  \"source\",\n\n  /*Autogenerated if not already present*/\n  \"id\",\n  \"created\", // \n];\n\n/* TODO switch to proper typing*/\nconst validateShape = (arg) => {\n  if (!shape.every((e) => Object.keys(arg).includes(e)))\n    throw new Error(\n      `Invalid notification shape: expected ${shape}, but got ${Object.keys(\n        arg\n      )}`\n    );\n};\n\n/**\n * App (frontend) notifications\n * Marked with `fromApp: true`\n */\nexport const notificationSlice = createSlice({\n  name: notificationsSliceName,\n  initialState: [],\n  reducers: {\n    addAppNotification: (state, { payload }) => {\n      validateShape(payload);\n      state.push({...payload, fromApp: true});\n    },\n    removeAppNotification: (state, { payload: { id } }) =>\n      state.filter((e) => e.id !== id),\n  },\n});\n\nexport const { addAppNotification, removeAppNotification } =\n  notificationSlice.actions;\n\nexport const selectAppNotifications = state => state[notificationsSliceName]","import {\n  Badge,\n  Chip,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemText,\n  Popover,\n  Typography,\n} from \"@material-ui/core\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport React, { useState, useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport {\n  useDismissNotificationMutation,\n  useGetNotificationsQuery,\n} from \"./notificationsApi\";\nimport { selectAppNotifications } from \"./notificationSlice\";\nimport { format, compareDesc, isToday } from \"date-fns\";\n\nconst StyledChip = styled(Chip)`\n  margin-right: 5px;\n  cursor: pointer;\n`;\n\nconst StyledPopover = styled(Popover)`\n  .MuiPopover-paper {\n    max-width: min(calc(100% - 32px), 600px);\n    max-height: calc(100% - 56px);\n    overscroll-behavior: contain;\n  }\n`;\n\nconst StyledSpan = styled.div`\n  white-space: pre-line;\n`;\n\nconst REFRESH_INTERVAL_MS = 60 * 1000;\n\n/* If today, format as 1:38am. Otherwise, 12 Jan 1:38am. */\nconst formatTime = (date) =>\n  isToday(date)\n    ? `Today, ${format(date, \"h:mmaaa\")}`\n    : format(date, \"d MMM, h:mmaaa\");\n\nexport const NotificationMenu = () => {\n  const { data: serverNotifications = [] } =\n    useGetNotificationsQuery(undefined, {\n      pollingInterval: REFRESH_INTERVAL_MS,\n      refetchOnReconnect: true,\n    });\n  const [dismissNotification] = useDismissNotificationMutation();\n\n  const appNotifications = useSelector(selectAppNotifications);\n\n  /* Combine notifications from both the front- and back-ends */\n  const notifications = useMemo(\n    () =>\n      [...serverNotifications, ...appNotifications].sort((a, b) =>\n        compareDesc(a.created, b.created)\n      ),\n    [serverNotifications, appNotifications]\n  );\n\n  const [anchorEl, setAnchorEl] = useState();\n\n  const handleNotificationClick = (e) => setAnchorEl(e.currentTarget);\n  const onClose = () => setAnchorEl(null);\n\n  return (\n    <>\n      <IconButton onClick={handleNotificationClick}>\n        <Badge badgeContent={notifications.length} color={\"error\"}>\n          <NotificationsIcon />\n        </Badge>\n      </IconButton>\n      <StyledPopover\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        disableScrollLock\n        transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\n        onClose={onClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n        }}\n      >\n        {notifications.length > 0 ? (\n          notifications.map((e) => (\n            <React.Fragment key={e.id}>\n              <ListItem\n                button\n                onClick={() => dismissNotification({ id: e.id })}\n              >\n                <ListItemText\n                  disableTypography\n                  primary={\n                    <>\n                      <StyledChip color={\"primary\"} label={e.source} />\n                      {e.title}\n                    </>\n                  }\n                  secondary={\n                    <>\n                      <StyledSpan>{e.content}</StyledSpan>\n                      <Typography variant={\"body2\"} align={\"right\"}>\n                        {formatTime(e.created)}\n                      </Typography>\n                    </>\n                  }\n                />\n              </ListItem>\n              <Divider />\n            </React.Fragment>\n          ))\n        ) : (\n          <ListItem>\n            <ListItemText primary={\"No new notifications\"} />\n          </ListItem>\n        )}\n      </StyledPopover>\n    </>\n  );\n};\n","import {OverlayScrollbarOptions} from \"../theme\";\nimport {CircularProgress, Drawer, List, ListItem, ListItemIcon, ListItemText, useMediaQuery} from \"@material-ui/core\";\nimport {selectCurrentModule, setCurrentModule} from \"../appSlice\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport MeetingRoomIcon from \"@material-ui/icons/MeetingRoom\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport {OverlayScrollbarsComponent} from \"overlayscrollbars-react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useLogoutMutation} from \"../auth/authApi\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport {BACKGROUND_COLOR} from \"../../shared/components/backgroundScreen\";\n\n\nconst OverlayScrollbarsWithMaxWidth = styled(OverlayScrollbarsComponent)`\n  width: ${({$width})=>$width}px;\n  max-width: 80vw;\n`\n\nconst AppNameDiv = styled.div`\n  font-family: 'Starcraft', serif;\n  font-size: 20px;\n  margin: 0 auto;\n  text-align: center;\n  cursor: default;\n`;\n\n\nconst TransparentDrawer = styled(Drawer)`\n  .MuiDrawer-paper {\n    ${({$transparent}) => $transparent && BACKGROUND_COLOR};\n  }\n`;\n\nexport const AppBarDrawer = ({drawerOpen, drawerWidth, setDrawerOpen, sidebarName, children}) => {\n\n    const dispatch = useDispatch()\n    const module = useSelector(selectCurrentModule)\n\n    const [logout, {isLoading}] = useLogoutMutation()\n\n    const theme = useTheme();\n    const mobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const closeAppBar = () => setDrawerOpen(false)\n\n    const clearModule = () => dispatch(setCurrentModule(null))\n\n    return <TransparentDrawer\n        $transparent={!mobile}\n        onClose={closeAppBar}\n        open={!mobile || drawerOpen}\n        variant={mobile ? 'temporary' : 'permanent'}>\n        <OverlayScrollbarsWithMaxWidth\n            $width={drawerWidth}\n            options={OverlayScrollbarOptions}\n            className={'os-host-flexbox'}>\n            <List onClick={closeAppBar}>\n                <ListItem>\n                    <AppNameDiv>{sidebarName}</AppNameDiv>\n                </ListItem>\n                {module && <ListItem button onClick={clearModule}>\n                    <ListItemIcon>\n                        <ArrowBackIcon/>\n                    </ListItemIcon>\n                    <ListItemText primary={'Back to Apps'}/>\n                </ListItem>}\n                {children}\n                <ListItem\n                    button\n                    onClick={e => {\n                        e.stopPropagation()\n                        logout()\n                    }}>\n                    <ListItemIcon>\n                        <MeetingRoomIcon/>\n                    </ListItemIcon>\n                    <ListItemText primary={'Logout'}/>\n                    {isLoading && <CircularProgress size={20}/>}\n                </ListItem>\n            </List>\n        </OverlayScrollbarsWithMaxWidth>\n    </TransparentDrawer>;\n\n}","import { useSelector } from \"react-redux\"\nimport { selectPendingNetworkActions } from \"../appSlice\"\nimport { CircularProgress } from '@material-ui/core';\n\nexport const AppBarNetworkLoading = () => {\n    const hasPendingNetworkActions = useSelector(selectPendingNetworkActions).length > 0\n\n    return hasPendingNetworkActions ? <CircularProgress size={20}/> : null\n}","import { AppBar as MuiAppBar, IconButton, Toolbar, Typography } from \"@material-ui/core\";\nimport { styled as muiStyled } from \"@material-ui/core/styles\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React, { useLayoutEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport styled from 'styled-components';\nimport { selectCurrentModule } from \"../appSlice\";\nimport { MODULES } from \"../modules/modules\";\nimport { ModuleSelect } from \"../modules/ModuleSelect\";\nimport { NotificationMenu } from \"../notifications/NotificationMenu\";\nimport { AppBarDrawer } from \"./AppBarDrawer\";\nimport { AppBarNetworkLoading } from \"./AppBarNetworkLoading\";\n\nexport const drawerWidth = 300;\n\nconst FlexContainer = styled.div`\n  display: flex;\n  height: 100vh;\n`;\n\nconst TransparentAppBar = muiStyled(MuiAppBar)(({ theme }) => ({\n    [theme.breakpoints.up('md')]: {\n        width: `calc(100% - ${drawerWidth}px)`,\n        marginLeft: drawerWidth,\n    },\n\n    '@supports (backdrop-filter: blur(10px))': {\n        'backdrop-filter': 'blur(10px)',\n    },\n\n    background: 'rgba(0,0,0,0.6)',\n\n}));\n\nconst DrawerContainer = muiStyled('div')(({ theme }) => ({\n    [theme.breakpoints.up('md')]: {\n        width: drawerWidth,\n        flexShrink: 0,\n    },\n\n}));\n\nconst ContentContainer = styled.div`\n  flex: 1;\n`;\n\nconst ContentDiv = styled.div`\n  height: calc(100% - 48px); //48px is the height of Toolbar (variant=dense)\n`;\n\n\nconst StyledIconButton = muiStyled(IconButton)(({ theme }) => ({\n    [theme.breakpoints.up('md')]: {\n        display: 'none',\n    }\n}));\n\n\n/*A globally shared app bar.\nTo prevent AppBar from automatically closing on ListItem click, use \ne.stopPropagation().*/\nexport const AppBar = () => {\n\n    const module = useSelector(selectCurrentModule)\n\n    /*Hooks are passed to modules*/\n    const [drawerOpen, setDrawerOpen] = useState(false)\n    const [drawerContent, setDrawerContent] = useState(null)\n    const [sidebarName, setSidebarName] = useState('')\n    const [titleContent, setTitleContent] = useState(null)\n\n    const appBarProps = { setDrawerContent, setTitleContent, setSidebarName, setDrawerOpen }\n\n    /*useLayoutEffect is critical here, to ensure that this runs BEFORE any\n    * useEffect(s) in the children that might call setTitleContent etc.*/\n    useLayoutEffect(() => {\n        if (!module) {\n            setSidebarName('Modules')\n            setTitleContent(<Typography variant={\"h6\"}>Modules</Typography>)\n            setDrawerContent(null)\n        } else {\n            setTitleContent(<Typography variant={\"h6\"}>{MODULES[module].menuName}</Typography>)\n            setSidebarName(MODULES[module].menuName)\n        }\n\n    }, [module, setDrawerContent, setSidebarName, setTitleContent])\n\n    return <FlexContainer>\n        <TransparentAppBar\n            position={'fixed'}\n            color={'transparent'}>\n            <Toolbar variant={\"dense\"}>\n                <StyledIconButton\n                    color={\"inherit\"}\n                    edge={'start'}\n                    onClick={() => setDrawerOpen(true)}>\n                    <MenuIcon />\n                </StyledIconButton>\n                {titleContent}\n                <div style={{ flex: 1 }} />\n                <AppBarNetworkLoading />\n                <NotificationMenu />\n            </Toolbar>\n        </TransparentAppBar>\n\n        <DrawerContainer>\n            <AppBarDrawer\n                drawerOpen={drawerOpen}\n                drawerWidth={drawerWidth}\n                setDrawerOpen={setDrawerOpen}\n                sidebarName={sidebarName}>\n                {drawerContent}\n            </AppBarDrawer>\n        </DrawerContainer>\n\n\n        <ContentContainer>\n            {/* Blank toolbar purely for spacing */}\n            <Toolbar variant={\"dense\"} />\n            <ContentDiv>\n                {module ?\n                    React.createElement(MODULES[module].element, appBarProps) :\n                    <ModuleSelect {...appBarProps} />}\n            </ContentDiv>\n        </ContentContainer>\n\n    </FlexContainer>\n};","import { shaderMaterial } from \"@react-three/drei\";\nimport { extend } from '@react-three/fiber'\n\nconst SpriteShaderMaterial = shaderMaterial(\n    { uTime: { value: 0 }, uTexture: null },\n  //Vertex shader\n    `\n  uniform float uTime;\n  attribute vec3 color;\n  attribute float size;\n  attribute float velocity;\n  varying vec4 vColor;\n  void main(){\n    vColor = vec4(color, 1.0);\n    vec3 p = vec3(position);\n    p.z = -150. + mod(position.z + uTime, 300.);\n    vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );\n    gl_PointSize = size * (-50.0 / mvPosition.z);\n    gl_Position = projectionMatrix * mvPosition;\n  }\n`,\n//Fragment shader\n`\n  uniform sampler2D uTexture;\n  varying vec4 vColor;\n  void main() {\n    gl_FragColor = vColor * texture2D(uTexture, gl_PointCoord);\n  }\n`,\n)\n\nextend({SpriteShaderMaterial})","import { Vector2 } from \"three\";\n\nexport const ZoomShader = {\n\tuniforms: {\n\t\ttDiffuse: { value: null },\n\t\tcenter: { value: new Vector2(0.5, 0.5) },\n\t\tstrength: { value: 0 },\n\t},\n\t//Vertex shader\n\tvertexShader: `\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  `,\n\t//Fragment shader\n\tfragmentShader: `\n    uniform sampler2D tDiffuse;\n    uniform vec2 center;\n    uniform float strength;\n    varying vec2 vUv;\n    float random(vec3 scale, float seed) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n    }\n    \n    void main() {\n      vec4 color = vec4(0.0);\n      float total = 0.0;\n      vec2 toCenter = center - vUv;\n      \n      /* randomize the lookup values to hide the fixed number of samples */\n      float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n      \n      for (float t = 0.0; t <= 40.0; t++) {\n        float percent = (t + offset) / 40.0;\n        float weight = 4.0 * (percent - percent * percent);\n        vec4 texel = texture2D(tDiffuse, vUv + toCenter * percent * strength);\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\n        texel.rgb *= texel.a;\n        color += texel * weight;\n        total += weight;\n      }\n      gl_FragColor = color / total;\n      /* switch back from pre-multiplied alpha */\n      gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n    }\n  `,\n}","import { useTexture } from '@react-three/drei'\nimport { Canvas, extend, useFrame, useThree } from '@react-three/fiber'\nimport React, { useEffect, useMemo, useRef, useState } from 'react'\nimport styled from 'styled-components'\nimport { Color, Vector3 } from 'three'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\nimport { lerp } from 'three/src/math/MathUtils'\nimport { getRandomInt } from '../../shared/util'\nimport './spriteShaderMaterial'\nimport { ZoomShader } from './zoomShader'\n\nextend({ UnrealBloomPass, RenderPass, ShaderPass, EffectComposer })\n\n/* Used to avoid jankiness when showZoom changes */\nexport const showZoom = {val: false}\n\n/* Global parameters */\nconst fov = 50\nconst cameraDistance = 0.1\nconst starfieldSpawnZ = -150 // Has to be -150 because of the shader (not sure why)\nconst starfieldZLength = 300 // Also has to be 300 because of the shader\nconst POINTS_COUNT = Math.floor(50_000 * Math.min(window.innerWidth / 1280, 1))// Maximum number of points to render\nconst COLORS = [\n    0xa70267,\n    0xf10c49,\n    0xfb6b41,\n    0xf6d86b,\n    0x339194\n]\nconst MAX_TIME_FACTOR = 100\nconst TIME_FACTOR_CHANGE = 0.02\nconst ZOOM_RATIO = 0.004 // Factor by which zoom is multiplied by the time factor - 1\n// const fieldY = 2 * totalDistance * tanDegrees(fov / 2)\n// const fieldX = fieldY * width / height\n/* 200 looks better, somehow */\nconst fieldY = 200\nconst fieldX = 200 * window.innerWidth / window.innerHeight\n\nconst FullscreenDiv = styled.div`\n  width: 100%;\n  height: 100%;\n  position: fixed;\n`\n\nconst Main = () => {\n\n    const texture = useTexture('star.png')\n    const points = useRef()\n    const shaderMaterial = useRef()\n    const [cameraVec] = useState(() => new Vector3())\n    const composer = useRef()\n    const { scene, gl, size: {height, width}, camera } = useThree()\n    const zoomShader = useRef()\n    const timeFactor = useRef(1)\n\n    const { positions, sizes, colors } = useMemo(() => {\n        const positionArray = new Float32Array(POINTS_COUNT * 3)\n        const sizesArray = new Float32Array(POINTS_COUNT)\n        const colorsArray = new Float32Array(POINTS_COUNT * 3)\n\n        for (let i = 0; i < POINTS_COUNT; i++) {\n            //Positions\n            let pointPosition = new Float32Array([\n                Math.random() * fieldX - fieldX / 2,\n                Math.random() * fieldY - fieldY / 2,\n                Math.random() * -starfieldZLength\n            ])\n\n            positionArray.set(pointPosition, i * 3)\n\n            //Sizes\n            sizesArray[i] = getRandomInt(5, 20)\n\n            //Colors\n            let color = new Color()\n            color.set(COLORS[getRandomInt(0, COLORS.length)])\n            color.toArray(colorsArray, i * 3)\n        }\n\n        return {\n            positions: positionArray,\n            sizes: sizesArray,\n            colors: colorsArray\n        } \n    }, [])\n\n    useEffect(() => void composer.current.setSize(width, height), [height, width])\n\n    useFrame(({ camera, mouse }, delta) => {\n        composer.current.render()\n        camera.position.lerp(cameraVec.set(-mouse.x * 4, -mouse.y * 4, 0), 0.03)\n\n        /* This is the factor by which zoom strength and particle velocity are multiplied by\n        Using lerp repeatedly results in decreasing change near endpoints, a desirable effect*/\n        timeFactor.current = lerp(timeFactor.current, showZoom.val ? MAX_TIME_FACTOR : 1, TIME_FACTOR_CHANGE)\n\n        shaderMaterial.current.uTime += delta * 4 * timeFactor.current\n        zoomShader.current.uniforms.strength.value = (timeFactor.current - 1) * ZOOM_RATIO\n    }, 1)\n\n\n    return <>\n        <color attach={'background'} args={['black']} />\n        <points ref={points} position={[0, 0, starfieldSpawnZ]}>\n            <bufferGeometry>\n                <bufferAttribute attachObject={['attributes', 'position']} array={positions} itemSize={3} count={POINTS_COUNT} />\n                <bufferAttribute attachObject={['attributes', 'size']} array={sizes} itemSize={1} count={POINTS_COUNT} />\n                <bufferAttribute attachObject={['attributes', 'color']} array={colors} itemSize={3} count={POINTS_COUNT} />\n            </bufferGeometry>\n            <spriteShaderMaterial\n                ref={shaderMaterial}\n                uTime={0}\n                uTexture={texture}\n                blending={2} //Additive blending\n                depthTest={false} //No sprite occlusion\n            />\n        </points>\n        <effectComposer ref={composer} args={[gl]}>\n            <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n            {/* resolution, strength, radius, threshold */}\n            <unrealBloomPass attachArray=\"passes\" args={[undefined, 2, 0, 0]} />\n            <shaderPass attachArray=\"passes\" args={[ZoomShader]} ref={zoomShader} />\n        </effectComposer>\n    </>\n}\n\nexport const Starfield = () => <FullscreenDiv>\n    <Canvas camera={{ position: [0, 0, cameraDistance], fov }}>\n        <Main/>\n    </Canvas>\n</FullscreenDiv>","import {\n  Button,\n  Checkbox,\n  CircularProgress,\n  FormControlLabel,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { BackgroundScreenRounded } from \"../../shared/components/backgroundScreen\";\nimport { Loading } from \"../../shared/components/Loading\";\nimport { selectLoginStatus, setNetworkError } from \"../appSlice\";\nimport { NETWORK_ERROR } from \"../constants\";\nimport { showZoom } from \"../starfield/Starfield\";\nimport { useCheckLoginQuery, useLoginMutation } from \"./authApi\";\n\nconst StyledForm = styled.form`\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  max-width: 300px;\n  height: 100vh;\n  ${({ $blur }) => $blur && `filter: blur(5px) opacity(25%);`}\n  transition: 0.5s;\n\n  .grecaptcha-badge {\n    width: 0 !important; //This badge keeps expanding the canvas on submit\n  }\n`;\n\nconst InnerContainer = styled(BackgroundScreenRounded)`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 10px;\n  position: relative;\n`;\n\nconst StyledTextField = styled(TextField)`\n  margin: 5px 0;\n`;\n\nconst Spacer = styled.div`\n  width: 30px;\n`;\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  margin-left: 10px;\n`;\n\n/*Will update loggedIn state\nThe lag on error is due to recaptcha resetting*/\nexport const Login = () => {\n  const dispatch = useDispatch();\n  const { recaptchaKey } = useSelector(selectLoginStatus);\n\n  /* isLoading is used to determine if starfield zoom animation should be shown */\n  const [login, { isLoading }] = useLoginMutation();\n  const { isFetching, isError, error } = useCheckLoginQuery(undefined, {\n    refetchOnMountOrArgChange: true,\n  });\n\n  const { register, getValues, setValue } = useForm({\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n      otp: null,\n      save_browser: false,\n    },\n  });\n\n  register(\"username\");\n  register(\"password\");\n  register(\"otp\");\n  register(\"save_browser\");\n\n  const recaptchaRef = React.useRef();\n  const [loginMessage, setLoginMessage] = useState(\"Sign In\");\n  const [otpRequired, setOtpRequired] = useState(false);\n\n  /* Control zoom effect on starfield here */\n  useEffect(() => void (showZoom.val = isLoading), [isLoading]);\n\n  const onSubmit = useCallback(\n    (event) => {\n      event.preventDefault();\n\n      setLoginMessage(\"\");\n      recaptchaRef.current\n        .executeAsync()\n        .then((token) =>\n          login({\n            token,\n            ...getValues(),\n          })\n        )\n        .then((res) => {\n          /* Handle 401/403 errors here (either OTP required or wrong password) */\n          if (\n            res.error &&\n            res.error.type === NETWORK_ERROR.HTTP_ERROR &&\n            [401, 403].includes(res.error.status)\n          ) {\n            let data = res.error.data;\n\n            if (data.otp_required) setOtpRequired(true);\n\n            setLoginMessage(data.message);\n\n            /*Reset captcha for retries*/\n            recaptchaRef.current?.reset();\n          }\n        })\n        .catch((e) => {\n          /*Since thunks do not throw if not unwrapped,\n           * only gRecaptcha errors are caught here.\n           * networkErrorMiddleware handles the rest.\n           * This is at the end of the chain so that all\n           * prior 'then's do not execute if recaptcha validation fails.*/\n          dispatch(\n            setNetworkError({\n              text: `gRecaptcha request failed: ${e?.message}`,\n              type: NETWORK_ERROR.FETCH_ERROR,\n            })\n          );\n        });\n    },\n    [dispatch, login, getValues]\n  );\n\n  /*Show loading screen also for non-401/403 errors*/\n  if (isFetching || (isError && ![401, 403].includes(error.status)))\n    return (\n      <Loading\n        open={true}\n        message={\n          isError\n            ? \"HTTP Error\"\n            : \"Checking authentication...\\nTo use another backend, append '#' followed by the backend's url.\"\n        }\n        fullscreen={true}\n      />\n    );\n\n  return (\n    <>\n      <StyledForm onSubmit={onSubmit} $blur={isLoading}>\n        <InnerContainer>\n          <Typography\n            variant={\"h6\"}\n            gutterBottom\n            align={\"center\"}\n            style={{ height: \"32px\" }}\n          >\n            {loginMessage}\n          </Typography>\n          {!otpRequired && (\n            <>\n              <StyledTextField\n                autoComplete={\"username\"}\n                autoFocus\n                fullWidth\n                label={\"Username\"}\n                name={\"username\"}\n                onChange={(e) => setValue(\"username\", e.target.value)}\n                required\n                type=\"text\"\n                variant={\"outlined\"}\n              />\n\n              <StyledTextField\n                autoComplete={\"current-password\"}\n                fullWidth\n                label={\"Password\"}\n                name={\"password\"}\n                onChange={(e) => setValue(\"password\", e.target.value)}\n                required\n                type={\"password\"}\n                variant={\"outlined\"}\n              />\n            </>\n          )}\n\n          {otpRequired && (\n            <>\n              <StyledTextField\n                autoComplete={\"one-time-code\"}\n                fullWidth\n                inputMode={\"numeric\"}\n                label={\"OTP\"}\n                name={\"otp\"}\n                onChange={(e) => setValue(\"otp\", e.target.value)}\n                pattern={\"[0-9]*\"}\n                required\n                type={\"password\"}\n                variant={\"outlined\"}\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    name={\"save_browser\"}\n                    onChange={(e) => setValue(\"save_browser\", e.target.checked)}\n                  />\n                }\n                label={\"Remember browser\"}\n              />\n            </>\n          )}\n          <Button\n            variant={\"contained\"}\n            type={\"submit\"}\n            color={\"primary\"}\n            disabled={isLoading}\n            fullWidth\n          >\n            <Spacer />\n            Login\n            {isLoading ? (\n              <StyledCircularProgress color={\"inherit\"} size={20} />\n            ) : (\n              <Spacer />\n            )}\n          </Button>\n          <ReCAPTCHA\n            ref={recaptchaRef}\n            size={\"invisible\"}\n            sitekey={recaptchaKey}\n            theme={\"dark\"}\n          />\n        </InnerContainer>\n      </StyledForm>\n    </>\n  );\n};\n","import {useCheckLoginQuery} from \"../auth/authApi\";\n\nconst SESSION_REFRESH_INTERVAL_MS = 60 * 60 * 1000;\n\nexport const RefreshSession = () => {\n    useCheckLoginQuery(undefined, {\n        pollingInterval: SESSION_REFRESH_INTERVAL_MS,\n        refetchOnReconnect: true,\n    })\n    return null\n}","import { Loader } from \"@react-three/drei\";\nimport React, { Suspense } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { AppBar } from \"./app-bar/AppBar\";\nimport { selectLoginStatus } from \"./appSlice\";\nimport { Login } from \"./auth/Login\";\nimport { RefreshSession } from \"./refresh-session/RefreshSession\";\nimport { Starfield } from \"./starfield/Starfield\";\n\n/*Checks for login then displays appropriate component*/\nexport const App = () => {\n  const { loggedIn } = useSelector(selectLoginStatus);\n\n  return loggedIn ? (\n    <>\n      <RefreshSession />\n      <AppBar />\n    </>\n  ) : (\n    <>\n      <Suspense fallback={null}>\n        <Starfield />\n        <Login />\n      </Suspense>\n      <Loader />\n    </>\n  );\n};\n","import {isRejected, isRejectedWithValue} from \"@reduxjs/toolkit\";\nimport {setNetworkError} from \"../appSlice\";\n\n/*Show network errors for rejected thunk actions*/\nexport const networkErrorMiddleware = ({dispatch}) => next => action => {\n\n    if (isRejectedWithValue(action)) {\n        /*Payload has been formatted by baseQuery.\n        * Reducer will filter out 401/403s while not logged in*/\n        dispatch(setNetworkError(action.payload));\n\n    } else if (isRejected(action) && !action.meta.condition) {\n        /*Ignore thunks cancelled due to condition being true*/\n        console.warn(`Rejected thunk:`, action)\n    }\n\n    return next(action)\n}","import { isAnyOf, isFulfilled, isPending, isRejected, isRejectedWithValue } from \"@reduxjs/toolkit\"\nimport { addNetworkAction, removeNetworkAction } from \"../appSlice\"\n\n\nexport const networkLoadingMiddleware = ({dispatch}) => next => action => {\n\n    if (isPending(action)) {\n        dispatch(addNetworkAction(action.meta.requestId))\n\n    } else if (isAnyOf(isFulfilled, isRejected, isRejectedWithValue)(action)) {\n        dispatch(removeNetworkAction(action.meta.requestId))\n    }\n\n    return next(action)\n}","import { configureStore } from \"@reduxjs/toolkit\";\nimport { appSlice, appSliceName as appPath } from \"./appSlice\";\nimport { baseApi } from \"./network-core/baseApi\";\nimport { networkErrorMiddleware } from \"./network-error/networkErrorMiddleware\";\nimport { setupListeners } from \"@reduxjs/toolkit/query\";\nimport { notificationSlice, notificationsSliceName as notificationsPath } from \"./notifications/notificationSlice\";\nimport { listsSlice, listsPath } from \"../modules/Lists/listsSlice\";\nimport { networkLoadingMiddleware } from \"./network-loading/networkLoadingMiddleware\";\nimport { literaturePath, literatureSlice } from './../modules/Literature/literatureSlice';\n\nexport const store = configureStore({\n    reducer: {\n        [baseApi.reducerPath]: baseApi.reducer,\n        [appPath]: appSlice.reducer,\n        [notificationsPath]: notificationSlice.reducer,\n        [listsPath]: listsSlice.reducer,\n        [literaturePath]: literatureSlice.reducer,\n    },\n    middleware: getDefaultMiddleware =>\n        getDefaultMiddleware()\n            .concat(baseApi.middleware)\n            .concat(networkErrorMiddleware)\n            .concat(networkLoadingMiddleware)\n})\n\nsetupListeners(store.dispatch)","import {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    IconButton,\n    Snackbar\n} from \"@material-ui/core\";\nimport {Alert} from \"@material-ui/lab\";\nimport React, {useState} from \"react\";\nimport {styled as muiStyled} from \"@material-ui/core/styles\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\nconst StyledDialog = muiStyled(Dialog)(({theme}) => ({\n    /*As zIndex is set inline in Dialog, style must be overridden with !important*/\n    zIndex: `${theme.zIndex.snackbar + 1} !important`,\n}));\n\n/* Display snackbar with dialog.\n* Omit onClose to prevent user from dismissing alert\n* Omit dialogTitle & dialogText to disable dialog*/\nexport const AlertSnackbarWithDialog = ({\n                                            severity = 'error',\n                                            onClose,\n                                            snackbarText,\n                                            dialogTitle,\n                                            dialogContent,\n                                            actions\n                                        }) => {\n\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const dialogEnabled = Boolean(dialogTitle && dialogContent);\n\n    return <>\n        {dialogEnabled && <StyledDialog\n            open={dialogOpen}\n            onClose={() => setDialogOpen(false)}\n            scroll={'body'}>\n\n            <DialogTitle>{dialogTitle}</DialogTitle>\n\n            <DialogContent>\n                <DialogContentText component={'div'} style={{whiteSpace: 'pre-wrap'}}>\n                    {dialogContent}\n                </DialogContentText>\n            </DialogContent>\n\n\n            <DialogActions>\n                <Button\n                    variant={'text'}\n                    color={'primary'}\n                    onClick={() => setDialogOpen(false)}\n                >Close\n                </Button>\n            </DialogActions>\n\n        </StyledDialog>}\n        <Snackbar open>\n            <Alert\n                severity={severity}\n                action={<>\n                    {dialogEnabled && <Button\n                        variant={'text'}\n                        color={'primary'}\n                        onClick={() => setDialogOpen(true)}>\n                        Details\n                    </Button>}\n                    {actions}\n                    {onClose && <IconButton\n                        size=\"small\"\n                        color=\"inherit\"\n                        onClick={onClose}>\n                        <CloseIcon fontSize=\"small\"/>\n                    </IconButton>}\n                </>}>\n                {snackbarText}\n            </Alert>\n        </Snackbar>\n    </>\n        ;\n};","import {Button} from \"@material-ui/core\";\nimport React from \"react\";\nimport {AlertSnackbarWithDialog} from \"../../shared/components/AlertSnackbarWithDialog\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {clearNetworkError, selectNetworkError} from \"../appSlice\";\nimport {NETWORK_ERROR} from \"../constants\";\nimport {format, formatISO} from 'date-fns'\n\n/*Displays appropriate snackbars informing users of network state/errors,\n* with remediation options.\n*\n* Accepts both Responses and Errors.*/\nexport const NetworkError = () => {\n\n    const dispatch = useDispatch()\n    const networkError = useSelector(selectNetworkError)\n    if (!networkError) return null\n\n    const {method, url, text, status, type, timestamp} = networkError\n\n    const message = <>\n        <p>{formatISO(timestamp)} {method}: {url}</p>\n        <p>{text}</p>\n    </>\n\n    const formattedTimestamp = format(timestamp, 'HH:mm')\n\n    switch (type) {\n        case NETWORK_ERROR.FETCH_ERROR:\n            /*Fetch error. Allow user to close snackbar*/\n            return <AlertSnackbarWithDialog\n                dialogTitle={'Fetch Error'}\n                actions={<Button color={'primary'} onClick={() => window.location.reload()}>\n                    Reload\n                </Button>}\n                dialogContent={message}\n                severity={'error'}\n                snackbarText={`[${formattedTimestamp}] A network error has occurred.`}\n                onClose={() => dispatch(clearNetworkError())}/>\n\n        case NETWORK_ERROR.HTTP_ERROR:\n            if ([401, 403].includes(status)) {\n                /*Authentication errors. Don't allow user to close snackbar*/\n                return <AlertSnackbarWithDialog\n                    dialogTitle={'Authentication Error'}\n                    actions={<Button color={'primary'}\n                                     onClick={() => window.location.reload()}>\n                        Login </Button>}\n                    dialogContent={message}\n                    severity={'warning'}\n                    snackbarText={'You are logged out.'}/>;\n\n            } else {\n                /*Other HTTP errors (4xx/5xx). Allow user to close snackbar*/\n                return <AlertSnackbarWithDialog\n                    dialogTitle={`Error ${status}`}\n                    actions={<Button color={'primary'} onClick={() => window.location.reload()}>\n                        Reload\n                    </Button>}\n                    dialogContent={message}\n                    severity={'error'}\n                    snackbarText={`[${formattedTimestamp}] An HTTP error has occurred.`}\n                    onClose={() => dispatch(clearNetworkError())}/>;\n            }\n        default:\n            /*Catch non NetworkError rejectedWithValue thunks*/\n            return <AlertSnackbarWithDialog\n                dialogTitle={`Non NetworkError rejectWithValue thunk`}\n                dialogContent={message}\n                severity={'error'}\n                snackbarText={`[${formattedTimestamp}] A network error has occurred.`}\n                onClose={() => dispatch(clearNetworkError())}/>;\n    }\n};","import styled from \"styled-components\";\nimport {getDaysSinceEpoch, getRandomInt} from \"../util\";\nimport {useCallback, useEffect, useState} from \"react\";\n\n/*Largest index of background images, inclusive*/\nconst NUM_IMAGES = 90;\n\nconst RandomBackgroundImage = styled.div`\n  background: url(${({$picIndex}) => `/bg/${$picIndex}.jpg`}) top/cover;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: -1;\n`;\n\n/*Get the latest pic index on window focus (setTimeout is unreliable*/\nconst getPicIndex = () => getRandomInt(1, NUM_IMAGES + 1, getDaysSinceEpoch());\n\nexport const RandomBackground = () => {\n\n    const [picIndex, setPicIndex] = useState(getPicIndex());\n    const listener = useCallback(() => setPicIndex(getPicIndex()), [])\n\n\n    useEffect(() => {\n        window.addEventListener('focus', listener)\n        return () => window.removeEventListener('focus', listener)\n    }, [listener]);\n\n    return <RandomBackgroundImage $picIndex={picIndex}/>\n};","import { Snackbar } from \"@material-ui/core\";\nimport { Alert } from \"@material-ui/lab\";\nimport { useState } from 'react';\n\n/**\n * Shows notification if another backend is being used\n * (i.e. '#' fragment present in url)\n */\nexport const BackendSnackbar = () => {\n    const [sbOpen, setSbOpen] = useState(true);\n    const alternateBackend = window.location.hash.slice(1)\n\n    return alternateBackend && <Snackbar\n        open={sbOpen}\n        onClose={() => setSbOpen(false)}\n        autoHideDuration={3000}>\n        <Alert\n            severity={'info'}\n            onClose={() => setSbOpen(false)}>\n            {`Using alternate backend at ${alternateBackend}`}\n        </Alert>\n    </Snackbar>\n}\n","import ReactDOM from \"react-dom\";\nimport React, { StrictMode } from \"react\";\nimport \"@fontsource/roboto/300.css\";\nimport \"@fontsource/roboto/400.css\";\nimport \"@fontsource/roboto/500.css\";\nimport \"@fontsource/roboto/700.css\";\nimport \"@fontsource/source-sans-pro\"; //For codemirror in MarkdownEditor.js\nimport \"./shared/static/fonts/starcraft/starcraft.css\"; //Stylized font for menu\nimport { MuiThemeProvider } from \"@material-ui/core\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { LoadServiceWorker } from \"./app/load-service-worker/LoadServiceWorker\";\nimport { ErrorBoundary } from \"./app/error-boundary/ErrorBoundary\";\nimport \"overlayscrollbars/css/OverlayScrollbars.css\";\nimport { theme } from \"./app/theme\";\nimport { App } from \"./app/App\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./app/store\";\nimport { NetworkError } from \"./app/network-error/NetworkError\";\nimport { RandomBackground } from \"./shared/components/randomBackground\";\nimport { BackendSnackbar } from \"./app/network-core/BackendSnackbar\";\n\n/*Decide whether to run mock service worker for debugging*/\nconst USE_MOCK_SERVICE_WORKER = false;\nconst prepare = () => {\n  if (process.env.NODE_ENV === \"development\" && USE_MOCK_SERVICE_WORKER) {\n    const { worker } = require(\"./test/mocks/browser\");\n    return worker.start();\n  }\n  return Promise.resolve();\n};\n\nprepare().then(() => {\n  ReactDOM.render(\n    <StrictMode>\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <RandomBackground />\n        <ErrorBoundary>\n          <Provider store={store}>\n            <LoadServiceWorker />\n            <BackendSnackbar />\n            <NetworkError />\n            <App />\n          </Provider>\n        </ErrorBoundary>\n      </MuiThemeProvider>\n    </StrictMode>,\n    document.getElementById(\"root\")\n  );\n});\n"],"sourceRoot":""}